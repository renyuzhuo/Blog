[{"number":55,"title":"ã€éšç¬”ã€‘é‚£å¹´è€ƒç ”","created_at":"2024-02-26 16:33:31","body":"åˆšåˆšåˆ·æœ‹å‹åœˆï¼Œçœ‹åˆ°äº†åŒäº‹åœ¨å…«ä¸ªå°æ—¶å‰ï¼Œæ™’å‡ºçš„è€ƒç ”æˆç»©å•ï¼Œä¸Šå²¸çš„æˆç»©å•ï¼Œé…çš„æ–‡å­—æ˜¯â€œ...è€ƒç ”ç‹—ç»ˆäºä¸Šå²¸äº†ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œä¸æ‰æˆ‘ä¸¤ç‚¹ç¡å…«ç‚¹èµ·...â€ï¼ŒæŒºç‰›çš„ï¼Œä¸€è¾¹å·¥ä½œä¸€è¾¹è€ƒç ”è€ƒä¸Šäº†ï¼ŒçœŸæŒºç‰›çš„ï¼Œæ­å–œæ­å–œã€‚\r\n\r\næƒ³èµ·äº†å››å¹´å‰ï¼Œå¤§å­¦æ¯•ä¸šåï¼Œå·¥ä½œäº†ä¸‰å¹´çš„æˆ‘ï¼Œä¹Ÿæ˜¯è«åå…¶å¦™ï¼Œé¬¼ä½¿ç¥å·®çš„å»è€ƒç ”äº†ï¼Œä¹Ÿè¯´ä¸æ¸…å…·ä½“çš„åŸå› ï¼Œä¹Ÿè®¸æ˜¯è§‰å¾—å·¥ä½œæ²¡æœ‰æ„ä¹‰éœ€è¦å»æ‰¾æ–°çš„æ–¹å‘ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºå·¥ä½œåˆ°äº†ä¸€å®šçš„ç“¶é¢ˆéœ€è¦ä¸€äº›çªç ´çš„åŠ¨åŠ›ï¼Œä¹Ÿè®¸æ˜¯ä¸ºäº†ç§¯åˆ†è½æˆ·èƒ½å¢åŠ çš„é‚£ä¸€ç‚¹äº”åˆ†ï¼Œä¹Ÿè®¸æ˜¯æ€€å¿µå¤§å­¦æ—¶é—´é‚£æœ€å¥½çš„ä¸€æ®µç”Ÿæ´»ï¼Œæˆ–è€…ä¹Ÿè®¸å°±æ˜¯å¤ªé—²äº†æ²¡äº‹æ‰¾äº‹â€¦â€¦è‡³ä»Šæˆ‘ä¹Ÿè¯´ä¸æ¸…å½“æ—¶ç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› ä¿ƒä½¿æˆ‘å°±å»è€ƒç ”äº†ï¼Œåæ­£ç»“æœå°±æ˜¯å»è€ƒäº†ã€‚\r\n\r\nè™½ç„¶å·²ç»è¿‡å»å‡ å¹´äº†ï¼Œä½†æ˜¯å°è±¡è¿˜æ˜¯è›®æ·±çš„ï¼Œç°åœ¨ä»ç„¶èƒ½è®°èµ·å¾ˆå¤šï¼šæ—©æ—©åƒè¿‡åˆé¥­å»æ•™å®¤ä¸€å­¦å°±æ˜¯ä¸€ä¸‹åˆï¼Œä¹°ä¸€ä¸ªå¤§ç“¶çš„é¥®æ–™åº†ç¥è‡ªå·±æƒ³é€šäº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œåˆ°å¤„æ‰¾ç©ºæ•™å®¤æƒ³è‡ªä¹ å´æ‰¾ä¸åˆ°åˆé€‚çš„æ•™å®¤ï¼Œé‚£å¹´ QQ éŸ³ä¹å¹´ç»ˆæ€»ç»“è¢«â€œè€ƒç ”æ”¿æ²»è‚–ç§€è£ç²¾è®²ç²¾ç»ƒâ€éœ¸æ¦œï¼Œæ™šä¸Šåä¸€ç‚¹åŠé¡¶ç€å¤§åŒ—é£å’Œè¶…å¤§çš„å¤§é›ªéª‘è½¦å›å®¶ï¼Œä»¥åŠæ™šé¥­åæˆ´ç€è€³æœºä¸€è¾¹åœ¨æ“åœºèµ°åœˆä¸€è¾¹ä¸€è¾¹å’Œå¥³å‹è¯­éŸ³é—²èŠäº›ä»€ä¹ˆã€‚å†å†åœ¨ç›®ï¼ŒçœŸçš„ï¼Œå†å†åœ¨ç›®ï¼\r\n\r\né‚£ä¸€å¹´è€ƒå®Œç ”å›å®¶ï¼Œä¾¿å¼€å§‹äº†é‚£æ¶ˆé€çš„ä¸‰å¹´ç¬¬ä¸€å¹´ï¼Œé‚£ä¸€å¹´æˆ‘åœ¨è€å®¶å‘†äº†å·®ä¸å¤šäº”ä¸ªæœˆï¼Œé‚£æ˜¯è‡ªä¸Šå¤§å­¦ååœ¨å®¶å‘†çš„æœ€é•¿çš„ä¸€å¹´ï¼Œä¸è¿‡æˆ‘å€’æ˜¯æ²¡æœ‰ç„¦è™‘ï¼Œå¯èƒ½æ˜¯å·¥ä½œäº†å‡ å¹´åæˆé•¿äº†å§ã€‚åç»­å°±æ˜¯è€ƒç ”æˆç»©å‘å¸ƒå»¶æœŸã€è°ƒå‰‚ã€å¤è¯•ï¼Œä¸€åˆ‡é¡ºç†æˆç« ï¼Œæ²¡æœ‰è¾¾åˆ°æŠ¥è€ƒçš„å­¦æ ¡åˆ†æ•°çº¿ï¼Œè°ƒå‰‚å…¶ä»–å­¦æ ¡æ—¶é€‰æ‹©äº†éå…¨æ—¥åˆ¶ï¼Œé¢„æœŸä¹‹å†…ï¼ŒæŒ‰è®¡åˆ’è¿›è¡Œï¼Œåªå¤ä¹ ä¸¤ä¸ªå¤šæœˆæˆ‘å¿…é¡»åšè¿™æ ·çš„è®¡åˆ’ã€‚\r\n\r\nç»ˆäºå‘Šä¸€æ®µè½ï¼Œå¯ä»¥å¼€å§‹æ‰¾å·¥ä½œäº†ï¼Œæ¥åˆ°äº†ç°åœ¨çš„å…¬å¸ï¼Œä¸€è¾¹è¯»ç ”ä¸€è¾¹ä¸Šç­ï¼ŒçœŸçš„å¥½ç´¯ï¼Œç›¸æ¯”è¾ƒè€Œè¨€ï¼Œå‘¨ä¸€åˆ°å‘¨äº”ç®—æ˜¯å‡æœŸï¼Œå‘¨å…­å‘¨æ—¥ä¸Šè¯¾æ›´ç´¯ï¼Œä¸è¿‡ä¹ŸåšæŒä¸‹æ¥äº†ï¼Œä¹Ÿç®—æ˜¯ä¸€ç§ä½“éªŒï¼Œéœ€è¦æœ‰ç§‘ç ”æˆæœæ¥è¾¾åˆ°æ¯•ä¸šè¦æ±‚ï¼Œå‘è®ºæ–‡ã€ä¸“åˆ©ï¼Œåšå®éªŒè®°æ•°æ®ï¼Œå¤§è®ºæ–‡ï¼Œå½“æ—¶çœŸçš„æƒ³æ­»ï¼ç°åœ¨æƒ³æƒ³ï¼Œå‘¨æœ«åœ¨å­¦æ ¡é£Ÿå ‚åƒé¥­çœŸä¾¿å®œï¼\r\n\r\næ‹¿æ¯•ä¸šè¯çš„é‚£å¤©ï¼Œæ˜¯ä¸€ä¸ªå·¥ä½œæ—¥ï¼Œä¸­åˆåˆä¼‘çš„æ—¶é—´ï¼Œæ‰“äº†ä¸ªè½¦å»å­¦æ ¡ï¼Œå–äº†æ¯•ä¸šè¯å’Œå­¦ä½è¯èµ¶å›æ¥ï¼Œæ‹äº†ç…§å‘ç»™æƒ³å‘çš„äººï¼Œéƒ½æ²¡æœ‰è€½è¯¯ä¸‹åˆçš„å·¥ä½œã€‚å¿ƒå¦‚æ­¢æ°´ï¼\r\n\r\nçªç„¶åˆæƒ³èµ·ï¼Œä»¥å‰å·¥ä½œç§Ÿæˆ¿å­åˆç§Ÿçš„å®¤å‹ï¼Œä¹Ÿæ˜¯å·¥ä½œåè€ƒç ”è¯»ç ”ï¼Œåº”è¯¥æ¯•ä¸šäº†å§ï¼Œæˆ‘è®°ä¸èµ·å¥¹çš„åå­—äº†ï¼Œç¿»äº†ä¸€åœˆå¾®ä¿¡è”ç³»äººæ‰æ‰¾åˆ°ï¼Œæ‰“å¼€å¥¹çš„æœ‹å‹åœˆä¸‰æ—¥å¯è§ï¼Œæ˜¯ä¸€æ®µè§†é¢‘ï¼Œåˆ†äº«ç»™ä½ ã€‚çœŸå¥½ï¼\r\n\r\næ™šå®‰ï¼\r\n\r\n2024.02.27 å‡Œæ™¨äºåŒ—äº¬"},{"number":53,"title":"åŸºé‡‘å®šæŠ•","created_at":"2021-01-07 16:51:38","body":"ç”¨æ•°å­¦çš„æ–¹å¼åˆ†æå®šæŠ•çš„åŸºæœ¬åŸç†ï¼Œå¦‚ä½•å‡æ‘Šæˆæœ¬ï¼Œä½•æ—¶è¯¥å–å‡ºï¼Œä¸è¦ç›²ç›®æŠ•èµ„ï¼\r\n\r\n#### ç”¨ä»£ç æ„å»ºæ•°å­¦æ¨¡å‹\r\n\r\n```\r\n# å¼•å…¥ä¾èµ–\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\nimport math\r\n```\r\n\r\n#### å®šä¹‰åŸºå‡†å‚æ•°\r\n\r\n```\r\n# ä¸€å¹´ 365 å¤©\r\ntime = 365\r\n# æ¯å¤©å®šæŠ•é‡‘é¢\r\naip = 100\r\n# æ³¢åŠ¨åŸºå‡†\r\nbase = 2\r\n```\r\n\r\n#### å‰ææ¡ä»¶\r\n\r\nå‡è®¾ä¸€å¹´ä¹‹å†…åŸºé‡‘æˆ–è‚¡ç¥¨çš„ä»·æ ¼æ˜¯å‘¨æœŸå˜åŒ–çš„ã€‚\r\n\r\n```\r\n# å‡è®¾å¸‚åœºåœ¨ä¸€å¹´å†…æ˜¯å‘¨æœŸæ€§å˜åŒ–çš„\r\ndays = np.linspace(0, 2 * np.pi, time)\r\n# å‡è®¾æŸåŸºé‡‘æˆ–è‚¡ç¥¨ä»¥ base ä¸ºåŸºå‡†ä¸Šä¸‹æ³¢åŠ¨\r\nprice = np.sin(days) + base\r\n\r\n# ä»·é’±å˜åŒ–\r\nplt.figure()\r\nplt.xlabel(\"Days\")\r\nplt.ylabel(\"Price\")\r\nplt.plot(days, price, color='green')\r\n```\r\n\r\n![æ³¢åŠ¨](https://user-images.githubusercontent.com/7275046/103917144-38f4e200-5148-11eb-83d2-c41d1ee8a9be.png)\r\n\r\n#### ä»½é¢ç¡®è®¤\r\n\r\næ¯ä¸€å¤©è´­ä¹°ä»½é¢æ˜¯å˜åŒ–çš„ï¼Œç”±äºä»·æ ¼æ³¢åŠ¨ï¼Œåœ¨ä»·é’±ä½çš„æ—¶å€™å¤šä¹°ï¼Œä»·é’±é«˜çš„æ—¶å€™å°‘ä¹°ï¼Œæ•´ä½“å¯ä»¥æ‹‰ä½æˆæœ¬ã€‚\r\n\r\n```\r\n# å‡è®¾æ¯å¤©å®šæŠ• aip å…ƒï¼Œæ¯ä¸€å¤©è´­ä¹°ä»½é¢ä¸º\r\nshare = aip / price\r\n\r\n# è´­ä¹°ä»½é¢å˜åŒ–\r\nplt.figure()\r\nplt.xlabel(\"Days\")\r\nplt.ylabel(\"Share\")\r\nplt.plot(days, share, color='red')\r\n```\r\n\r\n![è´­ä¹°ä»½é¢](https://user-images.githubusercontent.com/7275046/103917155-3befd280-5148-11eb-8f2d-f8962001958b.png)\r\n\r\n#### æŒä»“\r\n\r\nå¯ä»¥è®¡ç®—æŒä»“æ€»ä»½é¢ï¼Œä»¥åŠæŒä»“æ€»å¸‚å€¼ã€‚\r\n\r\n```\r\n# æŒä»“æ€»ä»½é¢\r\ntotal_share = np.sum(share)\r\n# æŒä»“ä»½é¢å¸‚å€¼\r\ntotal_money = total_share * base\r\n\r\n# è¾“å‡ºï¼šæŒä»“ä»½é¢ã€æŒä»“å¸‚å€¼\r\nprint('Total Share: ', total_share)\r\nprint('Total Money: ', total_money)\r\n# Total Share:  21065.549798502376\r\n# Total Money:  42131.09959700475\r\n```\r\n\r\n#### æ”¶ç›Š\r\n\r\nè®¡ç®—å®šæŠ•æ€»æˆæœ¬å’Œæ€»æ”¶ç›Šã€‚\r\n\r\n```\r\n# æ€»æˆæœ¬\r\ntotal_cost = aip * time\r\n# æœ€ç»ˆæ”¶ç›Šä¸ºæœ€åæŒä»“æ€»é¢å‡å»æˆæœ¬\r\nbalance = total_money - total_cost\r\n\r\n# è¾“å‡ºï¼šæ€»æˆæœ¬ã€æ€»æ”¶ç›Š\r\nprint('Total Cost: ', total_cost)\r\nprint('Total Balance: ', balance)\r\n# Total Cost:  36500\r\n# Total Balance:  5631.099597004752\r\n```\r\n\r\n#### æ”¶ç›Šç‡\r\n\r\nè®¡ç®—æ”¶ç›Šç‡ï¼Œç”¨æ€»ç›ˆåˆ©é™¤ä»¥æ€»æˆæœ¬ï¼Œä¸è€ƒè™‘ä¸»åŠ¨è°ƒä»“ç­‰æ“ä½œï¼Œä¸€å¹´çš„æ”¶ç›Šç‡å¤§çº¦æ˜¯ 15.4%ã€‚\r\n\r\n```\r\n# ç›ˆåˆ©æ”¶ç›Šç‡\r\nprint('Ratio: ', balance / total_cost)\r\n# Ratio:  0.1542767012878014\r\n```\r\n\r\n#### æˆæœ¬å˜åŒ–æ›²çº¿\r\n\r\nåœ¨å®šæŠ•è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€è‚¡çš„å¹³å‡æˆæœ¬éšç€æ¯å¤©çš„å®šæŠ•è€Œå˜åŒ–ï¼Œä¸€ä¸ªå‘¨æœŸå†…æˆæœ¬å˜åŒ–æ›²çº¿ã€‚\r\n\r\n```\r\nsum = 0\r\ncosts = []\r\n\r\nfor day in range(0, time):\r\n  # 0..364\r\n  sum = sum + share[day]\r\n  cost = aip * (day + 1) / sum\r\n  # print(cost)\r\n  costs.append(cost)\r\n\r\n# ä¸€å¹´æœŸåæœ€ç»ˆæŒä»“æˆæœ¬\r\nprint('Last Cost: ', costs[time - 1])\r\n# Last Cost:  1.73268679664819\r\n\r\n# æˆæœ¬å˜åŒ–\r\nplt.figure()\r\nplt.xlabel(\"Days\")\r\nplt.ylabel(\"Costs\")\r\nplt.plot(days, costs, color='orange')\r\n```\r\n\r\n![æˆæœ¬](https://user-images.githubusercontent.com/7275046/103917158-3c886900-5148-11eb-916e-feb97b0ef932.png)\r\n\r\n#### å¯¹æ¯”å¸‚åœºä»·å’ŒæŒä»“æˆæœ¬\r\n\r\næˆ‘ä»¬æŠŠåŸºé‡‘æˆ–è‚¡ç¥¨çš„ä»·é’±å˜åŒ–æ›²çº¿ï¼ˆç»¿çº¿ï¼‰å’Œç”±äºå®šæŠ•å¹³æ‘Šæˆæœ¬å¯¼è‡´çš„æˆæœ¬å˜åŒ–æ›²çº¿ï¼ˆè“çº¿ï¼‰æ”¾åˆ°ä¸€èµ·å¯¹æ¯”ä¸€ä¸‹ã€‚\r\n\r\n```\r\nplt.figure()\r\npl = plt.plot(days, price, color='green')\r\ncl = plt.plot(days, costs, color='blue')\r\nplt.show()\r\n```\r\n\r\n![å¯¹æ¯”](https://user-images.githubusercontent.com/7275046/103917160-3db99600-5148-11eb-889e-8adda7b7e381.png)\r\n\r\n## æ€»ç»“\r\n\r\nå¯ä»¥çœ‹åˆ°ï¼Œä¸è€ƒè™‘å…¶ä»–å› ç´ ï¼Œè™½ç„¶å¸‚åœºä»·ç»è¿‡ç¬¦åˆæ­£å¼¦å‡½æ•°çš„æ³¢åŠ¨åï¼Œä½†æ˜¯å¦‚æœæ¯å¤©éƒ½ä¹°ï¼Œæ€»çš„æˆæœ¬ä»·æ¯”å¸‚åœºä»·è¿˜æ˜¯è¦ä½çš„ï¼Œå–å‡ºåˆ™æ˜¯èµšé’±çš„ï¼Œé¿å…äº†ä¸€æ¬¡è´­ä¹°æ‹©æœºçš„é£é™©ã€‚ç»è¿‡ä¸Šé¢è®¡ç®—ï¼Œèµšé’±æ¯”ä¾‹å¤§çº¦ä¸º 15%ã€‚\r\n\r\næ€»ç»“èµ·æ¥ï¼Œå¦‚æœå¸‚åœºæ³¢åŠ¨ç¬¦åˆç»æµå‘å±•è§„å¾‹ï¼Œå®šæŠ•åŸºæœ¬å¯ä»¥ä¿è¯èµšé’±ã€‚\r\n\r\næ›´è¿›é˜¶ä¸€ç‚¹ï¼š\r\n\r\n  - ç©¿è¶Šå¤šä¸ªæ³¢åŠ¨å‘¨æœŸï¼Œç›ˆåˆ©æ¯”ä¾‹ä¸ä¼šå˜å¥½ï¼ˆä¿®æ”¹æ³¢åŠ¨å‘¨æœŸï¼Œå¢åŠ åˆ°ä¸€å¹´å†…ä¸¤æ¬¡æ³¢åŠ¨ï¼Œç›ˆåˆ©ç‡ä¿æŒä¸å˜ï¼‰ï¼›\r\n  - æŒ‰ç…§ä¸Šé¢çš„æ³¢åŠ¨æƒ…å†µè®¡ç®—ï¼Œè‹¥åœ¨è¾ƒé«˜å¤„åŠæ—¶å–å‡ºï¼Œä¸€å¹´çš„æ”¶ç›Šç‡å¤§çº¦åœ¨ 16%ï¼Œå¯ä»¥å¢åŠ ç›ˆåˆ©æ¯”ä¾‹ï¼›\r\n  - åœ¨æ³¢åŠ¨å¤„äºä¸Šå‡æœŸæ—¶ï¼Œä¸»åŠ¨å‡å°‘å®šæŠ•é‡‘é¢ï¼Œåœ¨æ³¢åŠ¨å¤„äºä¸‹é™æœŸæ—¶ï¼Œå¢åŠ å®šæŠ•é‡‘é¢ï¼Œæ›´å¯ä»¥æé«˜ç›ˆåˆ©æ¯”ä¾‹ï¼›\r\n  - è‹¥å¯¹äºç»æµå‘å±•é•¿æœŸæœ‰ä¿¡å¿ƒï¼Œåœ¨è¾ƒä½å¤„æ— è„‘å®šæŠ•ï¼Œä¸ç”¨å–å‡ºï¼Œåœ¨è¾ƒé«˜å¤„åŠæ—¶æ­¢ç›ˆï¼Œåˆ™å¯ä»¥æœ‰è¾ƒå¥½çš„æ”¶ç›Šã€‚\r\n\r\n## è­¦å‘Š\r\n\r\nå¸‚åœºè¿œæ¯”ç†è®ºæ¨¡å‹è¦å¤æ‚ï¼Œç‹‚è·Œä¸æ­¢æ‰æ˜¯çœŸçš„å±é™©ã€‚\r\n\r\n> åˆ«äººææƒ§æˆ‘è´ªå©ªï¼Œåˆ«äººè´ªå©ªæˆ‘ææƒ§ã€‚\r\n> â€”â€”å·´è²ç‰¹\r\n\r\n### Reference\r\n\r\n- [ä»£ç åœ°å€](https://colab.research.google.com/drive/1g1hL0Qr38Ycgrsc1rZo8KsoPmzKS6rDr?usp=sharing)"},{"number":51,"title":"è€ƒç ”ç»å†åè¡€æ€»ç»“","created_at":"2020-05-23 15:55:33","body":"## å‰è¨€\r\n\r\nè€ƒç ”æ€»ç®—æ˜¯ç»“æŸäº†ï¼Œç°åœ¨çœŸçš„è„‘å£³ç–¼ï¼ŒçœŸçš„æ˜¯é‚£ç§ç”Ÿç†ä¸Šçš„è„‘å£³ç—›ï¼Œç¡ä¸€è§‰åº”è¯¥å°±å¥½äº†çš„é‚£ç§ã€‚\r\n\r\n[ä¸Šä¸€ç¯‡](https://github.com/renyuzhuo/Blog/issues/45) å†™è€ƒç ”çš„äº‹æƒ…å·®ä¸å¤šæ˜¯åˆè¯•ç»“æŸåçš„æ—¶é—´ï¼Œå½“æ—¶è§‰å¾—è€ƒå¾—ä¸å¥½ï¼Œä½†æ˜¯æ²¡æœ‰å‡ºæˆç»©ï¼Œç®€å•å†™çš„éšç¬”å§ï¼Œä»Šå¤©ç¡®å®šäº†å½•å–é€šçŸ¥ï¼Œç®—æ˜¯æ‰€æœ‰çš„äº‹æƒ…éƒ½å°˜åŸƒè½å®šäº†ï¼Œå‰©ä¸‹è°ƒæ¡£æ”¿å®¡ä»€ä¹ˆçš„é™¤äº†éº»çƒ¦ä¸€ç‚¹ä¸ä¼šæœ‰ä»€ä¹ˆçƒ¦å¿ƒäº‹äº†ï¼Œä»Šå¤©å°±å¥½å¥½æ€»ç»“ä¸€ä¸‹å§ã€‚\r\n\r\n## è€ƒç ”å…¨è¿‡ç¨‹\r\n\r\n### å†³å®šè€ƒç ”å‰\r\n\r\nä¹Ÿä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ï¼Œä¹Ÿä¸çŸ¥é“å› ä¸ºä»€ä¹ˆåŸå› ï¼Œå°±æ˜¯æƒ³æäººå·¥æ™ºèƒ½äº†ï¼Œå¯èƒ½æ˜¯è§‰å¾—å½“æ—¶è§‰å¾—æ— äººé©¾é©¶çš„é€å¿«é€’çš„å°è½¦æ¯”è¾ƒèŒèŒå“’ï¼Ÿåæ­£å°±æ˜¯ä¸€æ—¶å¤´è„‘å‘çƒ­è·Ÿæˆ‘çš„è€æ¿è¯´æˆ‘æƒ³ç¦»èŒï¼Œæˆ‘æƒ³å»ææ™ºèƒ½ç¡¬ä»¶ï¼Œæˆ‘çš„è€æ¿è·Ÿæˆ‘èŠäº†å¾ˆå¤šï¼Œå…¶ä¸­æåˆ°äº†å¦‚æœæƒ³æäººå·¥æ™ºèƒ½è¦ä¸è¦å»è¯»ä¸ªç ”ï¼Ÿä¸€è¯­æƒŠé†’æ¢¦ä¸­äººå‘€ï¼Œå¯ä»¥å‘€ï¼Œè€æ¿è¿˜è·Ÿæˆ‘è¯´å…¬å¸å¯ä»¥ç»™æˆ‘ä¸€äº›æä¾›æ–¹ä¾¿ï¼Œå¦‚æœå®Œæˆäº†ä»»åŠ¡ï¼Œå¯ä»¥ä¸ç”¨å¤ªå¤šçš„åŠ ç­ï¼Œå¯ä»¥è€ƒè™‘åœ¨å…¬å¸ä¸å¿™çš„æ—¶å€™æˆ–è€…æ˜¯ä¼‘æ¯çš„æ—¶å€™æˆ‘å¯ä»¥è‡ªå·±å­¦ä¹ ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹å¯ä»¥è€ƒè™‘ç»™æˆ‘åˆ†é…ç®€å•ä¸€äº›çš„ä»»åŠ¡ï¼Œæ€»æ˜¯å°±æ˜¯ç»™æˆ‘åˆ›é€ ä¸€ä¸ªç›¸å¯¹å¥½ä¸€ç‚¹çš„ç¯å¢ƒå»å­¦ä¹ ï¼Œé‚£æ®µæ—¶é—´æ—©ä¸Šäº”ç‚¹æˆ‘å»å…¬å¸ï¼Œå­¦ä¹ åˆ°ä¹ç‚¹åŠå…¬å¸ä¸Šç­ï¼Œä¸è¿‡ç™½å¤©å’Œæ™šä¸Šè¿˜æ˜¯æ²¡æœ‰å¤ªå¤šçš„æ—¶é—´å»å­¦ä¹ ï¼Œè¿™æ ·å­è¿‡äº†ä¸¤ä¸ªæœˆå§ï¼Œè§‰å¾—å¤ªç´¯äº†ï¼Œå¹¶ä¸”å°±åƒå¾®ç§¯åˆ†é‚£ç§ä¸œè¥¿ï¼Œè¿™ä¹ˆå­¦çœŸçš„æœ‰ç‚¹éš¾ï¼Œå¤ªç—›è‹¦äº†ï¼Œæœ€åè¿˜æ˜¯è·Ÿè€æ¿è¯´äº† Sorryï¼Œæˆ‘è¿˜æ˜¯å†³å®šå»ç–¯ç‹‚ä¸€ä¸‹ï¼Œå†³å®šå·¥ä½œä¸‰å¹´åè¾èŒè€ƒç ”ã€‚ç»è¿‡ä¸€ä¸ªæœˆçš„å·¥ä½œäº¤æ¥ï¼Œå¤§çº¦åœ¨å…«æœˆä¸‹æ—¬çš„æ—¶å€™ä»å…¬å¸ç¦»èŒï¼Œçº¯ç²¹çš„ç©äº†ä¸¤å¤©ï¼Œç„¶åå¼€å§‹æ­£å¼å»å¤ä¹ è€ƒç ”ã€‚\r\n\r\nè¿™ä¸ªè¿‡ç¨‹ä¸­æ„Ÿè°¢é‚£äº›å¸®åŠ©è¿‡æˆ‘çš„äººï¼Œæ„Ÿè°¢æˆ‘çš„è€æ¿ï¼Œè°¢è°¢å•¦ï¼\r\n\r\n### è€ƒç ”å¤ä¹ é˜¶æ®µ\r\n\r\nè¿™ä¸€æ®µæ—¶é—´æ˜¯æœ‰ä¸€äº›ç—›è‹¦çš„ï¼Œå¾®ç§¯åˆ†ã€çº¿æ€§ä»£æ•°ã€æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€æ•°æ®ç»“æ„ã€è®¡ç®—æœºç»„æˆåŸç†ã€æ”¿æ²»ï¼Œè¿˜æœ‰é‚£è®©æˆ‘æ— è®ºå¦‚ä½•éƒ½æ”¾å¿ƒä¸ä¸‹çš„è‹±è¯­ï¼ŒçœŸçš„æ˜¯æƒ³æ­»ï¼Œæƒ³ç€éƒ½è„‘å£³ç–¼ã€‚å¯æ˜¯æ²¡æœ‰é€€è·¯å‘€ï¼Œå†³å®šè¦è¿™ä¹ˆå¹²é‚£å°±åªèƒ½ç»§ç»­å¹²äº†ï¼Œåœ¨ GitHub ä¸Šå’Œ Google äº‘ç«¯ç¡¬ç›˜ä¸Šç¨å¾®åšä¸ªè®¡åˆ’å§ã€‚\r\n\r\nGoogle äº‘ç«¯ç¡¬ç›˜é¦–å…ˆæ˜¯ä¸€ä¸ªæ•´ä½“çš„çœ‹æ¿ï¼Œè¿˜æœ‰å¤šä¹…è¦è€ƒè¯•äº†ï¼Œä¸­é—´æœ‰å‡ ä¸ªé‡è¦çš„æ—¶é—´èŠ‚ç‚¹ï¼Œç”¨å…¬å¼çš„æ–¹å¼å†™å¥½ï¼Œæ¯å¤©çœ‹ä¸€çœ¼å°±çŸ¥é“è¿˜æœ‰å¤šä¹…è€ƒè¯•ï¼Œæ¯ä¸ªç§‘ç›®å¤ä¹ ç”¨äº†å¤šé•¿æ—¶é—´ï¼Œè¿™ä»æ•´ä½“ä¸Šæœ‰äº†ä¸€ä¸ªæ¦‚å¿µï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚\r\n\r\n<img width=\"1376\" alt=\"Google äº‘ç«¯ç¡¬ç›˜\" src=\"https://user-images.githubusercontent.com/7275046/82733520-ea284280-9d46-11ea-8928-db6d9ab4d721.png\">\r\n\r\nç„¶åæ¯å¤©å»é™„è¿‘çš„ä¸€ä¸ªå¤§å­¦æ•™å®¤å»è‡ªä¹ ï¼Œè¿™ä¸ªå­¦æ ¡æœ‰ä¸ªç‰¹ç‚¹æ˜¯ä¸Šåˆçš„è¯¾è¶…çº§å¤šï¼Œä¸‹åˆæ²¡ä»€ä¹ˆè¯¾ï¼Œå› æ­¤æˆ‘ä¸Šåˆå»çš„æ¯”è¾ƒæ™šï¼Œæ™šä¸Šåˆ°åä¸€ç‚¹ï¼Œè¯´å®è¯ï¼Œæ²¡æœ‰è§‰å¾—å¾ˆç´¯ï¼Œç®—æ˜¯ä¸€ä¸ªç¨å¾®ç´§ç»·ä½†æ˜¯æ²¡æœ‰ç”¨åŠ›è¿‡åº¦çš„ä¸€ä¸ªçŠ¶æ€å§ã€‚\r\n\r\nå½“ç„¶ï¼Œåœ¨å¯¹æ¯ä¸€ç§‘ç›®çš„å¤ä¹ é‡‡ç”¨çš„æ–¹å¼ä¹Ÿä¸æ˜¯å¾ˆç›¸åŒï¼Œä½†æ˜¯è¿˜æ˜¯è¦æœ‰ä¸€ä¸ªç®¡ç†çš„ï¼Œé‡‡ç”¨çš„è¿˜æ˜¯ Google äº‘ç«¯ç¡¬ç›˜çš„æ–¹å¼ï¼Œå¤§è‡´å¦‚ä¸‹ï¼Œè®°å½•äº†æ¯å¤©å¹²äº†ç‚¹ä»€ä¹ˆï¼Œæˆ–è€…æ˜¯æ²¡æœ‰è¿›è¡Œå­¦ä¹ ï¼Œæˆ–è€…æ˜¯é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰ä»€ä¹ˆæƒ³æ³•å’Œè¦åšä»€ä¹ˆè°ƒæ•´çš„ã€‚å·¦ä¾§çš„æ—¶é—´çº¢è‰²ä»£è¡¨è¿™ä¸€å¤©å·²ç»è¿‡å»äº†ï¼Œç»¿è‰²ä»£è¡¨è¿˜æ²¡æœ‰è¿‡å»ï¼Œå³ä¾§çš„çº¢è‰²æ˜¯å­¦ä¹ äº†ä¸€äº›ä¸œè¥¿ï¼Œç­‰ç­‰å§ã€‚\r\n\r\n<img width=\"817\" alt=\"Google äº‘ç«¯ç¡¬ç›˜\" src=\"https://user-images.githubusercontent.com/7275046/82733498-d250be80-9d46-11ea-8b3c-d58801d9140d.png\">\r\n\r\nGitHub ä¸Šä¸»è¦æ˜¯ç”¨äº†é¡¹ç›®çš„ç®¡ç†æ–¹å¼ï¼Œè¿˜æœ‰ä¸€äº›æ£€æŸ¥ç‚¹çš„å…·ä½“å†…å®¹ä¹Ÿè®°å½•åœ¨äº†è¿™é‡Œã€‚\r\n\r\n<img width=\"1437\" alt=\"GitHub\" src=\"https://user-images.githubusercontent.com/7275046/82733565-31aece80-9d47-11ea-9991-6eba967d2b76.png\">\r\n\r\nä¸­é—´æœ‰é‚£ä¹ˆä¸€ä¸¤å¤©å¿ƒçƒ¦æ„ä¹±å®Œå…¨ä¸æƒ³å­¦ä¹ ï¼Œä½†æ•´ä½“æ¥è¯´è¿˜å¯ä»¥å§ï¼Œç®—æ˜¯æ­£å¸¸å§ã€‚è¿™é‡Œå°¤å…¶è¦è¯´çš„æ˜¯ä»–ä»¬å­¦æ ¡çš„é£Ÿå ‚ï¼ŒçœŸçš„è¿˜æŒºå¥½åƒçš„ï¼Œæ ¡å¤–è¿˜æœ‰ä¸€ä¸ªé¢é¦†ï¼ŒçœŸçš„æ˜¯ç™¾åƒä¸åŒï¼Œè¿˜éƒ½æŒºä¾¿å®œçš„ï¼Œè¿™ç®—æ˜¯è§£å†³äº†ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå¦‚æœæˆ‘åœ¨å®¶é‡Œå¤ä¹ æ¯å¤©ç‚¹å¤–å–é‚£ä¼°è®¡å°±å®Œå…¨ä¸åŒäº†ã€‚æˆ‘ç‰¹åˆ«æƒ³åæ§½çš„æ˜¯ä»–ä»¬å­¦æ ¡çš„æ“åœºï¼Œä¸´è¿‘è€ƒè¯•å‰çš„ä¸€æ®µæ—¶é—´ï¼Œæ¯å¤©æ™šé¥­å‰æˆ‘éƒ½ä¼šå»æ“åœºèµ°ä¸¤åœˆï¼Œå’Œæœ‹å‹èŠèŠå¤©ä»€ä¹ˆçš„ï¼Œä½†æ˜¯è¿™ä¸ªæ“åœºçš„å…¥å£å¤§é—¨æˆ‘å±…ç„¶æ‰¾äº†ä¸‰å¤©ï¼æ²¡é”™ï¼Œå°±æ˜¯æ‰¾è¿›å»çš„å¤§é—¨ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯è°è®¾è®¡çš„ï¼Œéœ€è¦åœ¨ä¸€ä¸ªæ‹è§’å¤„è¿˜è¦è½¬ä¸¤ä¸ªå¼¯ï¼Œæ“åœºæœ‰å›´æ æˆ‘å°±ä¸è¯´ä»€ä¹ˆäº†ï¼Œè¿™å±…ç„¶è¿˜è¦æŠŠé—¨è—èµ·æ¥ï¼Œä¹Ÿæ˜¯äººæ‰å‘€ï¼æ”¾ä¸€å¼ æˆ‘æ‹çš„å…¶ä¸­æœ€å–œæ¬¢çš„ç…§ç‰‡ï¼Œçºªå¿µä¸€ä¸‹ã€‚\r\n\r\n![æ“åœº](https://user-images.githubusercontent.com/7275046/82733754-ae8e7800-9d48-11ea-818c-d425ea752933.jpeg)\r\n\r\nè¿˜æœ‰æ¯”è¾ƒéš¾å¿˜çš„æ˜¯æ¯å¤©å»å­¦æ ¡æˆ‘è¦éª‘è‡ªè¡Œè½¦ï¼Œå¤§çº¦äºŒååˆ†é’Ÿçš„è·¯ç¨‹å§ï¼Œæœ‰ä¸‹é›¨çš„æ—¶å€™ï¼Œæœ‰ä¸‹å¤§é›ªçš„æ—¶å€™ï¼Œæœ‰ä¸‹é›¨çš„æ—¶å€™ï¼Œè¿˜æœ‰é‚£ç§æœ€å¯æ€•çš„ç‹‚é£ï¼ŒåäºŒæœˆä»½æœ‰æ—¶è¿˜å·¨å†·ï¼ŒçœŸçš„æ˜¯å†å†åœ¨ç›®å‘€ï¼Œä¸çŸ¥é“å½“æ—¶æ€ä¹ˆæƒ³çš„ï¼Œæ˜æ˜å¯ä»¥æ‰“è½¦ï¼Œå±…ç„¶éè¦è·Ÿè‡ªå·±ä½œå¯¹ï¼Œåªèƒ½è¯´ä¸€å¥å½“æ—¶çœŸçš„æ˜¯å¹´å°‘è½»ç‹‚å‘€ï¼è¿™é‡Œå±…ç„¶æ²¡æœ‰ç…§ç‰‡ï¼ŒçœŸçš„æ˜¯ç¼ºå°‘çµé­‚äº†å‘€ã€‚\r\n\r\nè¿˜æœ‰ä¸€ç‚¹è¦è¯´çš„æ˜¯ä»–ä»¬æ•™å­¦æ¥¼ä¸‹çš„ç©ºæ•™å®¤æŸ¥è¯¢ç³»ç»ŸçœŸçš„æ˜¯æŒºå¥½ç”¨çš„ï¼Œæˆ‘æœ¬ç§‘çš„æ—¶å€™å­¦æ ¡çš„é‚£ä¸ªç³»ç»Ÿæˆ‘æ²¡æ€ä¹ˆç”¨è¿‡ï¼Œæ²¡æƒ³åˆ°åœ¨å…¶ä»–çš„å­¦æ ¡ç”¨ä¸Šäº†ï¼Œæœ‰ç‚¹æ„æ€å‘€ï¼\r\n\r\nå°±è¿™æ ·æ¯å¤©ä¸¤ç‚¹ä¸€çº¿çš„è¿‡äº†ä¸åˆ°å››ä¸ªæœˆå§ï¼Œå¹³å¹³æ·¡æ·¡ï¼Œæ²¡æœ‰é‡åˆ°ä»€ä¹ˆå¤§äº‹ï¼Œä½†æ˜¯å¿ƒæ€çœŸçš„æ˜¯è·Œå®•èµ·ä¼ã€‚å¼€å§‹æ—¶çš„å¾®ç§¯åˆ†æŒºç®€å•ï¼Œåˆ°åé¢çš„ä»€ä¹ˆé¬¼ï¼Œæƒ³ç–¯ï¼Œå†åˆ°è€ƒè¯•å‰çš„æ‡µæ‡µæ‡‚æ‡‚æ¯«æ— æŠŠæ¡ï¼Œè¿˜æ˜¯æ²¡å­¦å¥½ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æƒ³æ¨èä¸€ä¸‹å¼ å®‡çš„æ•°å­¦è€ƒç ”æŒ‡å¯¼ä¹¦ï¼Œå¯¹æˆ‘å¸®åŠ©è¿˜æ˜¯æŒºå¤§çš„ã€‚è‹±è¯­ä»æœ€è€ƒè¯•çš„â€œè¿™æ˜¯ä¸ªå•¥â€ï¼Œåˆ°åæ¥çš„â€œåº”è¯¥å·®ä¸å¤šæ˜¯ä¸ªå•¥â€ï¼Œåæ­£å°±æ˜¯ä¸€ç›´æ˜¯æœ€æ‹…å¿ƒçš„ç§‘ç›®ã€‚ä¸“ä¸šè¯¾æˆ‘çŸ¥é“æˆ‘èƒ½è¿‡çº¿ï¼Œä½†æ•°å­¦å’Œè‹±è¯­å ç”¨çš„æ—¶é—´å¤ªå¤šäº†ï¼Œæ²¡æœ‰æ—¶é—´åˆ†ç»™å®ƒï¼Œè¶Šåˆ°åé¢è¶Šæ²¡ä»€ä¹ˆæŠŠæ¡ï¼Œåªèƒ½å°½é‡å¤šçœ‹ä¸€ç‚¹äº†ï¼Œä½†æ˜¯åæ¥å‡ºæˆç»©æ—¶æˆ‘æ²¡æƒ³åˆ°ä¼šä¼šæ¯”é¢„æƒ³çš„è¿˜è¦ä½äº†å¾ˆå¤šï¼Œè¿™å¯èƒ½æ˜¯æˆ‘çš„æœ€å¤±è¯¯çš„åœ°æ–¹å§ã€‚æ”¿æ²»æˆ‘å°±å°½å¯èƒ½çš„å†™ï¼Œå°½å¯èƒ½çš„èƒŒï¼Œéª‘è½¦åœ¨è·¯ä¸Šè€³æœºé‡Œæ”¾ç€æ¯ç« çš„çŸ¥è¯†ç‚¹çš„éŸ³é¢‘ï¼ŒçœŸçš„è¿˜æ˜¯æŒºæœ‰ç”¨çš„ï¼Œæœ€åæ”¿æ²»çš„æˆç»©æ¯”æˆ‘é¢„æœŸçš„è¿˜è¦è¦é‚£ä¹ˆä¸€ç‚¹ç‚¹ï¼Œè¿™ä¸€ç‚¹è¿˜æ˜¯æŒºå¼€å¿ƒçš„ã€‚\r\n\r\nå¯¹äºè¿™ç§å¤è¯•çš„è¿‡ç¨‹ï¼ŒçœŸçš„æ˜¯ä½“ä¼šè¿‡äº†å…¶ä¸­çš„é…¸ç”œè‹¦è¾£çœŸæ˜¯ä¸€è¨€éš¾å°½ï¼Œåªèƒ½è¯´ä¸€å¥ï¼šä½ ä¸æ˜¯æˆ‘ï¼Œæ€çŸ¥æˆ‘èµ°è¿‡çš„è·¯ï¼Œçœ‹è¿‡çš„é£æ™¯ï¼Œæ€çŸ¥æˆ‘å¿ƒä¸­çš„ä¹ä¸è‹¦â€¦â€¦\r\n\r\n### è€ƒç ”åˆè¯•\r\n\r\nå¯¹äºè¿™ä¸ªé—®é¢˜æˆ‘å€’æ˜¯å¼‚å¸¸çš„å¹³é™ï¼Œæˆ‘ä¸æ˜¯åº”å±Šç”Ÿï¼Œå› æ­¤ä¸èƒ½ä½åœ¨å®¿èˆé‡Œï¼Œå›åˆ°è€å®¶å»æŠ¥åè€ƒè¯•ï¼Œåœ¨è€ƒåœºå‘¨å›´å®šäº†ä¸€ä¸ªé…’åº—ï¼Œæå‰ä¸€å¤©åˆ°é…’åº—ï¼Œå»è€ƒåœºè¸©äº†ä¸€ä¸‹ç‚¹ã€‚è€ƒè¯•é‚£ä¸¤å¤©ï¼Œå€™è€ƒï¼Œå®‰æ£€ï¼Œè€ƒè¯•ï¼Œå¼‚å¸¸çš„å¹³é™ï¼ŒçœŸçš„æ²¡æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Œé‚£ä¸¤å¤©è¿‡çš„çœŸçš„æŒºå¿«çš„ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªå°å»ºè®®ï¼Œä¸€æ˜¯å¦‚æœä¸­åˆä¸æ–¹ä¾¿å›é…’åº—ï¼Œå¯ä»¥åˆ°é’Ÿç‚¹æˆ¿ä¼‘æ¯ä¸€ä¸‹ï¼ŒäºŒæ˜¯æ”¾è½»æ¾ï¼Œæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚\r\n\r\næœ€åä¸€åœºè€ƒè¯•åï¼Œæ˜¯çˆ¸çˆ¸å¦ˆå¦ˆå¼€è½¦å»æ¥æˆ‘çš„ï¼Œå¸¦ç€é¦™è•‰ï¼Œæˆ‘åœ¨è½¦ä¸Šåƒäº†ä¸¤æ ¹ï¼Œé‚£ä¸€å¤©ä¹Ÿä¸‹é›ªäº†ï¼ŒæŒºå°çš„ï¼Œè·¯ä¸Šå µè½¦ç¨å¾®å µäº†ä¸€ä¼šï¼ŒæŒºå¹³é™çš„ã€‚\r\n\r\n### ç»“æŸåˆè¯•\r\n\r\nç»“æŸåˆè¯•åçš„é‚£ä¸€æ®µæ—¶é—´ï¼Œå¦ˆå¦ˆè¿˜è¦ä¸Šç­ï¼Œæˆ‘åˆå›åˆ°äº†åŒ—äº¬çš„å‡ºç§Ÿå±‹å†…ï¼Œç©äº†å‡ å¤©æ¸¸æˆï¼Œç¡äº†å‡ å¤©è§‰ï¼Œæµ‘æµ‘å™©å™©è¿‡äº†å‡ å¤©ï¼Œç°åœ¨æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å°è±¡äº†ï¼Œå¥½åƒå°±æ˜¯ä¸€ç¬é—´å°±è¿‡å»äº†ã€‚\r\n\r\nå†åæ¥è¿‡å¹´äº†ï¼Œåœ¨å®¶é‡Œå’Œå¦ˆå¦ˆå‘†äº†ä¸€ä¸ªå¯’å‡ï¼Œçªå¦‚å…¶æ¥çš„æ–°å† ç–«æƒ…æ‰“ä¹±äº†ä¹‹åæ‰€æœ‰çš„è®¡åˆ’ã€‚æˆ‘æœ¬æ¥è®¡åˆ’ä¼‘æ¯å‡ å¤©ç„¶åå‡†å¤‡è€ƒç ”å¤è¯•ï¼Œç»“æœç”±äºç–«æƒ…çš„å½±å“ï¼Œåˆè¯•æˆç»©å…¬å¸ƒå»¶è¿Ÿï¼Œå¤è¯•å»¶è¿Ÿï¼Œæ•´æ•´æ¨è¾äº†å…­åå¤©ï¼Œä¸¤ä¸ªæœˆï¼Œè¿™çœŸçš„æ˜¯æ²¡æƒ³åˆ°å‘€æ²¡æƒ³åˆ°ï¼\r\n\r\næ­¦æ±‰å°åŸï¼Œå…¨å›½é©°æ´ï¼Œå¼€å­¦å»¶æœŸï¼Œå¤å·¥å»¶æœŸï¼Œç”µå½±é™¢å…³é—­ï¼Œæ—…æ¸¸æœåŠ¡ä¸šåŸºæœ¬åœæ»ï¼ŒçœŸçš„è®©æ‰€æœ‰äººæªæ‰‹ä¸åŠï¼Œè¿™å…¶ä¸­æœ‰å¤ªå¤šå¤ªå¤šï¼Œå¯èƒ½æ°¸ç”Ÿéš¾å¿˜äº†â€¦â€¦\r\n\r\n### è€ƒç ”è°ƒå‰‚\r\n\r\nå¾ˆæƒ¨ï¼Œæˆ‘çš„ç¬¬ä¸€å¿—æ„¿åˆ†æ•°çº¿ä¸å¤Ÿï¼Œè°ƒå‰‚è®¡ç®—æœºä¸“ä¸šå„ä¸ªå­¦æ ¡ä¹Ÿéƒ½çˆ†ç‚¸ï¼ŒæŒºçƒ¦çš„ã€‚æˆ‘èŠ±äº†å‡ å¤©çš„æ—¶é—´æ”¶é›†å­¦æ ¡çš„ä¿¡æ¯ï¼Œè°ƒå‰‚ç³»ç»Ÿæˆ‘ä¸€å…±æŠ¥äº†å››ä¸ªå¿—æ„¿ï¼Œç¬¬ä¸€ä¸ªå¿—æ„¿å·®ä¸€åˆ†æ‹’ç»äº†æˆ‘ï¼Œç¬¬ä¸‰ä¸ªå¿—æ„¿æŠŠæˆ‘å½•å–äº†ï¼Œç¬¬äºŒä¸ªå¿—æ„¿æœ¬æ¥æ˜¯æˆ‘æœ€æƒ³å»çš„ï¼Œä½†æ˜¯å¤è¯•çš„æ—¶é—´åœ¨ç¬¬ä¸‰å¿—æ„¿ä¹‹åï¼Œæˆ‘ç¡®è®¤äº†ç¬¬ä¸‰å¿—æ„¿çš„å¾…å½•å–åç¬¬äºŒå¿—æ„¿çš„å¤è¯•æˆ‘æ‹’ç»äº†ï¼Œç¬¬å››å¿—æ„¿å› ä¸ºå¤è¯•æ—¶é—´å’Œç¬¬ä¸‰å¿—æ„¿å†²çªæˆ‘æ”¾å¼ƒäº†ï¼Œè¿™ä¹ˆè¯´æ¥å…¶å®æˆ‘å¿—æ„¿é€‰æ‹©å…¶å®è¿˜æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿä¸æ‰æˆ‘èŠ±äº†å››å¤©çš„æ—¶é—´å»æ”¶é›†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­¦æ ¡ä¸“ä¸šã€æ’åã€æ–¹å‘ã€å¾€å¹´å½•å–åˆ†æ•°çº¿ã€ç»Ÿæ‹›äººæ•°ã€è°ƒå‰‚åé¢ã€å¤è¯•ç§‘ç›®ç­‰ç­‰ï¼Œæˆ‘è¿˜æ˜¯ç”¨è¡¨æ ¼ç»Ÿè®¡å‡ºäº†å¤§çº¦åä¸ªå­¦æ ¡ï¼Œä»åæœŸæŠ¥åæ•ˆæœçœ‹è¿˜æ˜¯æŒºå¥½çš„ã€‚\r\n\r\nè¿™é‡Œéœ€è¦è¯´ä¸€ä¸‹æˆ‘çš„å¤è¯•ï¼ŒçœŸçš„è¡¨ç°å¾—æœ‰ç‚¹å·®ï¼Œæˆ–è€…è¯´éå¸¸å·®ï¼Œè‡³å°‘æˆ‘è‡ªå·±æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼Œä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆå­¦æ ¡å°±ç»™æˆ‘è¿‡äº†ï¼Œ1:1.7 çš„å¤è¯•æ¯”ä¾‹æˆ‘è¿™æ ·çš„ä¸åº”è¯¥è¿‡æ‰å¯¹ï¼Œè¿™æ˜¯æˆ‘æƒ³ä¸é€šçš„ï¼Œè¿™ä¹Ÿä¸åº”è¯¥æ˜¯æˆ‘å»æ·±ç©¶çš„é—®é¢˜ï¼Œéƒ½ç»“æŸäº†ã€‚\r\n\r\næ¥å—ç¬¬ä¸‰å¿—æ„¿çš„æ‹Ÿå½•å–æˆ–è€…æ˜¯æ‹’ç»ç¬¬ä¸‰å¿—æ„¿ç­‰å¾…ç¬¬äºŒå¤©çš„ç¬¬äºŒå¿—æ„¿çš„å¤è¯•è¿˜è®©æˆ‘çº ç»“äº†ä¸€ä¸ªå°æ—¶ï¼Œè¿™æ˜¯ä¸ªé€‰æ‹©ï¼Œå½±å“äº†æˆ‘æœªæ¥è‡³å°‘ä¸‰å¹´çš„ç”Ÿæ´»ï¼Œæœªæ¥ä¸‰å¹´æ€ä¹ˆæ ·å®Œå…¨å°±åœ¨ä¸€ç¬é—´æ”¹å˜äº†ï¼Œæƒ³ä¸€æƒ³çœŸçš„æ˜¯æœ‰ç‚¹ç¥å¥‡çš„å‘€ï¼ŒæŒºæœ‰è¶£çš„ã€‚\r\n\r\n## åè®°\r\n\r\næ²¡æœ‰ä»€ä¹ˆï¼Œåªæƒ³å†™ä¸‹ç‚¹æ–‡å­—çºªå¿µä¸€ä¸‹æˆ‘è¿‡å»åä¸ªæœˆçš„ç”Ÿæ´»ã€‚\r\n\r\næ„¿ä¸–ç•Œå’Œå¹³ï¼\r\n"},{"number":50,"title":"æ„¿ä¸€åˆ‡å®‰å¥½ï¼","created_at":"2020-04-04 03:48:45","body":"[Hexo é™æ€åšå®¢](https://ai.renyuzhuo.cn) å®Œæ•´æ”¯æŒç‰¹æ®Šæ—¥å­é»‘ç™½æ‚¼å¿µï¼Œæ„¿ç”Ÿè€…åšå¼ºï¼Œé€è€…å®‰æ¯ï¼\r\n\r\n### æ–¹æ³• 1\r\n\r\né™æ€æ–¹æ³•ï¼Œç›´æ¥åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­æ·»åŠ  CSS æ ·å¼ï¼š\r\n\r\n```css\r\n<style>\r\nhtml {\r\n  FILTER: gray;\r\n  -webkit-filter: grayscale(100%);\r\n}\r\n</style>\r\n```\r\n\r\n### æ–¹æ³• 2\r\n\r\nåŠ¨æ€æ–¹æ³•ï¼Œå¯åœ¨ _config.yml ä¸­è¿›è¡Œé…ç½®å¤šä¸ªæ—¥æœŸï¼š\r\n\r\n```yml\r\ngrieve:\r\n  - '5-12'\r\n  - '9-18'\r\n  - '2020-4-4'\r\n```\r\n\r\né¡µé¢æ¨¡æ¿å¦‚ footer.ejs ä¸­ï¼š\r\n\r\n```javascript\r\n<script type=\"text/javascript\" src=\"/js/grieve.js\"></script>\r\n<% if (config.grieve) { %>\r\n    <script>\r\n        grieveIfNeed('<%= config.grieve %>')\r\n    </script>\r\n<% } %>\r\n```\r\n\r\nåˆ›å»º JS æ–‡ä»¶ grieve.js æ”¾åˆ° js æ–‡ä»¶å¤¹ä¸‹ï¼š\r\n\r\n```javascript\r\ngrieveIfNeed = function (dateList) { \r\n    var date = new Date();\r\n    var year = date.getFullYear();\r\n    var month = date.getMonth() + 1;\r\n    var day = date.getDate();\r\n    var dateArray = dateList.split(',')\r\n    \r\n    for(i = 0; i < dateArray.length; i++){\r\n        if(year + '-' + month +'-' + day === dateArray[i] || month +'-' + day === dateArray[i]){\r\n            var style = document.createElement(\"style\");\r\n            style.type = \"text/css\";\r\n            try{\r\n            ã€€ã€€style.appendChild(document.createTextNode(\"html{FILTER:gray;-webkit-filter:grayscale(100%);}\"));\r\n            }catch(ex){\r\n            ã€€ã€€style.styleSheet.cssText = \"html{FILTER:gray;-webkit-filter:grayscale(100%);}\";\r\n            }\r\n            var head = document.getElementsByTagName(\"head\")[0];\r\n            head.appendChild(style);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### æœ€å\r\n\r\nå›¢ç»“è®©æˆ‘ä»¬çš„æ°‘æ—å»¶ç»µä¸æ¯ï¼Œç¼…æ€€è®©æˆ‘ä»¬çš„è‹±é›„æ°¸å‚ä¸æœ½ï¼\r\n"},{"number":45,"title":"2019 å°±è¦ç»“æŸäº†","created_at":"2019-12-23 05:58:37","body":"## å‰è¨€\r\n\r\nåˆå¥½ä¹…æ²¡æœ‰å†™ç‚¹ä»€ä¹ˆä¸œè¥¿äº†ï¼Œå’Œæˆ‘äº²è¿‘çš„äººçŸ¥é“ï¼Œè¿™æ˜¯å› ä¸ºå‰ä¸€æ®µæˆ‘çªç„¶å†³å®šå»è€ƒç ”äº†ï¼Œå·¥ä½œä¸‰å¹´äº†ï¼Œçªç„¶å†³å®šå°è¯•ä¸€ä¸‹å†³å®šå›å­¦æ ¡è¯»ä¹¦ï¼Œè¿™æ˜¯ä¸€ä¸ªå†’é™©ï¼Œè¿˜æ˜¯ä¸€ä¸ªæŒºå¤§çš„å†’é™©ã€‚è€ƒç ”éœ€è¦å‡†å¤‡ï¼Œè¦è€ƒçš„å†…å®¹æœ‰éš¾åº¦ï¼Œä¸å®¹æ˜“ï¼Œå‡†å¤‡äº†è¿˜ä¸ç¡®å®šæ˜¯å¦èƒ½è€ƒä¸Šï¼Œå¦‚æœè€ƒä¸ä¸Šï¼Œé‚£è¿™ä¸ªä»£ä»·å°±å¤ªå¤§äº†ï¼Œæ—¢ä¸­æ–­äº†å·¥ä½œï¼Œåˆæ²¡æœ‰å­¦æ ¡å¯ä»¥å»å­¦ä¹ ï¼Œä¸€åˆ‡åˆä»å¤´å†æ¥ï¼Œæ˜¯åœºèµŒåšï¼Œç®—ä¸ä¸Šå¤šè±ªï¼Œä½†æ˜¯èµŒæœ¬ä¹Ÿç®—æ˜¯ä¸å°ã€‚\r\n\r\nä»Šå¤©æ˜¯åˆè¯•ç»“æŸçš„ç¬¬ä¸€å¤©ï¼Œè¿˜ä¸çŸ¥é“æˆç»©ä¼šæ€ä¹ˆæ ·ï¼Œé‚£æ˜¯ä¸€ä¸ªæœˆä¹‹åéœ€è¦å…³å¿ƒçš„äº‹æƒ…ï¼Œåˆ°æ—¶å€™è‡ªç„¶ä¼šæœ‰ç»“è®ºï¼Œè°¨ä»¥æ­¤æ–‡ï¼Œæ€»ç»“ä¸€ä¸‹æˆ‘çš„ 2019ã€‚\r\n\r\n## æˆ‘çš„ 2019\r\n\r\nè¿‘äº›å¹´ï¼Œæ¯ä¸€å¹´éƒ½ä¼šå†™ç‚¹ä¸œè¥¿ï¼Œæˆ–é•¿æˆ–çŸ­ï¼Œæˆ–æœ‰è¶£æˆ–æ— èŠï¼Œæˆ–æŠ‘éƒæˆ–æ¬¢å¿«ï¼Œåæ­£éƒ½ä¼šå†™ç‚¹ä»€ä¹ˆï¼Œæ–‡ç¬”ä¸ç®—å¥½ï¼Œä½†æ˜¯éƒ½å‘å¸ƒåœ¨äº†å½“æ—¶åœ¨ç”¨çš„ä¸åŒçš„å¹³å°ä¸Šï¼Œä»Šå¹´å°±å†™åœ¨è¿™é‡Œå§ã€‚\r\n\r\nä»Šå¹´æ˜¯æˆ‘å·¥ä½œçš„ç¬¬ä¸‰å¹´ï¼Œå·¥ä½œç®—æ˜¯æŒ‰éƒ¨å°±ç­ï¼Œæ¯å¤©æƒ³çš„ä¹Ÿæ˜¯æ€ä¹ˆå»å†™ç‚¹ä»£ç ï¼Œå¶å°”æƒ³ä¸€æƒ³å¬èµ·æ¥å¾ˆé«˜ç«¯çš„â€œæ¶æ„â€æˆ–â€œè®¾è®¡â€ï¼Œæ— æ³¢æ— æ¾œï¼Œå¹³å¹³æ·¡æ·¡ï¼Œæ˜¥å¤©å°±æ˜¯è¿™æ ·è¿‡å»äº†ã€‚ä»Šå¹´çš„å¤å¤©æ ¼å¤–çš„çƒ­ï¼Œæ°”æ¸©å¼‚å¸¸çš„é«˜ï¼Œå¯èƒ½æ˜¯é”™è§‰ï¼Œä½†æ˜¯å°è±¡ä¸­å°±æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æƒ³èµ·æ¥äº†ä»€ä¹ˆï¼Œè®°ä¸æ¸…äº†ï¼Œåæ­£å°±è·Ÿè€æ¿è¯´æˆ‘æƒ³ç¦»èŒï¼Œæˆ‘ç»™çš„ç†ç”±æ˜¯æˆ‘æƒ³å»åš AIâ€”â€”äººå·¥æ™ºèƒ½ï¼Œè€æ¿æŒ½ç•™äº†ä¸€ä¸‹ï¼Œæˆ‘ç›¸ä¿¡è€æ¿è¿˜æ˜¯è›®å–œæ¬¢æˆ‘çš„ï¼Œç•™æˆ‘ä¹Ÿæ˜¯çœŸå¿ƒçš„ï¼Œæˆ‘ä¸æ€€ç–‘è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯å¯¹ä¸èµ·äº†ï¼Œæˆ‘è¿˜æ˜¯æƒ³èµ°ï¼Œåæ¥å‘ç”Ÿäº†ä¸€ç‚¹é¢„æœŸå¤–çš„äº‹æƒ…ï¼Œå¾ˆæ„Ÿè°¢æˆ‘çš„è€æ¿ï¼Œåœ¨ä¸ƒæœˆåä¹å·æˆ‘æ‰ç»“æŸäº†æœ€åä¸€å¤©çš„å·¥ä½œï¼Œæ™šä¸Šå’ŒåŒç»„çš„åŒäº‹åƒäº†ä¸ªé¥­ï¼Œæˆ‘çš„å¿ƒé™è‹¥æ­¢æ°´ï¼Œæˆ‘å°±è¿™æ ·ç¦»èŒã€‚ç¦»èŒåå’ŒæŸäººç©äº†ä¸€å¤©ï¼Œä¼‘æ¯äº†ä¸€å¤©ï¼Œå°±å¼€å§‹æˆ‘çš„è€ƒç ”å¤‡è€ƒé˜¶æ®µï¼ŒæŒºéº»çƒ¦æŒºç´¯çš„ï¼Œé‚£ä¸€æ®µçš„ç”Ÿæ´»ä¸ç®—æƒ¬æ„ï¼Œä½†çƒ¦å¿ƒçš„ä¹Ÿåªæœ‰å°†è¦è€ƒè¯•çš„ç§‘ç›®ï¼Œå¿ƒæƒ…è¿˜æ˜¯æŒºè½»æ¾çš„ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå‚åŠ äº†ä¸€ä¸ªå¥½å‹çš„å©šç¤¼ï¼Œå’Œå®¤å‹å»åƒäº†ä¸€é¡¿é¥­ï¼Œå¶å°”çœ‹çœ‹è§†é¢‘ï¼Œæ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„å¨±ä¹æ´»åŠ¨äº†ï¼Œè¢«æ¨è¿Ÿæˆ–è€…å–æ¶ˆçš„æ´»åŠ¨å€’æ˜¯ä¸å°‘ï¼Œå’Œå¥½å‡ ä¸ªäººçº¦é¥­éƒ½æ˜¯è€ƒå®Œè¯•å†è¯´ï¼Œå° boos è®©æˆ‘å½“ä¼´éƒå´å› ä¸ºè€ƒç ”ç›¸å…³çš„ä¸€ç‚¹äº‹æƒ…è¢«æˆ‘æ‹’ç»äº†ï¼Œç»å¸¸å’ŒæŸäººå‡ºå»ç©é€›è¡—çœ‹ç”µå½±ä¹Ÿéƒ½æ˜¯ä¸å­˜åœ¨çš„ï¼Œä»¥å‰ç»å¸¸å’Œå¦ˆå¦ˆæ‰“ç”µè¯ä¹Ÿéƒ½è¢«è€½æäº†ï¼Œå„ç§å„æ ·è®©ç”Ÿæ´»å˜å¾—æœ‰è¶£ä¸€ç‚¹çš„äº‹æƒ…éƒ½è¢«æˆ‘å»¶æœŸæˆ–æŠ›å¼ƒäº†ã€‚å¤‡è€ƒçš„ç”Ÿæ´»å°±æ˜¯è¿™ä¹ˆå•è°ƒè€Œä¹å‘³ã€‚ä¸ç®¡æ€æ ·ï¼Œé‚£äº›éƒ½å·²ç»è¿‡å»äº†ï¼Œæ˜¨å¤©ä¸‹åˆäº”ç‚¹ï¼Œè¿™äº›çš„ä¸€åˆ‡éƒ½ç®—æ˜¯å‘Šä¸€æ®µè½äº†ï¼ŒæŠ¬èµ·å¤´çœ‹çœ‹ï¼Œä¼¼ä¹ 2019 å¹´ä¼¼ä¹ä¹Ÿè¦è¿‡å»äº†ã€‚\r\n\r\n## èƒ½ä¸èƒ½è€ƒä¸Š\r\n\r\næˆ‘çš„å¿ƒæ€ç®—æ˜¯è€ƒç ”çš„å­¦ç”Ÿä¸­å¿ƒæ€æ¯”è¾ƒå¥½çš„ï¼Œæ²¡æœ‰è¦æ”¾å¼ƒçš„å¿µå¤´ï¼Œå¶å°”è¢«é«˜æ•°æŠ˜ç£¨ä¸€ä¸‹ï¼Œè¢«è‹±è¯­æ‰“å‡»ä¸€ä¸‹ï¼Œä¹Ÿæ²¡æœ‰è®©æˆ‘æœ‰ä»€ä¹ˆæƒ…ç»ªä¸Šå¤ªå¤§çš„æ³¢åŠ¨ï¼Œä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆæ­£å¸¸ã€‚è¯´èµ·è¿™ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ç©¶ç«Ÿæ˜¯ä»€ä¹ˆåŸå› ï¼Œè‡ªä»é«˜è€ƒä»¥åï¼Œå°±å¾ˆå°‘æœ‰ä»€ä¹ˆèƒ½è®©æˆ‘ç´§å¼ æ…Œå¼ æˆ–ä¸å®‰äº†ï¼Œå­˜åœ¨å³åˆç†ï¼Œä»»ä½•äº‹æƒ…æˆ‘ä¼¼ä¹éƒ½è§‰å¾—æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„äº†ã€‚\r\n\r\nè‡³äºèƒ½ä¸èƒ½è€ƒä¸Šï¼Œæˆ‘ä¸çŸ¥é“ï¼Œæˆ‘çŸ¥é“çš„æ˜¯è‹±è¯­å’Œæ•°å­¦æˆ‘è€ƒçš„ä¸å¥½ï¼Œè‹±è¯­ä¸å¥½åœ¨é¢„æ–™ä¹‹ä¸­ï¼Œè®¤ä¸ºæ•°å­¦è€ƒçš„ä¸å¥½çš„åŸå› æ˜¯æœ‰å‡ ä¸ªæœ¬åº”è¯¥åšå‡ºæ¥çš„é¢˜æ²¡æœ‰åšå‡ºæ¥ï¼Œè¿™æ‰æ˜¯æœ€è®©äººè§‰å¾—æ— å¥ˆçš„ã€‚è¿™æ¬¡è€ƒè¯•æˆ‘ä¸è§‰å¾—è‹±è¯­å’Œæ”¿æ²»æœ‰é‚£ä¹ˆéš¾ï¼Œå¾®åšä¸Šè¯´çš„ä¸å¯ä¿¡ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰è€ƒå¥½ï¼Œæˆ–è€…è¯´æ²¡æœ‰è¾¾åˆ°é¢„æœŸä¹Ÿæ˜¯äº‹å®ï¼Œç•¥è§‰æ— å¥ˆï¼Œç­‰ç€çœ‹ç»“æœå§ã€‚\r\n\r\n## ç»“æŸè¯­\r\n\r\næˆ‘çš„ 2019 å°±è¿™æ ·äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªæœˆå°±è¦è¿‡å¹´äº†ï¼Œä»Šå¹´æœ€å¤§çš„æ”¶è·å°±æ˜¯åœ¨å®¶é‡Œçš„æ—¶é—´æ¯”å‰å‡ å¹´é•¿äº†å¥½å¤šï¼Œè‡ªä»ä¸Šäº†å¤§å­¦ï¼Œæˆ‘ä¼¼ä¹åœ¨å®¶é‡Œéƒ½æ²¡å¾…è¿‡è¿™ä¹ˆé•¿çš„æ—¶é—´ï¼Œå¾ˆæ˜¯å†…ç–šï¼Œä»Šå¹´é™ªçˆ¸çˆ¸å¦ˆå¦ˆçš„æ—¶é—´å¤šäº†ä¸€äº›ï¼Œä»–ä»¬çœ‹åˆ°æˆ‘è¿˜æ˜¯æŒºå¼€å¿ƒçš„ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»Šå¹´æœ€å¤§çš„æ”¶è·äº†å§ã€‚\r\n\r\nå¯¹äº 2020 å¹´ï¼Œæˆ‘æ²¡ä»€ä¹ˆæƒ³è¯´çš„ï¼Œè®¡åˆ’è¯´å‡ºæ¥å°±ä¸çµäº†ï¼å¸Œæœ›ä¸€åˆ‡éƒ½å¥½ï¼"},{"number":39,"title":"Mac ç³»ç»Ÿåˆä¸Šæ‰‹","created_at":"2018-11-22 12:05:49","body":"# å‰è¨€\r\n\r\næ¢äº†ä¸€ä¸ª Mac ç”µè„‘ï¼Œéœ€è¦é…ä¸€å †å¼€å‘ç¯å¢ƒï¼Œæƒ³ç€éƒ½çƒ¦ï¼Œä½†ä¹Ÿæ°å¥½å°±è¶ç€è¿™ä¸ªæœºä¼šï¼Œæ•´ç†ä¸€ä¸‹ Mac ä¸Šçš„å¸¸ç”¨è½¯ä»¶ï¼Œå°¤å…¶å¯¹äºåˆä¸Šæ‰‹çš„ã€ä½¿ç”¨ Mac ä½œä¸ºå¼€å‘ç¯å¢ƒçš„å¼€å‘è€…ï¼Œäº¤æµåˆ†äº«ä¸€ä¸‹ï¼Œå¦‚æ­¤ç”šå¥½ï¼\r\n\r\n# å¼€å‘å¸¸ç”¨ç¯å¢ƒ\r\n\r\nä¸ç®¡æ˜¯ä»€ä¹ˆå¼€å‘è€…ï¼Œæœ‰äº›ç¯å¢ƒæˆ–è½¯ä»¶éƒ½æ˜¯é€šç”¨çš„ï¼Œå¦‚ä¸‹ï¼š\r\n\r\n### Chrome\r\n\r\n[ä¸»é¡µåœ°å€](https://www.google.com/chrome/)ï¼ŒSafari å’Œ IE ä¸€æ ·ï¼Œæœ€å¤§çš„ä½œç”¨æ˜¯ä¸‹è½½ Chromeï¼ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œä¸è¿‡ä½ æ˜¯å¦å–œæ¬¢ï¼Œéƒ½ä¸å¾—ä¸æ‰¿è®¤ï¼ŒChrome æ˜¯æœ€å¥½ç”¨çš„çš„æµè§ˆå™¨ï¼Œé‚£ä¹ˆå¤šçš„æ’ä»¶éƒ½å¯ä»¥é€šè¿‡ [Web Store](https://chrome.google.com/webstore) ä¸‹è½½ï¼ŒGoogle ä¸ä½œæ¶å’Œå…¶å¼€æºçš„ç‰¹æ€§ï¼Œéƒ½å¯ä»¥æœ€å¤§ç¨‹åº¦ä¿è¯ä½ çš„ä¸Šç½‘å®‰å…¨ã€‚ä¸è¦çŠ¹è±«ï¼Œä¸‹è½½ä¸€ä¸ª Chrome å§ï¼Œç”¨ Chrome æ‰“å¼€æœ¬ç•Œé¢ï¼Œç»§ç»­é…ç½®ä½ çš„ç”µè„‘å§ï¼\r\n\r\n### Alfred\r\n\r\n[ä¸»é¡µåœ°å€](https://www.alfredapp.com/)ï¼ŒMac ä¸Šçš„ç¥å™¨ã€‚æ¯ä¸ªå¹³å°éƒ½æœ‰ä¸€äº›å¥½ç”¨çš„è½¯ä»¶æˆ–ç¥å™¨ï¼ŒAlfred å°±æ˜¯ Mac ä¸Šçš„ç¥å™¨ä¹‹ä¸€ï¼Œ[æœ‰äººä»‹ç»è¿‡ Alfred äº†](https://www.cnblogs.com/chanshuyi/p/the_efficient_app_alfred.html)ï¼Œå¯ä»¥çœ‹ä¸€çœ‹ã€‚\r\n\r\n### JDK\r\n\r\n[ä¸»é¡µåœ°å€](https://www.oracle.com/technetwork/java/javase/downloads/index.html)ï¼Œæ— è®ºä½ å¤šä¹ˆå–œæ¬¢æˆ–é„™è§† Javaï¼Œéƒ½ä¸å¾—ä¸æ‰¿è®¤ï¼Œå¤ªå¤šçš„åº”ç”¨ã€å·¥å…·ã€æˆ–è€…æ˜¯è¿è¡Œç¯å¢ƒéƒ½éœ€è¦ç”¨åˆ° Javaï¼Œä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œä¸ºäº†æ–¹ä¾¿ä»¥åæ›´å¥½çš„ä½¿ç”¨ Macï¼Œè¿˜æ˜¯æŠŠ Java ç¯å¢ƒè£…ä¸Šå§ã€‚Java 11 å·²ç»ä¸å†å…è´¹ï¼Œä½†æ˜¯ä½œä¸ºä¸ªäººä½¿ç”¨ï¼Œé—®é¢˜ä¸å¤§ã€‚åŒæ—¶ä½œä¸ºå¼€å‘è€…ï¼Œå¦‚æœå­¦ä¹ æˆ–å·¥ä½œå†…å®¹ä¸ Java æœ‰å…³ï¼Œæˆ‘è¿˜å»ºè®®å®‰è£…å¤šä¸ª Java ç‰ˆæœ¬ï¼Œè‡³å°‘ [Java 8](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) å’Œ [æœ€æ–°çš„ Java è¿è¡Œç¯å¢ƒ](https://www.oracle.com/technetwork/java/javase/downloads/index.html)ã€‚\r\n\r\n### Git\r\n\r\n[ä¸»é¡µåœ°å€](https://git-scm.com/downloads)ï¼Œä½œä¸ºå¼€å‘è€…ï¼ŒGit æ˜¯åŸºæœ¬æŠ€èƒ½ï¼Œæ˜¯ [Linus Torvalds](https://en.wikipedia.org/wiki/Linus_Torvalds) å¼€å‘çš„ [ç‰ˆæœ¬æ§åˆ¶å·¥å…·](https://en.wikipedia.org/wiki/Git)ï¼Œå¦‚æœä½ å¯¹è¿™ä¸ªä¸äº†è§£ï¼Œå¯ä»¥å¾—å‡ºç»“è®ºï¼Œä½ è¿˜æ²¡æœ‰å…¥é—¨å¼€å‘è€…ã€‚ä»¥åäº†è§£äº† Gitï¼Œä¹Ÿè¦äº†è§£ä¸€ä¸‹ [GitHub](https://github.com/) ç½‘ç«™ï¼ŒåŒæ—¶æ¬¢è¿ä½ æˆä¸ºä¸€ä¸ªå¼€å‘è€…ï¼\r\n\r\n### Python\r\n\r\n[ä¸»é¡µåœ°å€](https://www.python.org/downloads/)ï¼ŒPython å·²ç»å˜æˆäº†ç¨‹åºçŒ¿çš„å·¥å…·ï¼Œæ— è®ºä½ æ˜¯å¦æ˜¯ Python å¼€å‘è€…ï¼Œå¹³æ—¶éƒ½å…ä¸äº†å†™ä¸€äº›è„šæœ¬ï¼Œé¿å…é‚£äº›é‡å¤çš„å·¥ä½œä¸åŠ³åŠ¨ï¼ŒPython å¹¶ä¸ä¸€å®šé€‚åˆæ‰€æœ‰çš„æƒ…å†µï¼Œä½†æ˜¯ç»å¯¹æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹çš„é¦–é€‰å·¥å…·ã€‚å¦‚æœä½ è¿˜å¯¹ Python ä¸ç†Ÿæ‚‰ï¼Œå»ºè®®æ—¥åçš„æ—¥å­å¤šçœ‹çœ‹å¤šå­¦ä¹ ä¸€äº›ï¼Œè¿™ä¹Ÿæ˜¯ä¸­çº§ç¨‹åºå‘˜è¿›é˜¶ä¹‹è·¯ä¸Šå¿…é¡»è¦æŒæ¡çš„æŠ€èƒ½ã€‚Python 2.x å’Œ 3.x æ˜¯ä¸å…¼å®¹çš„ï¼ŒçœŸçš„å¾ˆè›‹ç–¼å‘€ï¼Œæ²¡ä»€ä¹ˆï¼Œæˆ‘å°±æ˜¯æƒ³åæ§½ä¸€ä¸‹ï¼:-)\r\n\r\n### Sublime Text\r\n\r\n[ä¸»é¡µåœ°å€](https://www.sublimetext.com/3)ï¼Œæˆ‘è®¤ä¸ºçš„ç›¸å½“å¥½ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚å¹³æ—¶å®šç„¶ä¼šæŸ¥çœ‹æˆ–ç¼–è¾‘ä¸€äº›çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œä¸€ä¸ªå¥½ç”¨çš„ç¼–è¾‘å™¨å¿…ä¸å¯å°‘ï¼ŒSublime Text äº†è§£ä¸€ä¸‹ï¼\r\n\r\n### Mounty\r\n\r\n[ä¸»é¡µåœ°å€](https://mounty.app/)ï¼Œä½ å¯èƒ½è¿˜æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œåˆ«äººæ‹¿æ¥ä¸€ä¸ªç§»åŠ¨ç¡¬ç›˜ï¼Œä½ åªèƒ½çœ‹ï¼Œæ— æ³•å¾€é‡Œé¢å¤åˆ¶æ–‡ä»¶ã€‚è¿™å¾ˆå¯èƒ½æ˜¯å› ä¸ºä»–çš„ç§»åŠ¨ç¡¬ç›˜æ ¼å¼æ˜¯ NTFSï¼Œä½ æƒ³ç»™ä»–æ‹·ä¸œè¥¿ï¼Œå´ä¸èƒ½å†™ï¼Œå¥½å°´å°¬ã€‚Mounty å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ æ€»ä¼šç”¨åˆ°çš„ã€‚\r\n\r\n### The Unarchiver\r\n\r\n[ä¸»é¡µåœ°å€](https://theunarchiver.com/)ï¼Œè§£å‹ç¼©å·¥å…·ï¼Œè¿™ä¸ªç®€å•å¥½ç”¨ï¼Œä½ ä¼šå–œæ¬¢çš„ã€‚ä¸ [WinZip](https://www.winzip.com/mac/en/) é…åˆä½¿ç”¨ï¼Œæ•ˆæœæ›´ä½³ï¼\r\n\r\n### CdTo\r\n\r\n[ä¸»é¡µåœ°å€](https://github.com/jbtule/cdto)ï¼ŒFinder å¼ºåŒ–å·¥å…·ï¼Œç”¨äº†éƒ½è¯´å¥½ï¼Œå¯¹äºå¼€å‘è€…ï¼Œç»å¸¸ä½¿ç”¨å‘½ä»¤è¡Œï¼Œè¿™ä¸ªå¯ä»¥é¼ æ ‡ç‚¹å‡»åç›´æ¥åœ¨ç°åœ¨çš„ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤å·ï¼Œç®€ç›´å®Œç¾ï¼å»ºè®®ä½ è¯•è¯•ï¼\r\n\r\n### WPS\r\n\r\n[ä¸»é¡µåœ°å€](http://www.wps.cn/product/wpsmac/)ï¼Œæˆ‘å°±ä¸ä¿¡ä½ æ²¡æœ‰æ‰“å¼€å¾®è½¯ Wordï¼ŒExcel å’Œ PPT çš„éœ€æ±‚ï¼ŒWPS ä½ å€¼å¾—æ‹¥æœ‰ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æ‰§æ„æƒ³ç”¨ [Office Mac](https://products.office.com/en-us/mac/microsoft-office-for-mac) ç‰ˆï¼Œæˆ‘ä¹Ÿæ²¡ä»€ä¹ˆæ„è§ï¼Œä½ å¼€å¿ƒå°±å¥½ï¼\r\n\r\n### MathPix\r\n\r\n[ä¸»é¡µåœ°å€](https://mathpix.com/)ï¼Œå¦‚æœä½ éœ€è¦å†™è®ºæ–‡ï¼Œä»å…¶ä»–åœ°æ–¹å¤åˆ¶å…¬å¼ï¼Œè¿™ä¸ªå°±æ˜¯æœ€é«˜æ•ˆçš„åˆ©å™¨ã€‚\r\n\r\n## å…¶ä»–è½¯ä»¶\r\n\r\n[QQ](http://im.qq.com/macqq/)ï¼Œ[å¾®ä¿¡](https://weixin.qq.com/)ï¼Œ[é’‰é’‰](https://www.dingtalk.com/)(å·¥ä½œå¸¸ç”¨çš„é€šè®¯å·¥å…·)ã€‚[Foxmail](https://www.foxmail.com/mac/)(å¥½ç”¨çš„é‚®ä»¶å®¢æˆ·ç«¯)ã€‚[ç™¾åº¦ç½‘ç›˜](https://pan.baidu.com)ï¼Œ[æœ‰é“è¯å…¸](https://itunes.apple.com/cn/app/you-dao-ci-dian/id491854842?mt=12)ï¼Œ[SourceTree](https://www.sourcetreeapp.com/)ï¼Œ[VS Code](https://code.visualstudio.com/)ï¼Œ[Postman](https://www.getpostman.com/)ï¼Œ[QQ éŸ³ä¹](https://y.qq.com/)ï¼Œ[ç½‘æ˜“äº‘éŸ³ä¹](https://music.163.com/)ï¼Œ[XCode](https://developer.apple.com/xcode/)ï¼Œ[Charles](https://www.charlesproxy.com/)ï¼Œ[æœ‰é“äº‘ç¬”è®°](https://note.youdao.com/)ï¼Œ[è…¾è®¯è§†é¢‘](https://v.qq.com/)ï¼Œ[çˆ±å¥‡è‰º](https://www.iqiyi.com/)ï¼Œ[ä¼˜é…·](http://www.youku.com/)ï¼Œ[Jetbrains å¥—è£…](https://www.jetbrains.com/)ç­‰\r\n"},{"number":32,"title":"ã€ç”¨ Kotlin å†™ Androidã€‘ç”¨ Kotlin å†™ Hello World","created_at":"2018-04-20 18:50:41","body":"## å†™åœ¨å‰é¢\r\n\r\nè¿™ç¯‡æ–‡ç« é¢˜ç›®å«â€œã€ç”¨ Kotlin å†™ Androidã€‘ç”¨ Kotlin å†™ Android Hello Worldâ€ï¼Œä¸»è¦ä»‹ç»ä¸€ç”¨ Kotlin å†™å‡ºæ¥çš„ Hello World ç©¶ç«Ÿä¸ç”¨ Java å†™æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå¹¶ä¼šä»‹ç»ä¸€äº›æ¦‚å¿µå’Œ Kotlin çš„å…·ä½“å®ç°ã€‚\r\n\r\n#### æŠ€æœ¯ç‚¹åˆ†æ\r\n\r\nä¸€ä¸ªæ§ä»¶å®šä¹‰åï¼Œåœ¨ä»£ç ä¸­ä¸éœ€è¦é€šè¿‡ findViewById æ¥è®²ç¨‹åºå¯¹è±¡å’Œ xml ä¸­å¸ƒå±€ç»‘å®šèµ·æ¥ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ä½¿ç”¨ xml ä¸­æ§ä»¶ id ç›´æ¥æ“çºµæ§ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ä¼šæç¤ºå¼•å…¥ `import kotlinx.android.synthetic.main.activity_main.*` çš„ä¾èµ–ï¼Œè¿™æ ·å¯ä»¥è¯´ç›¸å½“æ–¹ä¾¿ï¼Œå»é™¤äº†é‚£äº›æ²¡ä»€ä¹ˆå¤§æ„ä¹‰çš„æ¨¡æ¿ä»£ç ï¼Œå‡å°‘ä»£ç é‡ï¼Œä½¿ç»“æ„æ›´æ¸…æ™°ã€‚ç›¸ä¿¡ä½ å·²ç»çœ‹è¿‡å¾ˆå¤šåœ°æ–¹ä»‹ç» Kotlin éƒ½ä¼šè¯´è¿™æ˜¯å®ƒå¾ˆå¤§çš„ä¸€ä¸ªä¼˜ç‚¹ï¼Œä½†æˆ‘æƒ³è¯´çš„è¿˜åŒ…æ‹¬ï¼šå¦‚æœä½ åœ¨ `setContentView(R.layout.activity_main)` ä¸­åŠ è½½äº†ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶ï¼Œä½†æ˜¯ä½ åœ¨ä¸‹é¢ä½¿ç”¨å¸ƒå±€æ–‡ä»¶ä¸­ id ç›´æ¥å»æ“çºµæ§ä»¶æ—¶ï¼Œid å†™é”™äº†ï¼Œå†™æˆäº†ä¸€ä¸ªåœ¨ `activity_main` ä¸­æ ¹æœ¬ä¸å­˜åœ¨çš„ä¸€ä¸ª IDï¼Œä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Ÿç­”æ¡ˆæ˜¯ä¼šæŒ‚æ‰ï¼Œå¯ä»¥ç†è§£ï¼Œæ“ä½œäº†ä¸å±äºè‡ªå·±ç•Œé¢çš„å…ƒç´ ï¼Œä¼šæŠ¥ Crashï¼š`Attempt to invoke virtual method * on a null object reference`ï¼›é‚£å¦‚æœä¸¤ä¸ªç•Œé¢ id ä¸€è‡´ï¼Œä½†æ˜¯åœ¨ `import` æ—¶å†™é”™åŒ…äº†ï¼Œä¼šæœ‰é—®é¢˜å—ï¼Ÿç»è¯•éªŒï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè¿™æ˜¯ä¸æ˜¯å¾ˆå¥‡æ€ªï¼Ÿå…¶å®è¿™æ˜¯å› ä¸º Android ä¸­ï¼Œåœ¨ R æ–‡ä»¶ä¸­å°†èµ„æºæ–‡ä»¶éƒ½æ˜ å°„æˆä¸€ä¸ª `int` æ•´æ•°ï¼Œå­˜å‚¨åœ¨ä¸åŒ R æ–‡ä»¶çš„é™æ€å†…éƒ¨ç±»é‡Œé¢ï¼Œå› æ­¤ä¸¤ä¸ª id å…¶å®åœ¨ R æ–‡ä»¶ä¸­ç”¨ä¸€ä¸ªå€¼è¡¨ç¤ºäº†ã€‚åŒç†ï¼Œå¦‚æœå…¶ä»–çš„ä¸€äº›èµ„æºæ–‡ä»¶è¢«åŒæ ·æ˜ å°„ï¼Œå³ä½¿å†™é”™äº†ï¼Œä¹Ÿå¯èƒ½æ­£å¸¸è¿è¡Œã€‚PSï¼šä¸è¿‡ä¸€èˆ¬æ²¡æœ‰ç†ç”±æŠŠè¿™ä¸ªå†™é”™ã€‚\r\n\r\næˆ‘ä»¬é€šè¿‡ id å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„ Viewï¼Œä¸ºä»€ä¹ˆåœ¨ Java ä¸­å°±ä¸å¯ä»¥å‘¢ï¼Ÿè¿™ä¸ª include å°±æ˜¯æ€ä¹ˆå®Œæˆè¿™ä¸ªçš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è¿™ä¸ª include ä¸ä»…ä»…æ˜¯ç®€å•çš„ includeï¼Œè€Œæ˜¯å› ä¸ºåœ¨ build.gradle åŠ å…¥äº†æ‰©å±• plugin: `kotlin-android-extensions`ï¼Œè€Œè¿™ä¸ªæ‰©å±• plugin å…¶å®æ˜¯ä¼šç¼–è¯‘ç”Ÿæˆä¸€äº›é¢å¤–ä»£ç çš„ï¼Œé‚£æˆ‘ä»¬å°±æŠŠç¼–è¯‘å‡ºæ¥å­—èŠ‚ç æ–‡ä»¶è¿›è¡Œåç¼–è¯‘ï¼Œçœ‹çœ‹åç¼–è¯‘å‡ºæ¥äº†ç‚¹ä»€ä¹ˆï¼š\r\n\r\n![åç¼–è¯‘ Kotlin ç”Ÿæˆçš„å­—èŠ‚ç ](https://user-images.githubusercontent.com/7275046/39064906-b0baf6ee-4502-11e8-977a-ac44b8a27d78.png)\r\n\r\nå†å¯¹æ¯”ä¸€ä¸‹æºæ–‡ä»¶ï¼š\r\n\r\n![æºæ–‡ä»¶](https://user-images.githubusercontent.com/7275046/39064960-d8b94286-4502-11e8-9d8c-1e15fc69b307.png)\r\n\r\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šsetContentView(2131296283)ï¼Œå°† 2131296283 è½¬æ¢æˆåå…­è¿›åˆ¶æ˜¯ 0x7f09001bï¼Œåœ¨ R æ–‡ä»¶ä¸­ï¼š\r\n\r\n```\r\npublic static final class layout {\r\n  public static final int activity_main=0x7f09001b;\r\n}\r\n```\r\n\r\nåŒæ—¶ä¹Ÿä¸å­˜åœ¨ç›´æ¥ç”¨ id ç›´æ¥æ“ä½œ Viewï¼Œè€Œæ˜¯ä¹Ÿé€šè¿‡ findViewById() æ¥è·å– Viewï¼Œå¹¶ä¸”è¿™é‡Œè¿˜æœ‰ä¸€ä¸ª HashMap è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ä¸” id.my_app_text ä¹Ÿæ˜¯ R æ–‡ä»¶ä¸­çš„ï¼Œå› æ­¤åœ¨æºæ–‡ä»¶ä¸­ import é”™æ–‡ä»¶ä¹Ÿä¸ä¼šæŠ¥é”™ï¼š\r\n\r\n```\r\npublic View _$_findCachedViewById(int var1) {\r\n   if (this._$_findViewCache == null) {\r\n      this._$_findViewCache = new HashMap();\r\n   }\r\n\r\n   View var2 = (View)this._$_findViewCache.get(var1);\r\n   if (var2 == null) {\r\n      var2 = this.findViewById(var1);\r\n      this._$_findViewCache.put(var1, var2);\r\n   }\r\n\r\n   return var2;\r\n}\r\n```\r\n\r\næˆ‘ä»¬è¿˜çœ‹åˆ° `println(testNull?.length)` æœ€åè¢«åç¼–è¯‘å‡ºæ¥æ˜¯ï¼š`System.out.println(var3);`ï¼Œåœ¨ Kotlin æ ‡å‡†åº“ä¸­ println çš„å®šä¹‰æ˜¯ï¼š\r\n\r\n```\r\n/** Prints the given message and newline to the standard output stream. */\r\n@kotlin.internal.InlineOnly\r\npublic inline fun println(message: Any?) {\r\n    System.out.println(message)\r\n}\r\n```\r\n\r\nå› æ­¤ä¹Ÿå°±æ˜¯ä¸€äº›è¾¹å‡†åº“çš„ç®€å•å†™æ³•ï¼Œåœ¨ç¼–è¯‘åæ¢å¤æˆäº†æ­£å¸¸ Java ä»£ç çš„å†™æ³•ã€‚æˆ‘ä»¬æ¥ç€çœ‹åç¼–è¯‘å‡ºæ¥çš„ä¸‹åŠéƒ¨åˆ†ï¼š\r\n\r\n![åç¼–è¯‘ä¸‹ç­åŠåˆ†æˆªå›¾](https://user-images.githubusercontent.com/7275046/39065577-d187811a-4504-11e8-97f4-377e9eeeaa05.png)\r\n\r\nè¿™é‡Œæœ‰é™æ€ç±» MainActivity.Companionï¼Œå¯¹åº”çš„æ˜¯ Kotlin ä¸­çš„ä¼´éšå¯¹è±¡ï¼Œä¼´éšå¯¹è±¡å†…çš„å˜é‡æ˜¯æ‰€æœ‰ç±»å…±ç”¨çš„å±æ€§ï¼Œç±»ä¼¼äº static çš„å«ä¹‰ï¼Œåœ¨åç¼–è¯‘åçš„ä»£ç çœ‹ï¼Œä¹Ÿç¡®å®æ˜¯ç”¨ static final å¯¹è±¡å®ç°çš„ï¼š`public static final MainActivity.Companion Companion = new MainActivity.Companion((DefaultConstructorMarker)null);`\r\n\r\næˆ‘ä»¬è¿˜æ³¨æ„åˆ°ï¼š`val TAG: String? = MainActivity::class.simpleName` æœ€åè¢«åç¼–è¯‘åçš„ä»£ç æ˜¯ï¼š`private static final String TAG = Reflection.getOrCreateKotlinClass(MainActivity.class).getSimpleName();`ï¼ŒReflection æ˜¯åå°„çš„æ„æ€ï¼Œç”± Kotlin ç±»æ˜ å°„åˆ° Java å¯¹è±¡ã€‚åœ¨å†™å‰ä¸€æ®µä»£ç åä¼šæŠ¥è­¦å‘Šè¯´éœ€è¦å¼•å…¥ `org.jetbrains.kotlin:kotlin-reflect:1.2.31`ï¼Œè¿™é‡Œæˆ‘ä»¬çŸ¥é“å…¶å®äº†å…¶å®å®ƒæœ€åç”¨åˆ°äº† Kotlin ç±» Reflection å’Œæ–¹æ³•ï¼Œä¸å¼•å…¥åŒ…å°±ä¼šæŠ¥ `kotlin.jvm.KotlinReflectionNotSupportedError: Kotlin reflection implementation is not found at runtime. Make sure you have kotlin-reflect.jar in the classpath` çš„é”™è¯¯ä¹Ÿå°±å¯ä»¥ç†è§£äº†ã€‚\r\n\r\næœ€åæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼š\r\n\r\n```\r\nvar testNull: String? = null\r\nprintln(testNull?.length)\r\n\r\nvar testNull: String? = \"213\"\r\nprintln(testNull?.length)\r\n\r\nvar testNull: String? = null\r\nif ((System.currentTimeMillis() % 2) == 0L) {\r\n    testNull = \"123\"\r\n} else {\r\n    testNull = null\r\n}\r\nprintln(testNull?.length)\r\n```\r\n\r\næœ€åè¢«ç¼–è¯‘æˆï¼š\r\n\r\n```\r\nString testNull = (String)null;\r\nObject var3 = null;\r\nSystem.out.println(var3);\r\n\r\nString testNull = \"213\";\r\nInteger var3 = testNull.length();\r\nSystem.out.println(var3);\r\n\r\nString testNull = (String)null;\r\nif (System.currentTimeMillis() % (long)2 == 0L) {\r\n   testNull = \"123\";\r\n} else {\r\n   testNull = (String)null;\r\n}\r\nInteger var3 = testNull != null ? testNull.length() : null;\r\nSystem.out.println(var3);\r\n```\r\n\r\næœ‰ä¸€å®šçš„ä¼˜åŒ–ï¼Œå¦‚æœåœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šå€¼ï¼Œç›´æ¥ç®€åŒ–ï¼Œå¦åˆ™å°±æ˜¯æ­£å¸¸è½¬æ¢ï¼Œå…¶ä¸­ `?.` æœ€åå…¶å®å°±æ˜¯è½¬æ¢æˆäº† `if != null` çš„åˆ¤æ–­ã€‚\r\n\r\nè¿˜æœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯ Lambdas è¡¨è¾¾å¼å…¶å®ä¾æ—§æ˜¯è¿˜åŸæˆæœ€åŸºæœ¬çš„ Java ä»£ç ï¼Œä¹ŸåŒ…å« `new OnClickListener`ã€‚\r\n\r\n## æ€»ç»“ä¸€ä¸‹\r\n\r\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªæœ€ç®€å•çš„ Hello World ç¨‹åºï¼Œå¯ä»¥çœ‹å‡ºå› ä¸º Kotlin ä¹Ÿæ˜¯è¿è¡Œåœ¨ JVM ä¸Šçš„ï¼Œå› æ­¤ä¹Ÿéœ€è¦ç¬¦åˆå­—èŠ‚ç è§„èŒƒï¼Œå› æ­¤åç¼–è¯‘åç”Ÿæˆçš„ä»£ç å°±ä¼šå’Œç›´æ¥ç”¨ Java å†™æœ‰å¾ˆå¤šç›¸ä¼¼çš„éƒ¨åˆ†ï¼Œåªä¸è¿‡ç›´æ¥å†™ Kotlin çš„æ—¶å€™ï¼ŒKotlin æ’ä»¶æˆ–è€…æ˜¯åº“å¸®æˆ‘ä»¬å®Œæˆäº†ä¸€äº›å·¥ä½œï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¸€äº›ä¸œè¥¿è¿˜ä¼šç±»ä¼¼å»åˆ†æã€‚\r\n\r\n---\r\nå¦‚æœæœ‰ä¸€å¤©ä½ è§‰å¾—è¿‡çš„èˆ’æœäº†ï¼Œä½ å°±è¦å°å¿ƒäº†ï¼æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šæˆ‘æ˜¯ä»»ç‰ç¢\r\n\r\n![qrcode_for_gh_45402a07f7d9_258](https://user-images.githubusercontent.com/7275046/37878351-56acaf0c-309a-11e8-8d8d-10255972a59f.jpg)"},{"number":31,"title":"ã€ç”¨ Kotlin å†™ Androidã€‘Kotlin Koans æ·±å…¥åˆ†æè®²è§£ï¼ˆä¸‹ï¼‰","created_at":"2018-04-12 19:06:48","body":"ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†é›†åˆç±»çš„ä½¿ç”¨ï¼Œéƒ½æ˜¯ä¸€äº›æ–¹æ³•ï¼Œè¿™ä¸€ç« åŒ…æ‹¬äº†å‰é¢å­¦ä¹ åˆ°çš„ä¸œè¥¿çš„ä¸€äº›ä½¿ç”¨å’Œä¸€äº›å…¶ä»–çç¢çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªçœ‹ã€‚\r\n\r\n### Task 28ï¼šCompound tasks\r\n\r\n![Compound tasks](https://user-images.githubusercontent.com/7275046/38631790-55dc6ba2-3ded-11e8-841a-35c0575ead41.png)\r\n\r\næœ¬é¢˜ç›®æ˜¯å‰é¢å­¦åˆ°çš„é‚£äº›ä¸œè¥¿çš„ä¸€ä¸ªæ±‡æ€»ä½¿ç”¨ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38631792-564fe05a-3ded-11e8-8920-ba828c074535.png)\r\n\r\n### Task 29ï¼šGet used to new style\r\n\r\n![Get used to new style](https://user-images.githubusercontent.com/7275046/38632431-52445034-3def-11e8-9f7c-197941382826.png)\r\n\r\nå¯¹ç…§ Java ä»£ç æ”¹å†™ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38632434-5416ef20-3def-11e8-8bfb-e4e8bab37a6d.png)\r\n\r\n### Task 30ï¼šProperties\r\n\r\n![30ï¼šProperties](https://user-images.githubusercontent.com/7275046/38632606-d3f190ce-3def-11e8-9446-f0e66afac1ab.png)\r\n\r\nå±æ€§èµ‹å€¼ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38632608-d474d9d4-3def-11e8-9cc0-7d49f960bc2b.png)\r\n\r\n### Task 31ï¼šLazy property\r\n\r\n![Lazy property](https://user-images.githubusercontent.com/7275046/38632792-5094a83c-3df0-11e8-9230-ec4e74f053ce.png)\r\n\r\nåªå¯ä»¥èµ‹å€¼ä¸€æ¬¡çš„å±æ€§ï¼Œä¸€å®šæœ‰æ ‡è®°æˆ–å˜é‡åˆ¤æ–­ï¼Œå¦‚æœèµ‹å€¼è¿‡å°±ä¸èµ‹å€¼ï¼Œå¦åˆ™å°±èµ‹å€¼ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38632945-ca0b6994-3df0-11e8-9857-6640e882fbd0.png)\r\n\r\n### Task 32ï¼šDelegates example\r\n\r\n![Delegates example](https://user-images.githubusercontent.com/7275046/38692525-8b8832a8-3eb6-11e8-8596-8883122b8881.png)\r\n\r\nLazy çš„å§”æ‰˜å±æ€§ Delegatesï¼Œä¸»è¦æ˜¯é€šè¿‡å§”æ‰˜æ¨¡å¼ï¼Œå‡å°‘æ ·æ¿ä»£ç ï¼Œè¿˜å¯ä»¥å®ç°ç»§æ‰¿ä¸€æ ·çš„æ•ˆæœã€‚è¿™ä¸€ä¸ªé—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ä»¥åä¸“é¢˜åˆ†æã€‚\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38692682-20727ebe-3eb7-11e8-9305-2438db102e49.png)\r\n\r\n### Task 33ï¼šDelegates\r\n\r\n![Delegates](https://user-images.githubusercontent.com/7275046/38692795-83b8f6ec-3eb7-11e8-92a5-fd61c71dadfe.png)\r\n\r\nå§”æ‰˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ”¾åˆ°åé¢ä»‹ç»ï¼Œè¿™é‡Œåªè¦çŸ¥é“æœ‰è¿™ä¹ˆä¸€ä¸ªæ¦‚å¿µå°±å¥½äº†ã€‚\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38692948-fad59c8a-3eb7-11e8-8421-9679d71534d7.png)\r\n\r\n### Task 34ï¼šExtension function literals\r\n\r\n![Extension function literals](https://user-images.githubusercontent.com/7275046/38693093-79562548-3eb8-11e8-8e3f-709d020386f4.png)\r\n\r\nç›´æ¥å¯¹å­—é¢å€¼è¿›è¡Œæ‰©å±•ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ç‰¹æ€§ï¼Œå¯ä»¥è®©ä»£ç ç®€å•æ˜“æ‡‚ã€‚\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38693094-79d76626-3eb8-11e8-884f-07ae4720fc08.png)\r\n\r\n### Task 35ï¼šString and map builders\r\n\r\n![String and map builders](https://user-images.githubusercontent.com/7275046/38693246-e7614bf8-3eb8-11e8-9a3a-3b8a2d6144a7.png)\r\n\r\næ‰©å±•å‡½æ•°å­—é¢å€¼å¯ä»¥å¾ˆæœ‰æ•ˆçš„ç”¨äºå»ºé€ è€…æ¨¡å¼ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38694124-684b4bfe-3ebb-11e8-93d8-fc241839adb3.png)\r\n\r\nå…¶å®æˆ‘ä»¬è¿™é‡Œè¿˜å¯ä»¥å†™æˆæ³›å‹ï¼š\r\n\r\n![ç­”æ¡ˆ 2](https://user-images.githubusercontent.com/7275046/38694228-a3a8b060-3ebb-11e8-8006-350dcd4a76c6.png)\r\n\r\n### Task 36ï¼šThe function apply\r\n\r\n![The function apply](https://user-images.githubusercontent.com/7275046/38694612-b35f88d4-3ebc-11e8-96b0-8babc628e11f.png)\r\n\r\nç®€åŒ–å†™æ³•ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38694576-9d154c1c-3ebc-11e8-9ac9-2f81230fb094.png)\r\n\r\n### Task 37ï¼šHtml builder\r\n\r\n![Html builder](https://user-images.githubusercontent.com/7275046/38694859-55c7ca32-3ebd-11e8-86e2-50ea6fd4cf2f.png)\r\n\r\nè™½ç„¶æˆ‘ä»¬æ˜¯ç”¨ Kotlin å†™ Androidï¼Œä½†æ˜¯è¿™ä¸ªè”ç³»ä¸­æœ€åè¿˜æ˜¯å‡ºäº†ä¸€ä¸ªåˆ›å»º Html çš„å°ç»ƒä¹ é¢˜ï¼Œæˆ‘ä»¬ä¸å¦¨çœ‹ä¸€ä¸‹ Kotlin å®šä¹‰å‡½æ•°ï¼Œå®šä¹‰æ“ä½œç¬¦ï¼Œå¤„ç†æ•°æ®çš„èƒ½åŠ›ï¼Œç¡®å®æ˜¯å¾ˆå¼ºå¤§ï¼Java éœ€è¦å°å¿ƒäº†ï¼\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38694861-5687fe88-3ebd-11e8-94fa-9c3863f16346.png)\r\n\r\n### Task 38ï¼šBuilders: how it works\r\n\r\næˆ‘ä»¬ç®€å•çœ‹ä¸€ä¸‹å°±å¥½äº†ï¼Œåˆ†æèµ·æ¥ç¯‡å¹…è¾ƒé•¿ï¼Œä¸”å¯¹äºå†™ Android ç”¨å¤„æœ‰é™ï¼Œæš‚æ—¶ä¸åšå…·ä½“åˆ†æï¼Œåœ¨é«˜çº§åº”ç”¨ä¸­åœ¨ä»‹ç»ã€‚\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38695287-6f44d9cc-3ebe-11e8-9c25-8cd6e0630091.png)\r\n\r\n### Task 39ï¼šGeneric functions\r\n\r\n![Generic functions](https://user-images.githubusercontent.com/7275046/38695424-c5f310ea-3ebe-11e8-98ed-3a0db2a0c27c.png)\r\n\r\næ³›å‹å‡½æ•°åœ¨æ ‡å‡†åº“ä¸­æœ‰å¤§é‡ä½¿ç”¨ï¼Œå¯ä»¥æå¤§å‡å°‘ä»£ç é‡å¹¶æä¾›å¼ºå¤§åŠŸèƒ½ï¼Œåœ¨å¼€å‘ä¸€äº› SDK æ—¶ï¼Œæ¯”è¾ƒé€‚ç”¨ã€‚ä½†æ˜¯æƒ³å†™å¥½ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå›°éš¾ï¼Œéœ€è¦ä»£ç æœ‰è‰¯å¥½çš„è®¾è®¡å’Œè‰¯å¥½çš„ä»£ç æ€ç»´ã€‚\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38695631-695d71e4-3ebf-11e8-98cb-7f7085779b55.png)\r\n\r\n# å°ç»“\r\n\r\nåˆ°è¿™é‡Œæˆ‘ä»¬å°±åˆ†æå®Œäº† Kotlin Koans çš„æ¯ä¸ªå°é¢˜ï¼Œåœ¨å¼€å§‹é˜¶æ®µå’Œé›†åˆç›¸å…³å†…å®¹ä¸Šï¼Œä»‹ç»çš„æ›´è¯¦ç»†å…·ä½“ï¼Œåœ¨åé¢ä¸€äº›é«˜çº§ä½¿ç”¨æˆ–ä¸å¸¸ç”¨å¹¶æ²¡æœ‰ç”¨å¤§é‡ç¯‡å¹…å»ä»‹ç»ã€‚è¿™ä¹Ÿè€ƒè™‘åˆ°ç°é˜¶æ®µè¯¦ç»†ä»‹ç»ï¼Œå¯èƒ½ä¸æ˜¯å¾ˆå¥½çœ‹æ‡‚ï¼Œä¹Ÿç”¨å¤„ä¸å¤§ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å…¶å®è¿˜æ²¡æœ‰çœŸæ­£å¼€å§‹ã€ç”¨ Kotlin å†™ Androidã€‘ï¼Œä½†æœ‰äº†è¿™äº›åŸºç¡€ï¼Œå¯¹æˆ‘ä»¬ç†è§£ä»£ç å’Œå†™å‡ºæ›´ç®€å•é«˜æ•ˆçš„ä»£ç æ˜¯ææœ‰å¥½å¤„çš„ã€‚åœ¨åé¢çš„æ–‡ç« ä¸­ï¼Œç”¨å¤šä¸ªé¡¹ç›®å°† Android å¼€å‘çš„çŸ¥è¯†ç‚¹ç»„ç»‡èµ·æ¥ï¼Œä¹Ÿä»‹ç»ä¸€äº›ç”¨ Kotlin å†™ Android å¯èƒ½é‡è§çš„é—®é¢˜ã€‚\r\n\r\n---\r\nå¦‚æœæœ‰ä¸€å¤©ä½ è§‰å¾—è¿‡çš„èˆ’æœäº†ï¼Œä½ å°±è¦å°å¿ƒäº†ï¼æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šæˆ‘æ˜¯ä»»ç‰ç¢\r\n\r\n![qrcode_for_gh_45402a07f7d9_258](https://user-images.githubusercontent.com/7275046/37878351-56acaf0c-309a-11e8-8d8d-10255972a59f.jpg)\r\n"},{"number":29,"title":"ã€ç”¨ Kotlin å†™ Androidã€‘Kotlin Koans æ·±å…¥åˆ†æè®²è§£ï¼ˆä¸­ï¼‰","created_at":"2018-04-10 18:29:50","body":"ç»§ç»­æ¥ç€ä¸Šä¸€ç¯‡æˆ‘ä»¬ä»‹ç»çš„ï¼Œæˆ‘ä»¬ç»§ç»­æ·±å…¥å­¦ä¹  Kotlin Koansã€‚\r\n\r\n### Task 20ï¼šIntroduction\r\n\r\næ¥ä¸‹æ¥çš„ Taskï¼Œéƒ½æ˜¯å›´ç»•é›†åˆå±•å¼€çš„ï¼ŒKotlin çš„é›†åˆå’Œ Java çš„é›†åˆå·®ä¸å¤šï¼Œä¸è¿‡ Kotlin æ‰©å±•äº†è®¸å¤šæœ‰ç”¨çš„æ–¹æ³•ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ Show ç±»çš„å®šä¹‰ï¼š\r\n\r\n```\r\ndata class Shop(val name: String, val customers: List<Customer>)\r\n\r\ndata class Customer(val name: String, val city: City, val orders: List<Order>) {\r\n    override fun toString() = \"$name from ${city.name}\"\r\n}\r\n\r\ndata class Order(val products: List<Product>, val isDelivered: Boolean)\r\n\r\ndata class Product(val name: String, val price: Double) {\r\n    override fun toString() = \"'$name' for $price\"\r\n}\r\n\r\ndata class City(val name: String) {\r\n    override fun toString() = name\r\n}\r\n```\r\n\r\n![20ï¼šIntroduction](https://user-images.githubusercontent.com/7275046/38569916-230ec5c2-3d1f-11e8-834f-d6ec7737a559.png)\r\n\r\næ¯”è¾ƒå®¹æ˜“ï¼Œç›´æ¥ç”¨ Shop ä¸­çš„ customers è½¬æ¢æˆ Set å°±å¯ä»¥äº†ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38570022-6012e3d6-3d1f-11e8-817b-28c424963f3f.png)\r\n\r\n### Task 21ï¼šFilter; map\r\n\r\n![Filter; map](https://user-images.githubusercontent.com/7275046/38570118-a39fabca-3d1f-11e8-941d-908fff711973.png)\r\n\r\nå…¶ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° map æ–¹æ³•æ˜¯ï¼šå¯¹äºç»™å®šçš„è§„åˆ™ï¼Œè¿”å› Listï¼š\r\n\r\n```\r\n/**\r\n * Returns a list containing the results of applying the given [transform] function\r\n * to each element in the original collection.\r\n */\r\npublic inline fun <T, R> Iterable<T>.map(transform: (T) -> R): List<R> {\r\n    return mapTo(ArrayList<R>(collectionSizeOrDefault(10)), transform)\r\n}\r\n\r\n/**\r\n * Applies the given [transform] function to each element of the original collection\r\n * and appends the results to the given [destination].\r\n */\r\npublic inline fun <T, R, C : MutableCollection<in R>> Iterable<T>.mapTo(destination: C, transform: (T) -> R): C {\r\n    for (item in this)\r\n        destination.add(transform(item))\r\n    return destination\r\n}\r\n```\r\n\r\nå¯¹äº filter æ–¹æ³•æ˜¯ï¼šè¿”å›ç¬¦åˆç»™å®šè§„åˆ™çš„ Listï¼Œè§„åˆ™ç”¨äºåˆ¤å®šè¯¥å…ƒç´ æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œè§„åˆ™è¿”å›å€¼ä¸º Boolean\r\n\r\n```\r\n/**\r\n * Returns a list containing only elements matching the given [predicate].\r\n */\r\npublic inline fun <T> Iterable<T>.filter(predicate: (T) -> Boolean): List<T> {\r\n    return filterTo(ArrayList<T>(), predicate)\r\n}\r\n\r\n/**\r\n * Appends all elements matching the given [predicate] to the given [destination].\r\n */\r\npublic inline fun <T, C : MutableCollection<in T>> Iterable<T>.filterTo(destination: C, predicate: (T) -> Boolean): C {\r\n    for (element in this) if (predicate(element)) destination.add(element)\r\n    return destination\r\n}\r\n```\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38570346-35867ae6-3d20-11e8-947e-d3ea1805c46c.png)\r\n\r\n### Task 22ï¼šAll, Any and other predicates\r\n\r\n![All, Any and other predicates](https://user-images.githubusercontent.com/7275046/38570853-66bd1312-3d21-11e8-9864-a0515fd43f0c.png)\r\n\r\næœ‰äº†ä¸Šé¢çš„ç»éªŒï¼Œè¿™é‡Œçš„é—®é¢˜å°±å¥½è§£å†³äº†ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38570993-d35e60ca-3d21-11e8-9f51-9d10f1b03df1.png)\r\n\r\næ ¹æ®åç§°ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥å¾ˆå®¹æ˜“çŒœåˆ°æ˜¯å¹²ä»€ä¹ˆï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯è¦çœ‹çœ‹å…¶ä¸­å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼š\r\n\r\n```\r\n/**\r\n * Returns `true` if all elements match the given [predicate].\r\n */\r\npublic inline fun <T> Iterable<T>.all(predicate: (T) -> Boolean): Boolean {\r\n    if (this is Collection && isEmpty()) return true\r\n    // æœ‰ä¸€ä¸ªä¸ç¬¦åˆæ¡ä»¶ï¼Œå°±è¿”å› false\r\n    for (element in this) if (!predicate(element)) return false\r\n    return true\r\n}\r\n\r\n/**\r\n * Returns `true` if at least one element matches the given [predicate].\r\n */\r\npublic inline fun <T> Iterable<T>.any(predicate: (T) -> Boolean): Boolean {\r\n    if (this is Collection && isEmpty()) return false\r\n    // æœ‰ç¬¦åˆæ¡ä»¶çš„ï¼Œå°±è¿”å› true\r\n    for (element in this) if (predicate(element)) return true\r\n    return false\r\n}\r\n\r\n/**\r\n * Returns the number of elements matching the given [predicate].\r\n */\r\npublic inline fun <T> Iterable<T>.count(predicate: (T) -> Boolean): Int {\r\n    if (this is Collection && isEmpty()) return 0\r\n    var count = 0\r\n    // æœ‰ç¬¦åˆæ¡ä»¶çš„ï¼Œè®¡æ•°åŠ ä¸€ï¼Œæœ€åè¿”å›è®¡æ•°\r\n    for (element in this) if (predicate(element)) count++\r\n    return count\r\n}\r\n\r\n/**\r\n * Returns the first element matching the given [predicate], or `null` if no such element was found.\r\n */\r\n@kotlin.internal.InlineOnly\r\npublic inline fun <T> Iterable<T>.find(predicate: (T) -> Boolean): T? {\r\n    return firstOrNull(predicate)\r\n}\r\n/**\r\n * Returns the first element matching the given [predicate], or `null` if element was not found.\r\n */\r\npublic inline fun <T> Iterable<T>.firstOrNull(predicate: (T) -> Boolean): T? {\r\n    // æœ‰ç¬¦åˆæ¡ä»¶çš„ï¼Œè¿”å›ç¬¦åˆæ¡ä»¶çš„è¿™ä¸€é¡¹\r\n    for (element in this) if (predicate(element)) return element\r\n    return null\r\n}\r\n```\r\n\r\n### Task 23ï¼šFlatMap\r\n\r\n![FlatMap](https://user-images.githubusercontent.com/7275046/38571210-74632bf4-3d22-11e8-9e93-cc31a76003fd.png)\r\n\r\nFlatMap å¯¹é›†åˆä¸­çš„å…ƒç´ å»é‡ç»„æˆæ–°çš„é›†åˆï¼š\r\n\r\n```\r\n/**\r\n * Returns a single list of all elements yielded from results of [transform] function being invoked on each element of original collection.\r\n */\r\npublic inline fun <T, R> Iterable<T>.flatMap(transform: (T) -> Iterable<R>): List<R> {\r\n    return flatMapTo(ArrayList<R>(), transform)\r\n}\r\n/**\r\n * Appends all elements yielded from results of [transform] function being invoked on each element of original collection, to the given [destination].\r\n */\r\npublic inline fun <T, R, C : MutableCollection<in R>> Iterable<T>.flatMapTo(destination: C, transform: (T) -> Iterable<R>): C {\r\n    // éå†é›†åˆä¸­å…ƒç´ ï¼ŒæŠŠå…ƒç´ çš„å»é‡åé‡ç»„æˆ List è¿”å›\r\n    for (element in this) {\r\n        val list = transform(element)\r\n        destination.addAll(list)\r\n    }\r\n    return destination\r\n}\r\n```\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38571462-27e4cade-3d23-11e8-9955-ce52fb180f96.png)\r\n\r\n### Task 24ï¼šMax; min\r\n\r\n![](https://user-images.githubusercontent.com/7275046/38572558-fbe3acc2-3d25-11e8-86af-7fbc887ce15f.png)\r\n\r\næœ€å¤§æœ€å°çš„æŸ¥æ‰¾æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ“ä½œï¼Œç»“åˆå‰é¢çš„ FlatMapï¼Œå¯ä»¥è§£å†³æ­¤é—®é¢˜ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38572525-dffed3b0-3d25-11e8-845f-4009b0d5eb2d.png)\r\n\r\nå…¶ä¸­æˆ‘ä»¬çœ‹çœ‹ max æ˜¯å¦‚ä½•å®ç°çš„ï¼š\r\n\r\n```\r\n/**\r\n * Returns the first element yielding the largest value of the given function or `null` if there are no elements.\r\n */\r\npublic inline fun <T, R : Comparable<R>> Iterable<T>.maxBy(selector: (T) -> R): T? {\r\n    val iterator = iterator()\r\n    if (!iterator.hasNext()) return null\r\n    var maxElem = iterator.next()\r\n    var maxValue = selector(maxElem)\r\n    // ç®€å•ç²—æš´éå†æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æœ€å¤§çš„ä¸€é¡¹ï¼Œæ˜¯ç¨³å®šçš„\r\n    while (iterator.hasNext()) {\r\n        val e = iterator.next()\r\n        val v = selector(e)\r\n        if (maxValue < v) {\r\n            maxElem = e\r\n            maxValue = v\r\n        }\r\n    }\r\n    return maxElem\r\n}\r\n```\r\n\r\n### Task 24ï¼šSort\r\n\r\n![Sort](https://user-images.githubusercontent.com/7275046/38572836-d59aad6c-3d26-11e8-9bd6-de12c5a4a581.png)\r\n\r\næ’åºï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38572837-d60b04ae-3d26-11e8-8480-a574688bda52.png)\r\n\r\nçœ‹ä¼¼ç®€å•ï¼Œä¸è¿‡ä¼¼ä¹æœ‰æ²¡é‚£ä¹ˆç®€å•ï¼š\r\n\r\n```\r\n/**\r\n * Returns a list of all elements sorted according to natural sort order of the value returned by specified [selector] function.\r\n */\r\npublic inline fun <T, R : Comparable<R>> Iterable<T>.sortedBy(crossinline selector: (T) -> R?): List<T> {\r\n    return sortedWith(compareBy(selector))\r\n}\r\n\r\n/**\r\n * Returns a list of all elements sorted according to the specified [comparator].\r\n */\r\npublic fun <T> Iterable<T>.sortedWith(comparator: Comparator<in T>): List<T> {\r\n    if (this is Collection) {\r\n       if (size <= 1) return this.toList()\r\n       @Suppress(\"UNCHECKED_CAST\")\r\n       return (toTypedArray<Any?>() as Array<T>).apply { sortWith(comparator) }.asList()\r\n    }\r\n    return toMutableList().apply { sortWith(comparator) }\r\n}\r\n\r\n/**\r\n * Creates a comparator using the function to transform value to a [Comparable] instance for comparison.\r\n */\r\n@kotlin.internal.InlineOnly\r\npublic inline fun <T> compareBy(crossinline selector: (T) -> Comparable<*>?): Comparator<T> =\r\n        Comparator { a, b -> compareValuesBy(a, b, selector) }\r\n\r\n/**\r\n * Compares two values using the specified [selector] function to calculate the result of the comparison.\r\n * The function is applied to the given values [a] and [b] and return [Comparable] objects.\r\n * The result of comparison of these [Comparable] instances is returned.\r\n */\r\n@kotlin.internal.InlineOnly\r\npublic inline fun <T> compareValuesBy(a: T, b: T, selector: (T) -> Comparable<*>?): Int {\r\n    return compareValues(selector(a), selector(b))\r\n}\r\n\r\n/**\r\n * Compares two nullable [Comparable] values. Null is considered less than any value.\r\n */\r\npublic fun <T : Comparable<*>> compareValues(a: T?, b: T?): Int {\r\n    if (a === b) return 0\r\n    if (a == null) return -1\r\n    if (b == null) return 1\r\n\r\n    @Suppress(\"UNCHECKED_CAST\")\r\n    return (a as Comparable<Any>).compareTo(b)\r\n}\r\n\r\n/**\r\n * Returns a list of all elements sorted according to the specified [comparator].\r\n */\r\npublic fun <T> Iterable<T>.sortedWith(comparator: Comparator<in T>): List<T> {\r\n    if (this is Collection) {\r\n       if (size <= 1) return this.toList()\r\n       @Suppress(\"UNCHECKED_CAST\")\r\n       return (toTypedArray<Any?>() as Array<T>).apply { sortWith(comparator) }.asList()\r\n    }\r\n    return toMutableList().apply { sortWith(comparator) }\r\n}\r\n```\r\n\r\n### Task 25ï¼šSum\r\n\r\n![Sum](https://user-images.githubusercontent.com/7275046/38573240-ffa451fc-3d27-11e8-9c7b-b2a5d87bbf7b.png)\r\n\r\næ±‚å’Œï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38573242-000255a4-3d28-11e8-95c5-241772558115.png)\r\n\r\n```\r\n/**\r\n * Returns the sum of all values produced by [selector] function applied to each element in the collection.\r\n */\r\npublic inline fun <T> Iterable<T>.sumByDouble(selector: (T) -> Double): Double {\r\n    var sum: Double = 0.0\r\n    // éå†å¹¶ç›¸åŠ \r\n    for (element in this) {\r\n        sum += selector(element)\r\n    }\r\n    return sum\r\n}\r\n```\r\n\r\n### Task 26ï¼šGroup By\r\n\r\n![Group By](https://user-images.githubusercontent.com/7275046/38573353-66fb23f8-3d28-11e8-8a60-fdf805b9268d.png)\r\n\r\nåˆ†ç»„ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38573445-aaacc250-3d28-11e8-880f-eb559711ffef.png)\r\n\r\nå®ç°æ–¹æ³•ï¼š\r\n\r\n```\r\n/**\r\n * Groups elements of the original collection by the key returned by the given [keySelector] function\r\n * applied to each element and returns a map where each group key is associated with a list of corresponding elements.\r\n *\r\n * The returned map preserves the entry iteration order of the keys produced from the original collection.\r\n *\r\n * @sample samples.collections.Collections.Transformations.groupBy\r\n */\r\npublic inline fun <T, K> Iterable<T>.groupBy(keySelector: (T) -> K): Map<K, List<T>> {\r\n    return groupByTo(LinkedHashMap<K, MutableList<T>>(), keySelector)\r\n}\r\n\r\n/**\r\n * Groups elements of the original collection by the key returned by the given [keySelector] function\r\n * applied to each element and puts to the [destination] map each group key associated with a list of corresponding elements.\r\n *\r\n * @return The [destination] map.\r\n *\r\n * @sample samples.collections.Collections.Transformations.groupBy\r\n */\r\npublic inline fun <T, K, M : MutableMap<in K, MutableList<T>>> Iterable<T>.groupByTo(destination: M, keySelector: (T) -> K): M {\r\n    for (element in this) {\r\n        val key = keySelector(element)\r\n        // å°†æ–°æ•°æ®æ·»åŠ åˆ° Map ä¸­ï¼Œå¦‚æœä»¥å‰æœ‰ Keyï¼Œæ·»åŠ ï¼Œå¦åˆ™åˆ›å»ºåæ·»åŠ \r\n        val list = destination.getOrPut(key) { ArrayList<T>() }\r\n        list.add(element)\r\n    }\r\n    return destination\r\n}\r\n\r\n/**\r\n * Returns the value for the given key. If the key is not found in the map, calls the [defaultValue] function,\r\n * puts its result into the map under the given key and returns it.\r\n *\r\n * @sample samples.collections.Maps.Usage.getOrPut\r\n */\r\npublic inline fun <K, V> MutableMap<K, V>.getOrPut(key: K, defaultValue: () -> V): V {\r\n    val value = get(key)\r\n    // åœ¨ Map ä¸­æ ¹æ® Key åˆ¤æ–­æ˜¯å¦å¯ä»¥æ‰¾åˆ° Valueï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåœ¨è¿™ä¸ª Map ä¸­åˆ›å»ºä¸€æ¡\r\n    return if (value == null) {\r\n        val answer = defaultValue()\r\n        put(key, answer)\r\n        answer\r\n    } else {\r\n        value\r\n    }\r\n}\r\n```\r\n\r\n### Task 27ï¼šPartition\r\n\r\n![Partition](https://user-images.githubusercontent.com/7275046/38574040-5d3bc1ea-3d2a-11e8-8c04-678433d3183c.png)\r\n\r\nåŒºåˆ†ï¼ˆæ»¡è¶³æ¡ä»¶å’Œä¸æ»¡ä½æ¡ä»¶ï¼‰ï¼š\r\n\r\n![ç­”æ¡ˆ 1](https://user-images.githubusercontent.com/7275046/38574411-53ae160e-3d2b-11e8-9163-51d8be37add6.png)\r\n\r\n![ç­”æ¡ˆ 2](https://user-images.githubusercontent.com/7275046/38574615-d2d20940-3d2b-11e8-97e7-7de44c3f3c58.png)\r\n\r\n```\r\n/**\r\n * Splits the original collection into pair of lists,\r\n * where *first* list contains elements for which [predicate] yielded `true`,\r\n * while *second* list contains elements for which [predicate] yielded `false`.\r\n */\r\npublic inline fun <T> Iterable<T>.partition(predicate: (T) -> Boolean): Pair<List<T>, List<T>> {\r\n    val first = ArrayList<T>()\r\n    val second = ArrayList<T>()\r\n    // åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œåˆ†åˆ«æ”¾åˆ°ç¬¬ä¸€ä¸ªç¬¬äºŒä¸ªå‚æ•°ä¸­\r\n    for (element in this) {\r\n        if (predicate(element)) {\r\n            first.add(element)\r\n        } else {\r\n            second.add(element)\r\n        }\r\n    }\r\n    return Pair(first, second)\r\n}\r\n```\r\n\r\n### Task 28ï¼šFold\r\n\r\n![Fold](https://user-images.githubusercontent.com/7275046/38575238-8dafcf62-3d2d-11e8-9d36-72ef1a3c9a98.png)\r\n\r\nèšåˆï¼ˆFoldï¼‰ï¼Œæ€è·¯æ˜¯ï¼šæ‰¾å‡ºæ‰€æœ‰å•†å“ï¼Œå°†è¿™äº›å•†å“ä¾æ¬¡å’Œæ¯ä¸€ä¸ªç”¨æˆ·ä¹°è¿‡çš„å•†å“åšäº¤é›†ï¼Œæœ€åå‰©ä¸‹çš„å•†å“å°±æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½è´­ä¹°äº†çš„å•†å“ï¼š\r\n\r\n![ç­”æ¡ˆ](https://user-images.githubusercontent.com/7275046/38575139-443f6f18-3d2d-11e8-93b4-7f114469ebb1.png)\r\n\r\n```\r\n/**\r\n * Accumulates value starting with [initial] value and applying [operation] from left to right to current accumulator value and each element.\r\n */\r\npublic inline fun <T, R> Iterable<T>.fold(initial: R, operation: (acc: R, T) -> R): R {\r\n    var accumulator = initial\r\n    for (element in this) accumulator = operation(accumulator, element)\r\n    return accumulator\r\n}\r\n```\r\n\r\n# å°ç»“\r\n\r\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å®Œæˆäº†é›†åˆç±»ç›¸å…³çš„æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé›†åˆçš„åŸºæœ¬æ•°æ®ç»“æ„ï¼ŒKotlin å’Œ Java åŒºåˆ«ä¸å¤§ï¼Œä½†æ˜¯ Kotlin æ‰©å±•äº†é›†åˆçš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„çµæ´»åº”ç”¨ï¼Œå¯ä»¥åŸºæœ¬æ»¡è¶³å¹³æ—¶é›†åˆç›¸å…³çš„æ“ä½œã€‚è¦æƒ³æ›´çµæ´»çš„åº”ç”¨ï¼Œéœ€è¦æˆ‘ä»¬å¤šåŠ ç»ƒä¹ ï¼Œæ›´å¥½çš„å»ç†Ÿæ‚‰ã€‚\r\n\r\n---\r\nå¦‚æœæœ‰ä¸€å¤©ä½ è§‰å¾—è¿‡çš„èˆ’æœäº†ï¼Œä½ å°±è¦å°å¿ƒäº†ï¼æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šæˆ‘æ˜¯ä»»ç‰ç¢\r\n![qrcode_for_gh_45402a07f7d9_258](https://user-images.githubusercontent.com/7275046/37878351-56acaf0c-309a-11e8-8d8d-10255972a59f.jpg)\r\n"},{"number":27,"title":"ã€ç”¨ Kotlin å†™ Androidã€‘Kotlin Koans æ·±å…¥åˆ†æè®²è§£ï¼ˆä¸Šï¼‰","created_at":"2018-04-08 17:40:27","body":"# å‰è¨€\r\n\r\nå…·ä½“ Kotlin æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ç›¸ä¿¡ä½ å·²ç»åœ¨ç½‘ç»œä¸Šå…¶ä»–åœ°æ–¹çœ‹åˆ°è¿‡è§£é‡Šï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œç®€å•ä¸€å¥è¯ï¼šâ€œKotlin æ˜¯ä¸€ç§ä¸ Javaã€C++ å¹³çº§çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€â€ã€‚åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°äº†ï¼ŒKotlin æœ‰å¾ˆå¤šçš„åŸºç¡€ç‰¹æ®Šçš„è¯­æ³•ï¼Œè®©ä»£ç å˜å¾—ç®€å•æ¸…æ™° (å¯èƒ½åœ¨å¼€å§‹çš„æ—¶å€™ä½ åè€Œè§‰å¾—å˜å¾—å¤æ‚äº†)ï¼Œä½† Kotlin çœŸçš„å°±æ˜¯è¯­æ³•çš„æ”¹å˜å—ï¼ŸèŠ±ä¸¤ä¸ªå°æ—¶çœ‹çœ‹ Kotlin çš„è¯­æ³•å°±ç®—å­¦å®Œäº† Kotlin å—ï¼Ÿéä¹Ÿï¼Kotlin ä¸ Java æœ€å¤§çš„åŒºåˆ«æ˜¯ Kotlin çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œè¿™ä¸€ç‚¹ä»¥åæˆ‘ä»¬ä¼šç»å¸¸æåˆ°ï¼ŒKotlin çš„æ ¸å¿ƒä¸ Java å°±æœ‰æœ¬è´¨çš„ä¸åŒã€‚Kotlin Koans æ˜¯å­¦ä¹  Kotlin æå¥½çš„å­¦ä¹ èµ„æ–™ï¼Œæˆ‘ä»¬å…ˆæŠŠ Kotlin Koans åšä¸€éï¼Œç›¸ä¿¡ä½ ä¼šå¯¹ Kotlin æœ‰å®Œå…¨ä¸åŒçš„è®¤è¯†ã€‚\r\n\r\n# Kotlin Koans é¡¹ç›®è¯¦è§£\r\n\r\nKotlin Koans æ˜¯ä¸€ä¸ª Kotlin å­¦ä¹ çš„æ•™ç¨‹ï¼Œé‡‡ç”¨çš„æ–¹å¼æ˜¯ç»™ä½ æœªå®Œæˆçš„ä»£ç ï¼Œç»™ä½ ä¸€ç‚¹æç¤ºï¼Œä½ å»è¡¥å…¨ä»£ç ï¼Œè¿è¡Œå•å…ƒæµ‹è¯•ï¼Œé€šè¿‡åè¿›å…¥ä¸‹ä¸€é¢˜ï¼Œå¯ä»¥éå¸¸å¥½çš„å­¦ä¹  Kotlinã€‚\r\n\r\nKotlin Koans çš„å®‰è£…ï¼Œå¯ä»¥åœ¨ GitHub ä¸Šä¸‹è½½æºä»£ç é¡¹ç›®ï¼Œä½†æ˜¯æˆ‘ä¸å»ºè®®è¿™æ ·åšï¼Œæˆ‘å»ºè®®çš„æ–¹å¼æ˜¯å®‰è£… [EduTools æ’ä»¶](http://kotlinlang.org/docs/tutorials/koans.html)ï¼Œå®‰è£…æ–¹å¼æ˜¯ç›´æ¥åœ¨æ’ä»¶ä¸­å¿ƒä¸­æœç´¢ EduTools å°±å¯ä»¥äº†ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38205804-77f359cc-36da-11e8-83d5-89d40223feb9.png)\r\n\r\nç„¶åé‡å¯ Android Studioã€‚å¯ä»¥çœ‹åˆ°ç¬¬ä¸€é¡¹ Browse Coursesï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38205945-1289c1c4-36db-11e8-9966-5f8386ea45b2.png)\r\n\r\nç‚¹å‡»é€‰æ‹© Kotlin Koans é¡¹ç›®ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38205952-1ddf64ca-36db-11e8-8e0e-c66287721f5e.png)\r\n\r\nå¤§çº¦éœ€è¦ä¸€åˆ†é’Ÿåï¼Œä¼šåˆ›å»ºé¡¹ç›®ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206035-70ee1026-36db-11e8-8ee8-e9eb81b158d3.png)\r\n\r\næ„Ÿè§‰æç¤ºï¼Œå®Œæˆç¬¬ä¸€ä¸ªä»»åŠ¡ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206112-bfc27df4-36db-11e8-9e3d-fc36fe3b7e6f.png)\r\n\r\nè¿™ä¸ªä»»åŠ¡å°±æ˜¯ä¸Šä¸€ç¯‡ä¸­å‡½æ•°çš„å®šä¹‰ç›¸å…³çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾—åˆ°å¦‚ä¸‹ä¸€äº›ä¿¡æ¯ï¼š\r\n\r\n  1. Kotlin æ–‡ä»¶åç¼€ä¸º `.kt`\r\n  2. Kotlin æ–‡ä»¶ä¸éœ€è¦å®šä¹‰ç±»ï¼Œå¯ä»¥ç›´æ¥å®šä¹‰æ–¹æ³•\r\n  3. ç®€å•çš„æ–¹æ³•å¯ä»¥çœç•¥å¤§æ‹¬å·ï¼Œç›´æ¥åœ¨ `=` åå†™è¿”å›å€¼\r\n\r\n# æ¯ä¸€ä¸ª Task è¯¦è§£\r\n\r\n### Task 2ï¼šJava to Kotlin conversion\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206481-20036218-36dd-11e8-86bb-b90fe7124e53.png)\r\n\r\nå°† Java ä»£ç è½¬æ¢æˆ Kotlin å†™æ³•ã€‚æˆ‘ä»¬æ‰“å¼€ `JavaCode.java` æ–‡ä»¶ï¼Œé€‰ä¸­ toJSON æ–¹æ³•ï¼Œå¤åˆ¶ï¼Œåˆ° `Task.kt` ä¸­ç²˜è´´(ç²˜è´´éœ€è¦é€‰ä¸­ä»£ç )ï¼Œç²˜è´´åå¯ä»¥å‘ç° Java ä»£ç è‡ªåŠ¨è½¬æ¢æˆäº† Kotlin ä»£ç ï¼Œå¾ˆæ–¹ä¾¿ã€‚\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206362-bd5782f2-36dc-11e8-9d79-09e51fb00bff.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206361-bcf44476-36dc-11e8-9847-2981eabf5089.png)\r\n\r\né™¤äº†ä¸Šé¢è¿™ç§æ–¹æ³•ï¼Œè¿˜å¯ä»¥ç”¨ Android Studio ä¸­ä»£ç è£…æ¢å·¥å…·ï¼Œå°† Java æ–‡ä»¶è½¬æ¢æˆ Kotlinï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206590-9287b686-36dd-11e8-82c2-f8c9fffa4537.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206561-6f63f1d8-36dd-11e8-9d05-e1745e526084.png)\r\n\r\næˆ‘ä»¬åœ¨è¿™é‡Œæ³¨æ„å‡ ä¸ªé—®é¢˜ï¼š\r\n\r\n  1. å‡½æ•°çš„å®šä¹‰ï¼Œç”¨ fun å…³é”®å­—\r\n  2. å‚æ•°å…ˆå†™å‚æ•°åï¼Œå†å†™å‚æ•°ç±»å‹ï¼Œä¸­é—´ç”¨å†’å· `:` åˆ†å‰²\r\n  3. æ–¹æ³•å‚æ•°åå’Œå¤§æ‹¬å·ä¸­é—´éœ€è¦å†™å‡½æ•°è¿”å›å€¼ç±»å‹ï¼Œç”¨ `:` è¯´æ˜\r\n  4. åˆ›å»ºå¯¹è±¡æ²¡æœ‰ `new` å…³é”®å­—ï¼Œç›´æ¥ç±»ååè·Ÿæ‹¬å·åˆ›å»ºæ–°å¯¹è±¡\r\n  5. å±æ€§å®šä¹‰ç”¨ val(ä¸å¯æ›´æ”¹) æˆ– var(å¯ä»¥æ›´æ”¹)\r\n\r\n### Task 3ï¼šNamed arguments\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206965-df5cb32a-36de-11e8-96b5-7dfc67bd60da.png)\r\n\r\nKotlin ä¸­å‚æ•°æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¯ä»¥æ˜¾ç¤ºå£°æ˜å“ªäº›å˜é‡ç”¨å“ªäº›å€¼ï¼Œè€Œä¸ä¸€å®šå¿…é¡»è¦æŒ‰é¡ºåºèµ‹å€¼ï¼Œå…¶ä»–çš„å€¼ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¾ˆæ–¹ä¾¿çµæ´»ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘æ„é€ å‡½æ•°ã€é‡è½½å‡½æ•°çš„æ•°é‡ã€‚Java ä¸­ä¸¤ä¸ªé‡è½½å‡½æ•°å‚æ•°çš„ç±»å‹å¦‚æœéƒ½ä¸€æ ·çš„è¯ï¼Œæ˜¯ä¸å…è®¸çš„ï¼Œä½†æ˜¯ Kotlin ä½¿ç”¨é»˜è®¤å€¼çš„æ–¹å¼å°±å¯ä»¥å¾ˆå¥½çš„é¿å…è¿™ä¸ªé—®é¢˜ï¼ˆå£°æ˜ä¸€ä¸ªä¸‰ä¸ªå‚æ•°çš„æ–¹æ³•ï¼Œå¹¶åŠ ä¸Šé»˜è®¤å€¼ï¼Œè°ƒç”¨çš„æ—¶å€™å¯¹ä¸åŒçš„å‚æ•°è¿›è¡Œå£°æ˜èµ‹å€¼ï¼Œå°±å¯ä»¥è¾¾åˆ° Java éœ€è¦å¤šä¸ªä¸åŒç±»å‹ä»åœ¨æ‰èƒ½è¾¾åˆ°çš„ç›®çš„ï¼‰ã€‚\r\n\r\n```\r\n/**\r\n * Creates a string from all the elements separated using [separator] and using the given [prefix] and [postfix] if supplied.\r\n *\r\n * If the collection could be huge, you can specify a non-negative value of [limit], in which case only the first [limit]\r\n * elements will be appended, followed by the [truncated] string (which defaults to \"...\").\r\n */\r\npublic fun <T> Iterable<T>.joinToString(separator: CharSequence = \", \", prefix: CharSequence = \"\", postfix: CharSequence = \"\", limit: Int = -1, truncated: CharSequence = \"...\", transform: ((T) -> CharSequence)? = null): String {\r\n    return joinTo(StringBuilder(), separator, prefix, postfix, limit, truncated, transform).toString()\r\n}\r\n```\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38206969-e1d27284-36de-11e8-925e-adfb90487b8f.png)\r\n\r\n### Task 4ï¼šDefault arguments\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38207724-58d9a90e-36e1-11e8-8c38-1e1d9b950787.png)\r\n\r\nçœ‹é¢˜ç›®å¯ä»¥çœ‹å‡ºï¼Œæœ‰äº›æ–¹æ³•åœ¨è°ƒç”¨çš„æ—¶å€™æŠ¥é”™ï¼Œæç¤ºæœ‰äº›å€¼æ²¡æœ‰åˆ«èµ‹å€¼ï¼Œé‚£æˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™åŠ ä¸Šåˆé€‚çš„é»˜è®¤å€¼ï¼Œåˆ†ææç¤ºç»™å‡ºçš„ Java ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ€åä¸€ä¸ªå¦‚æœ number æ²¡æœ‰è¢«èµ‹å€¼ï¼Œä¼šç”¨é»˜è®¤å€¼ 42 è°ƒç”¨ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œè€Œç¬¬äºŒä¸ªæ–¹æ³• toUpperCase æ²¡æœ‰è¢«èµ‹å€¼ï¼Œä½¿ç”¨é»˜è®¤å€¼ false è°ƒç”¨ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™å¯ä»¥å†™å‡ºç­”æ¡ˆï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38207726-59ae75da-36e1-11e8-8487-0fb46ed47a80.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38207727-5a790110-36e1-11e8-9a1e-d832d43e9021.png)\r\n\r\nåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åˆç†çš„ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¯ä»¥æå¤§çš„ç®€åŒ–ä»£ç ã€‚\r\n\r\n### Task 5ï¼šLambdas\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38208268-0b78c260-36e3-11e8-837e-63e7887ef70f.png)\r\n\r\næ‰¾å¶æ•°å¾ˆç®€å•ï¼Œæ¯ä¸€ä¸ªéƒ½åˆ†åˆ«é™¤ 2 çœ‹ä½™æ•°æ˜¯å¦ä¸º 0ï¼Œä½†æ˜¯åˆšåˆšçœ‹åˆ°è¿™é“é—®é¢˜å¯èƒ½ä¼šæ‘¸ä¸ç€å¤´è„‘ï¼Œæ€ä¹ˆå†™ï¼Œè¿™ä»€ä¹ˆæ„æ€å‘€ï¼Ÿé¢˜ç›®åç§°å« Lambdasï¼ŒJava 8 ä¸­æ”¯æŒ Lambda è¡¨è¾¾å¼ï¼ŒKotlin ä¹ŸåŒæ ·æ”¯æŒï¼Œæ€ä¹ˆå†™å‘¢ã€‚å¦‚æœæƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœ€å¥½è§£å†³å‡ ä¸ªæ¦‚å¿µï¼š\r\n\r\n  - å‡½æ•°åœ¨ Kotlin ä¸­æ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆFirst-class functionï¼‰\r\n    - å‡½æ•°å¯ä»¥åƒå˜é‡ä¸€æ ·ä¼ é€’ç»™å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°ï¼ˆæŸä¸€ä¸ªå‡½æ•°æœ‰å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå˜é‡ï¼‰\r\n    - å‡½æ•°å¯ä»¥ä½œä¸ºå…¶ä»–å‡½æ•°çš„è¿”å›å€¼\r\n    - å‡½æ•°å¯ä»¥ç”¨äºç»™å˜é‡èµ‹å€¼å¯ä»¥å­˜å‚¨åœ¨æ•°æ®ç»“æ„ä¸­\r\n  - é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionsï¼‰\r\n    - å‡½æ•°ä½œä¸ºå‡½æ•°çš„å‚æ•°\r\n    - å‡½æ•°ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼\r\n  - å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional programmingï¼‰\r\n    - å‡½æ•°å¼ç¼–ç¨‹æ˜¯å’Œé¢å‘å¯¹è±¡ã€é¢å‘è¿‡ç¨‹åŒä¸€çº§åˆ«çš„ç¼–ç¨‹æ–¹æ³•æˆ–ç¼–ç¨‹æ¨¡å¼\r\n    - å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„å¿…è¦æ¡ä»¶ï¼Œç»å¸¸ç”¨åœ¨é«˜é˜¶å‡½æ•°ä¸­\r\n    - åé¢æˆ‘ä»¬ä¼šæœ‰å•ç‹¬çš„æ–‡ç« ä»‹ç»å‡½æ•°å¼ç¼–ç¨‹\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38209595-770e96ea-36e7-11e8-8af1-4bb3f6d9940a.png)\r\n\r\næˆ‘ä»¬å¯ä»¥çœ‹åˆ° any å‡½æ•°çš„å®šä¹‰ï¼Œpredicate å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª Boolean ç±»å‹çš„å€¼ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38209863-3508b194-36e8-11e8-8f49-2dd4ab2e915f.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38210322-b00910ae-36e9-11e8-876b-04f95b40a509.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38210328-b4d9b3fe-36e9-11e8-9ae0-542c1f5fa689.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38210330-b68dbdc6-36e9-11e8-914b-9de940557819.png)\r\n\r\nç®€åŒ–åˆ°æœ€åï¼Œå°±å¾ˆç®€å•äº†ã€‚æœ‰æ²¡æœ‰è§‰å¾—å‡½æ•°å¼ç¼–ç¨‹ç‰¹åˆ«ç¥å¥‡å‘¢ï¼Ÿ\r\n\r\n### Task 6ï¼šStrings\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38261883-27ff9150-379e-11e8-812a-f6c92364dfbc.png)\r\n\r\nKotlin å­—ç¬¦ä¸²å¯ä»¥åƒ Java ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸‰ä¸ªåŒå¼•å·å£°æ˜ï¼Œä¸‰ä¸ªåŒå¼•å·å£°æ˜çš„å­—ç¬¦ä¸²å…¶ä¸­å¯ä»¥åŒ…å«å¤šè¡Œã€‚å­—ç¬¦ä¸²æ¨¡æ¿å¯ä»¥å¾ˆæ–¹ä¾¿åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å˜é‡ï¼Œåˆ™è¿™ä¸ªé¢˜çš„ç­”æ¡ˆå°±æ˜¯ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38262362-95ce611a-379f-11e8-9138-fd3ccc207be6.png)\r\n\r\nè¿™é‡Œæˆ‘ä»¬ç”¨äº† `trimIndent()` æ–¹æ³•å¯¹ç¼©è¿›è¿›è¡Œæ ¼å¼åŒ–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `trimMargin()`ï¼Œå¦‚ä¸‹å›¾ï¼Œå…¶ä¸­çš„ç«–çº¿ `|` æ˜¯trimMaring é»˜è®¤æ ¼å¼åŒ–ç‰¹æ®Šå­—ç¬¦ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38262484-e7643054-379f-11e8-901e-23e48d4c3153.png)\r\n\r\n### Task 7ï¼šData classes\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38262607-4e1532bc-37a0-11e8-9f21-9ef25e3b1eef.png)\r\n\r\nDate Class æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæˆ‘ä»¬å…ˆæ¥äº†è§£ Kotlin ä¸­é›†ä¸­æ•°æ®ç»“æ„ï¼š\r\n\r\n  - Class\r\n    - ä¸ Java ç±»ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§æ•°æ®ç»“æ„\r\n    - Kotlin ä¸­çš„ Class ç»§æ‰¿è‡ª Anyï¼Œè€Œä¸æ˜¯ Object\r\n    - ç”¨å…³é”®å­— constructor å£°æ˜æ„é€ å‡½æ•°ï¼Œå¤Ÿç€å‡½æ•°å¯ä»¥æœ‰é»˜è®¤å€¼\r\n    - æ„é€ å‡½æ•°åˆ†ä¸ºä¸»æ„é€ å‡½æ•°å’ŒäºŒçº§æ„é€ å‡½æ•°ï¼Œä¸»æ„é€ å‡½æ•°è·Ÿåœ¨ç±»ååç”±å…³é”®å­— constructor å’Œå‚æ•°è¡¨å…±åŒæ„æˆï¼ŒäºŒçº§æ„é€ å‡½æ•°åœ¨ç±»ä¸­ï¼Œç”¨ constructor å’Œå‚æ•°åˆ—è¡¨æ„æˆï¼Œæ³¨æ„å¦‚æœæœ‰ä¸»æ„é€ å‡½æ•°ï¼ŒäºŒçº§å‡½æ•°å¿…é¡»è°ƒç”¨ä¸»æ„é€ å‡½æ•°ã€‚å¦‚ `constructor(name: String, parent: Person) : this(name)`ã€‚\r\n    - ä¸»æ„é€ å‡½æ•°æ— æ³•æ‰§è¡Œä»£ç ï¼Œå¦‚æœéœ€è¦æ‰§è¡Œä¸€äº›ä»£ç æ—¶ï¼Œå¯ä»¥ç”¨ `init{}` åœ¨ç±»ä¸­æ‰§è¡Œï¼Œå¯ä»¥å£°æ˜å¤šä¸ª `init{}`ï¼Œæ‰§è¡Œé¡ºåºä¸å£°æ˜é¡ºåºä¸€è‡´ã€‚\r\n    - é»˜è®¤ç±»ä¸å¯ä»¥è¢«é›†æˆï¼Œæ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™ï¼Œå¦‚æœå¸Œæœ›ç±»è¢«ç»§æ‰¿æˆ–æ–¹æ³•å¯ä»¥è¢«é‡å†™ï¼Œå¯ä»¥åœ¨ç±»æˆ–æ–¹æ³•å‰åŠ  `open` å…³é”®å­—ã€‚\r\n    - å­ç±»åœ¨é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œéœ€è¦åœ¨æ–¹æ³•å‰åŠ  `override` å…³é”®å­—\r\n    - `super` å…³é”®å­—è°ƒç”¨çˆ¶ç±»æ–¹æ³•\r\n    - `abstract` å…³é”®å­—å®šä¹‰æŠ½è±¡ç±»ï¼Œ`interface` å…³é”®å­—å®šä¹‰æ¥å£ã€‚\r\n    - æ™®é€šæƒ…å†µä¸‹ï¼Œç±»æ²¡æœ‰é™æ€æ–¹æ³•ï¼Œå¦‚æœéœ€è¦é™æ€å‘å‘æˆ–æ‰€æœ‰é™æ€å±æ€§ï¼Œéœ€è¦ç”¨ä¼´éšå¯¹è±¡ `companion object`ï¼Œç›¸å½“äºç‹¬ç«‹äºç±»å¼€è¾Ÿäº†ä¸€å—ç©ºé—´ï¼Œæ‰€æœ‰å¯¹è±¡å…±æœ‰ã€‚\r\n  - Properties and Fields\r\n    - val ä¿®æ”¹ä¸å¯æ›´æ”¹çš„å±æ€§\r\n    - var ä¿®é¥°å¯ä»¥æ›´æ”¹çš„å±æ€§\r\n    - lateinit ä¿®é¥°å»¶è¿ŸåŠ è½½çš„å±æ€§ï¼Œåœ¨éœ€è¦ç”¨çš„æ—¶å€™æ‰åˆå§‹åŒ–ã€‚\r\n  - Data Class\r\n    - æœ‰äº›æ—¶å€™ï¼Œåˆ›å»ºç±»å°±æ˜¯ä¸ºäº†è®©å…¶å¯ä»¥æœ‰å‡ ä¸ªå±æ€§ï¼ŒJava ä¸­çš„ Bean å¯¹è±¡ï¼Œè€Œåœ¨ Kotlin ä¸­ï¼Œå°†è¿™ç§æ•°æ®ç»“æ„å•ç‹¬å®šä¹‰ä¸º `data class`\r\n    - å…¶ä¸­ä¼šè‡ªåŠ¨åˆ›å»ºä¸€äº›æ–¹æ³•ï¼Œå¦‚ `copy()`ï¼Œ`equals()` ç­‰\r\n    - æˆ‘ä»¬åœ¨åé¢ä¼šæœ‰ä¸»é¢˜è®²è§£ `data class`\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38264093-91af2ad8-37a4-11e8-83d2-877d25496ff7.png)\r\n\r\nç”¨ `data class` å¯ä»¥å¾ˆç®€å•çš„å®šä¹‰æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å…¶ä¸­è‡ªåŠ¨åŒ…å«äº† get/set æ–¹æ³•ï¼Œæ˜“è¯»ä¸”æ–¹ä¾¿ã€‚\r\n\r\n### Task 8ï¼šNullable type\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38264226-f12c544a-37a4-11e8-8e3a-b19312f6e8c3.png)\r\n\r\nJava ä¸­ç»å¸¸éœ€è¦åˆ¤ç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œè·å–å…¶ä¸­æŸäº›å±æ€§å€¼ç­‰ï¼Œå†™èµ·æ¥ä¸ä¼˜é›…ï¼Œä¸”ä¸å®‰å…¨ï¼ŒKotlin ä¸­é‡‡ç”¨äº†æ›´ç®€å•çš„æ–¹å¼ã€‚\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38264563-fa13644e-37a5-11e8-9a2c-192443080f2a.png)\r\n\r\næ³¨æ„ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ Kotlin ä¸­å°±å®Œå…¨ä¸éœ€è¦å…³å¿ƒå˜é‡ä¸ºç©ºå¼•èµ·çš„é”™è¯¯ï¼Œæˆ‘ä»¬åé¢ä¼šå…·ä½“è¯¦ç»†è¯´æ˜ä¸€äº› Java ä»£ç è½¬æˆ Kotlin æˆ–ç›´æ¥ å†™ Kotlin ä»£ç å¼•èµ·çš„ä¸€äº›é”™è¯¯ï¼Œæ˜¯ä¸€ä¸ªéœ€è¦å¡«çš„å‘ã€‚\r\n\r\n### Task 9ï¼šSmart casts\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38264665-4b3466a2-37a6-11e8-8367-69fb4fda9944.png)\r\n\r\nè‡ªåŠ¨ç±»å‹è½¬æ¢æ˜¯ä¸€ä¸ªå¾ˆèªæ˜çš„ç‰¹æ€§ã€‚Kotlin ä¸­æ²¡æœ‰ switch-caseï¼Œä»£æ›¿å®ƒçš„æ˜¯ whenï¼Œè¿™é‡Œçš„ä¾‹å­æ˜¯åˆ¤æ–­ expr å…·ä½“æ˜¯å“ªä¸€ç§ç±»å‹ï¼Œè¿™é‡Œå¯ä»¥å±•ç°å‡º Kotlin å¼ºå¤§çš„æ˜¯åœ¨åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å“ªä¸€ç§ç±»å‹åï¼Œåé¢è¿™ä¸ªå˜é‡ç›´æ¥è½¬æ¢æˆè¯¥ç±»å‹ï¼Œè€Œä¸åƒ Java ä¸­éœ€è¦å¼ºè½¬ã€‚\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38264833-ce0526a2-37a6-11e8-9f34-54c051a8db90.png)\r\n\r\n### Task 10ï¼šExtension functions\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38265131-891c07ee-37a7-11e8-9e9b-fa83a01396d4.png)\r\n\r\næ‰©å±•å‡½æ•°ã€‚æœ‰äº›æ—¶å€™ï¼ŒæŸäº›ç±»åŠŸèƒ½ä¸å¤Ÿå¼ºå¤§ï¼Œä½ å¸Œæœ›æ‰©å±•è¿™ä¸ªç±»ï¼Œè€Œä½ åˆä¸èƒ½ä¿®æ”¹è¯¥ç±»çš„æºä»£ç ï¼Œå¦‚æœæ˜¯ Javaï¼Œä½ å¯èƒ½éœ€è¦ç»§æ‰¿è‡ªåŠŸèƒ½ä¸å¤Ÿå¼ºå¤§çš„ç±»ï¼Œæ·»åŠ æ–°æ–¹æ³•ï¼Œç„¶åä½¿ç”¨æ–°çš„ç±»ï¼Œè¿™æ¯”è¾ƒéº»çƒ¦ï¼Œä¹Ÿå¯èƒ½ä¼šå› ä¸ºéœ€æ±‚çš„å˜æ›´ï¼Œè¿™ä¸ªç±»è¶Šæ¥è¶Šä¸å¥½ç»´æŠ¤ã€‚Kotlin çš„æ–¹å¼æ˜¯åœ¨ä¸ä¿®æ”¹åŸæ¥çš„ç±»çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ‰©å±•æ–¹æ³•å‡ºæ–°çš„æ–¹æ³•ï¼Œä½¿ç”¨èµ·æ¥å°±åƒæ˜¯åœ¨åŸæ¥çš„ç±»ä¸­æ·»åŠ äº†æ–°çš„æ–¹æ³•ã€‚\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38265370-420e7b7e-37a8-11e8-9a2e-0c1097c169d2.png)\r\n\r\nåœ¨æ²¡æœ‰ä¿®æ”¹ Int å’Œ Pair å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»–ä»¬éƒ½æœ‰äº†è½¬æˆæœ‰ç†æ•°çš„æ–¹æ³•äº†ã€‚\r\n\r\n### Task 11ï¼šObject expressions\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38265505-b22e4998-37a8-11e8-938b-8c9a3421e424.png)\r\n\r\nå¯¹è±¡è¡¨è¾¾å¼ã€‚Kotlin çš„å¯¹è±¡è¡¨è¾¾å¼ä¸ Java ä¸­çš„åŒ¿åå†…éƒ¨ç±»å·®ä¸å¤šã€‚æœ‰äº›æƒ…å†µåªç”¨ä¸€æ¬¡çš„å¯¹è±¡ï¼Œæ²¡å¿…è¦å†™æˆä¸€ä¸ªç±»ã€‚\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38265795-791a9da4-37a9-11e8-94db-17c4da25859e.png)\r\n\r\nç®€åŒ–ä»£ç æ”¹ä¸º Lambda è¡¨è¾¾å¼ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38265760-6113d374-37a9-11e8-8ebf-25d829797d7d.png)\r\n\r\nå†ç®€åŒ–ä»£ç ï¼Œä½¿ç”¨ Kotlin stdlibï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38265762-61defc66-37a9-11e8-8e19-262e7b25c1c4.png)\r\n\r\näº†è§£è¶Šå¤š Kotlin stdlib ä¸­çš„æ–¹æ³•ï¼Œå†™ä»£ç è¶Šå¿«ï¼Œæ•ˆç‡è¶Šé«˜ã€‚\r\n\r\n### Task 12ï¼šExtension functions on collections\r\n\r\nKotlin åœ¨é›†åˆç±»ä¸­åšäº†å¤§é‡çš„ä¼˜åŒ–ï¼Œæä¾›äº†å¤§é‡çš„æœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™é‡Œæ’åºå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚\r\n\r\n```\r\n/**\r\n * Returns a list of all elements sorted descending according to their natural sort order.\r\n */\r\npublic fun <T : Comparable<T>> Iterable<T>.sortedDescending(): List<T> {\r\n    return sortedWith(reverseOrder())\r\n}\r\n```\r\n\r\nKotlin æä¾›äº†è‡ªç„¶åºçš„å‡åºé™åºæ’åºæ–¹æ³•ï¼š`sortedDescending`\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38266361-191bb59e-37ab-11e8-9b3a-894e52077e24.png)\r\n\r\n### Task 13ï¼šComparison\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38266502-6b5299ae-37ab-11e8-8d6e-c928b67fec7f.png)\r\n\r\næˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±» MyDateï¼Œæˆ‘ä»¬ç°åœ¨ç›´æ¥ç”¨ `<` å¯¹è¿™ä¸ªç±»çš„å¯¹è±¡æ¯”è¾ƒå¤§å°ã€‚æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªå¯¹è±¡å®šä¹‰æ¯”è¾ƒå¤§å°æ“ä½œç¬¦ï¼Œåˆ™åªéœ€é‡å†™ compareTo æ–¹æ³•å°±å¯ä»¥äº†ã€‚\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38266891-73b5a9d2-37ac-11e8-8fbe-ccf88e1a1fb2.png)\r\n\r\n### Task 14ï¼šTask In range\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38267005-ba745bac-37ac-11e8-90ed-8fd5f1b6172f.png)\r\n\r\næœ‰äº†ä¸Šé¢çš„ç»éªŒï¼Œè¿™é‡Œåªéœ€äº†è§£ in æ“ä½œç¬¦æ˜¯è°ƒç”¨çš„ contains æ–¹æ³•å°±å¯ä»¥äº†ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38267150-30fc8b78-37ad-11e8-8621-c940f75093ef.png)\r\n\r\nç®€å†™æˆï¼ˆå…¶ä¸­ `..` å°±æ˜¯æ‰§è¡Œ `rangeTo` æ–¹æ³•ï¼‰ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38267154-3168ca9a-37ad-11e8-99c8-dc5f3ed0dede.png)\r\n\r\n### Task 15ï¼šRange to\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38290036-d9de90de-380b-11e8-8123-2b939420fe45.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38290082-1075fc86-380c-11e8-89df-c8b41ad9b006.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38290273-099f5154-380d-11e8-8743-511074c45d16.png)\r\n\r\næˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªä»»åŠ¡ä¸­ï¼Œæœ‰ç¼–è¯‘å™¨è‡ªåŠ¨æç¤ºä½¿ç”¨äº† `in - ..` æ“ä½œç¬¦ï¼Œæˆ‘ä»¬ç‚¹è¿›å»çœ‹çœ‹ï¼Œå‘ç°å…¶å®å°±æ˜¯æ‰§è¡Œäº† `rangeTo` æ–¹æ³•ï¼Œè¿™ä¸€ä¸ªä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å°±éœ€è¦å®ç° `rangeTo` æ–¹æ³•å°±å¯ä»¥ï¼Œ`rangeTo` æ–¹æ³•è¿”å›å€¼æ˜¯ `ClosedRange`ï¼Œè€Œ `ClosedRange` éœ€è¦å¯¹è±¡å®ç°æ¯”è¾ƒå¤§å° `compareTo` æ–¹æ³•ï¼Œæ°å¥½æˆ‘ä»¬ä¸Šä¸€èŠ‚ä¸­å·²ç»åœ¨ MyData ä¸­å®ç°äº† compareToï¼Œæ°å¥½ DateRange å®ç°äº† ClosedRangeï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œç»“æœå¦‚ä¸‹ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38289989-a37a73f0-380b-11e8-8281-6004ed80cec4.png)\r\n\r\nè¿™ä¸ªä»»åŠ¡æ¯”è¾ƒå¤æ‚ï¼Œä½†æ˜¯é€»è¾‘æ˜¯å¾ˆæ¸…æ™°çš„ã€‚\r\n\r\n### Task 16ï¼šFor loop\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38290472-ed182d3e-380d-11e8-89ad-170574cb4f4b.png)\r\n\r\nFor å¾ªç¯éœ€è¦è¿­ä»£å™¨ï¼ŒDateRange éœ€è¦å®ç° Iterableï¼Œåˆ™é—®é¢˜å°±ç®€å•äº†ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38469818-59c374b6-3b8d-11e8-845d-2cf467ace0cf.png)\r\n\r\nå½“ç„¶ï¼Œå¯ä»¥ä¼˜åŒ–ä»£ç ï¼š\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38469851-cc465de6-3b8d-11e8-8ef6-9b482d23c6e4.png)\r\n\r\nFor å¾ªç¯å°±æ˜¯è¿­ä»£å™¨çš„éå†ã€‚\r\n\r\n### Task 17ï¼šOperators overloading\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38469863-fa6632b4-3b8d-11e8-8953-46822a7e4c77.png)\r\n\r\n`+` æ“ä½œç¬¦ï¼Œå…¶å®å°±æ˜¯å®ç° `plus` æ–¹æ³•ã€‚`*` æ“ä½œç¬¦å°±æ˜¯å®ç° `times` æ–¹æ³•\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38470065-575ea4a4-3b90-11e8-8ff2-685514a3d3d0.png)\r\n\r\n### Task 18ï¼šDestructuring declarations\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38470103-db98986a-3b90-11e8-9c00-6f723659a5ea.png)\r\n\r\nå¯ä»¥å°†å¯¹è±¡å±æ€§å€¼èµ‹å€¼ç»™å…¶ä»–å¯¹è±¡ï¼Œè¦æ±‚è¿™ä¸ªå¯¹è±¡å¿…é¡»ç”± data ä¿®é¥°ã€‚\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38470104-dc3c3c5e-3b90-11e8-9b4b-ae80520cc56b.png)\r\n\r\n### Task 19ï¼šInvoke\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38470180-9816af2c-3b91-11e8-8d10-5bd5fa68b916.png)\r\n\r\n![å›¾ç‰‡](https://user-images.githubusercontent.com/7275046/38470181-98dc25a4-3b91-11e8-8e71-1fc878e446bc.png)\r\n\r\n# å°ç»“\r\n\r\næœ¬æ–‡ä¸»è¦äº†è§£äº†ä¸€äº› Kotlin çš„å…·ä½“å®ç°æ–¹æ³•ï¼Œå¯¹çœŸæ­£å†™ Kotlin ç¨‹åºææœ‰å¥½å¤„ã€‚\r\n\r\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€åŠçš„ä»»åŠ¡ï¼Œä¸ºé¿å…ç¯‡å¹…è¿‡é•¿ï¼Œä¸‹é¢çš„ä»»åŠ¡æˆ‘ä»¬åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç»§ç»­è®¨è®ºã€‚\r\n\r\n---\r\nå¦‚æœæœ‰ä¸€å¤©ä½ è§‰å¾—è¿‡çš„èˆ’æœäº†ï¼Œä½ å°±è¦å°å¿ƒäº†ï¼æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šæˆ‘æ˜¯ä»»ç‰ç¢\r\n\r\n![qrcode_for_gh_45402a07f7d9_258](https://user-images.githubusercontent.com/7275046/37878351-56acaf0c-309a-11e8-8d8d-10255972a59f.jpg)\r\n"},{"number":24,"title":"ã€ç”¨ Kotlin å†™ Androidã€‘æœ‰è¿™ä¸ªå¿…è¦å—ï¼Ÿ","created_at":"2018-03-25 18:07:10","body":"### å‰è¨€\r\n\r\n  Kotlin è¢« Android é€‰ä¸ºå®˜æ–¹æ”¯æŒå¹¶æ¨èçš„è¯­è¨€æ»¡ä¸€å¹´äº†ï¼Œè¿™ä¸€å¹´ä¸­å¯ä»¥çœ‹è§çš„æ˜¯ Google æ­£åœ¨å¤§åŠ›æ¨å¹¿ Kotlinï¼Œå¹¶ä¸”ç›¸å…³çš„ Kotlin æ”¯æŒåº“ä¹Ÿé¢‘ç¹æ›´æ–°ï¼Œå¯ä»¥é¢„è§çš„æ˜¯åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…ï¼ŒKotlin ä¼šè¢«è¶Šæ¥è¶Šå¤šçš„æåŠï¼Œå¹¶ä¸”ä¹Ÿä¼šè¢«è¶Šæ¥è¶Šå¤šçš„é‡‡ç”¨ï¼Œé‚£ä½œä¸ºä¸€ä¸ªäº’è”ç½‘ä»ä¸šè€…â€”â€”ä¸€æ—¥ä¸å­¦ä¹ å°±ä¼šè¢«æ·˜æ±°çš„çš„è¡Œä¸šçš„ä»ä¸šè€…ï¼Œé‚£ä¹ˆæ˜¯å¦ Android å¼€å‘å°±åº”è¯¥ç«‹åˆ»å»é‡‡ç”¨ Kotlin å¼€å‘å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¸€å®šï¼Œè¦è§†æƒ…å†µè€Œå®šï¼Œä½†å¯ä»¥ç¡®å®šçš„æ˜¯ï¼Œç°åœ¨æ˜¯è¦æ·±å…¥å»ç ”ç©¶ Kotlin çš„æ—¶é—´äº†ï¼Œè‡³äºåŸå› ï¼Œä¸‹é¢ä¼šä»”ç»†åˆ†æã€‚æœ¬ç³»åˆ—æ–‡ç« ï¼Œå°±æ˜¯æ·±å…¥åˆ†æ Kotlin çš„æ•™ç¨‹ç³»åˆ—ï¼Œæ¬¢è¿åœ¨åå°ç•™è¨€äº¤æµã€‚ä¸‹é¢æˆ‘ä»¬å°†å¼€å§‹æˆ‘ä»¬çš„å­¦ä¹ ä¹‹æ—…ï¼Œå¸Œæœ›ä½ ä¸ä¼šä¸­é€”æ”¾å¼ƒï¼\r\n\r\n# ã€ç”¨ Kotlin å†™ Androidã€‘æœ‰è¿™ä¸ªå¿…è¦å—ï¼Ÿ\r\n\r\n**ç­”æ¡ˆæ˜¯ä¸ä¸€å®šã€‚**\r\n\r\nä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å…ˆå›ç­”ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬ç°åœ¨çš„ç°æœ‰çš„é¡¹ç›®æ˜¯å¦éƒ½åº”è¯¥æ”¹ç”¨ Kotlin å»å†™ï¼Ÿæ–°é¡¹ç›®å’Œè€é¡¹ç›®é€‰æ‹©èµ·æ¥æœ‰åŒºåˆ«å—ï¼Ÿæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š\r\n\r\n  1. è€é¡¹ç›®ä¸æ˜¯å¿…è¦çš„ï¼›\r\n  2. æ–°é¡¹ç›®å¦‚æœæœ‰å¤§é‡ä»£ç å¤ç”¨ä»¥å‰çš„ä»£ç è€Œä¸æ˜¯ä»¥ä¾èµ–çš„æ–¹å¼å¼•å…¥çš„è¯ï¼Œå¯ä»¥å¼•å…¥ Kotlinï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·å¹²ï¼›\r\n  3. è€Œå¯¹äºæ–°é¡¹ç›®ï¼Œä¸”å¯¹äºå¯é¢„è§çš„ä¸€æ®µæ—¶é—´å†…ï¼Œç»´æŠ¤è¿™ä¸ªé¡¹ç›®çš„äººéƒ½èƒ½æ¯”è¾ƒå¥½çš„é‡‡ç”¨ Kotlin æ¥ç»´æŠ¤çš„è¯ï¼Œè¿™ä¸ªé¡¹ç›®å°±å»ºè®®é‡‡ç”¨ Kotlin æ¥å†™ã€‚\r\n\r\nä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„ç»“è®ºï¼Ÿè¿™ä¸ªå¬æˆ‘æ…¢æ…¢è§£é‡Šã€‚\r\n\r\né¦–å…ˆï¼Œå¦‚æœè¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¹…ä¸€ç‚¹çš„é¡¹ç›®ï¼Œä»¥å‰é‡‡ç”¨äº†çš„æ˜¯åŸç”Ÿ Java æ¥å†™çš„è¯ï¼Œç»è¿‡äº†è¿™ä¸ªé•¿æ—¶é—´çš„ç»´æŠ¤æ¼”å˜æˆ‘ç›¸ä¿¡å¾ˆå¤§çš„å¯èƒ½è¿™ä¸ªé¡¹ç›®ç»è¿‡å¾ˆå¤šä¸ªäººä¿®æ”¹ï¼Œä¸šåŠ¡é€»è¾‘ä¹Ÿå¾ˆå¤æ‚äº†ï¼Œå¾ˆå¯èƒ½ç»´æŠ¤èµ·æ¥éƒ½æ²¡æœ‰é‚£ä¹ˆç®€å•äº†ï¼Œç†æ¸…é‡Œé¢çš„é€»è¾‘éƒ½æ²¡æœ‰é‚£ä¹ˆç®€å•äº†ï¼Œæ›´åˆ«è¯´å°†å…¶è½¬æ¢æˆ Kotlin æ¥å†™äº†ï¼Œå¦‚æœç”¨ Android Studio ä¸­è‡ªå¸¦çš„è½¬æ¢å·¥å…·å»è½¬æ¢ï¼Œå¾ˆå¤§çš„å¯èƒ½æ˜¯è½¬æ¢åï¼Œæœ‰å‡ åå‡ ç™¾çš„æ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼Œç©ºæŒ‡é’ˆçš„åˆ¤å®šéƒ½éœ€è¦é‡æ–°æ£€æŸ¥ä¸€éï¼Œå¦åˆ™ç¼–è¯‘éƒ½å¾ˆéš¾é€šè¿‡ï¼Œä½•å†µç”±äº Java å’Œ Kotlin è¯­æ³•ç³–ä¸ä¸€è‡´ï¼Œå’Œå¯èƒ½åœ¨è½¬æ¢ååŒç­‰æ›¿æ¢çš„ä»£ç éƒ½å¯èƒ½æ— æ³•æŒ‰é¢„æœŸæ‰§è¡Œï¼Œå¸¸è§çš„é‡è½½å‰åéƒ½æœ‰å¯èƒ½è°ƒç”¨ä¸åŒçš„æ–¹æ³•(è¿™ä¸ªåœ¨åé¢çš„æ–‡ç« ä¼šæœ‰è§£æ)ã€‚æ›´ä¸è¦è¯´å…¶ä¸­æœ€éš¾ç†è§£çš„ä¸šåŠ¡é€»è¾‘äº†ï¼Œå¦‚æœçœŸçš„è½¬æ¢äº†ï¼Œé‚£çœŸçš„æ˜¯å™©æ¢¦ä¸€åœºï¼Œä¼šéå¸¸ç—›è‹¦ï¼å¯¹äºå«æœ‰å¤åˆ¶ä¸šåŠ¡é€»è¾‘çš„ä»£ç ï¼Œå¦‚æœä¸æƒ³ä¸€å‘¨ä¸çœ ä¸ä¼‘çš„åŠ ç­ï¼Œé‚£å°±ä¸è¦è¿™æ ·å¹²ã€‚åŒæ—¶åœ¨å¤šäººç»´æŠ¤çš„é¡¹ç›®ä¸­ï¼Œè´¸ç„¶è½¬æ¢ï¼Œå¾ˆéš¾å»ä¿è¯ä»¥å‰ Java ä»£ç å†™çš„å¾ˆå¥½çš„äºº Kotlin ä¹Ÿèƒ½å†™çš„å¾ˆå¥½ï¼Œä½•å†µæœ‰äº›äººè¿˜ä¸æ‰“ç®—è½¬ç”¨ Kotlinï¼Œè°èƒ½ä¿è¯è½¬äº†ä¹‹åä¸ä¼šå¼•å‘è¡€æ¡ˆå‘¢ï¼Ÿ\r\n\r\nå…¶æ¬¡æ˜¯æ–°é¡¹ç›®å¤ç”¨å¾ˆå¤šè€é¡¹ç›®çš„ä»£ç ï¼Œè¦ä¸è¦å¼•å…¥ Kotlinï¼Ÿå¦‚æœä½ é—®è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘çŒœæµ‹ä½ æ‰€åœ¨çš„å…¬å¸æ˜¯ä¸€äº›è§„æ¨¡ä¸æ˜¯å¾ˆå¤§çš„å…¬å¸ï¼ŒåŒæ—¶å¼€å‘å¤šä¸ª APPï¼Œè€Œä½ åˆæ°å¥½æ˜¯è¿™äº›å¼€å‘ä¸­æ¯”è¾ƒæœ‰å½±å“åŠ›æˆ–è€…è¯´æ˜¯ä¸­åšåŠ›é‡çš„é‚£ä¸€ä¸ªäººï¼Œä½ ä¼šè€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœè€ƒè™‘å®é™…æƒ…å†µï¼Œå…¶å®æœ‰å¯èƒ½æ˜¯å¯ä»¥å¼•å…¥ Kotlin çš„ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸Šé¢è®¨è®ºçš„é—®é¢˜ï¼Œå¼•å…¥é‚£äº›è€ä»£ç ï¼Œä¸å¯é¢„çŸ¥ä¼šä¸ç°åœ¨çš„ Kotlin ä»£ç ä¹‹é—´ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿä¸Šé¢è¯´çš„é—®é¢˜éƒ½è¿˜æ˜¯å­˜åœ¨çš„ï¼Œä¸è¿‡å› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå› æ­¤è€ä»£ç çš„å¼•å…¥æ˜¯ä¸€æ­¥ä¸€æ­¥è¿›è¡Œçš„ï¼Œæ–°å†™çš„ä»£ç é‡‡ç”¨ Kotlinï¼Œè€ä»£ç åœ¨å¼•å…¥çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¯ä»¥é€æ­¥è½¬æ¢æˆ Kotlin çš„ï¼Œæˆ–è€…å³ä½¿ä¸è½¬æ¢æˆ Kotlinï¼Œä¸¤ç§ä»£ç å…±å­˜ï¼Œé£é™©ä¹Ÿæ˜¯å¯æ§çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸€å®šé˜µç—›æœŸï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µï¼Œçœ‹å›¢é˜Ÿç´ è´¨è¿›è¡Œå†³å®šï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„ç†ç”±è½¬æ¢æˆ Kotlinï¼Œé‡‡ç”¨åŸæ¥çš„ä»£ç æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä¹Ÿæ˜¯æˆ‘è®¤ä¸ºæœ€å¥½çš„é€‰æ‹©ï¼Œæ¯•ç«Ÿï¼Œè¿™æ ·çš„è¯ï¼Œæ‹›äººä¹Ÿä¼šå¥½æ‹›ä¸€ç‚¹ã€‚\r\n\r\næœ€åæ˜¯ä¸€ä¸ªå…¨æ–°æˆ–æ¥è¿‘å…¨æ–°çš„é¡¹ç›®ï¼Œè¦ä¸è¦ç”¨ Kotlinï¼Œæˆ‘çš„ç­”æ¡ˆæ˜¯å¦‚æœå¯èƒ½ï¼Œå°½é‡ç”¨ Kotlinã€‚ä¸ºä»€ä¹ˆå‘€ï¼Ÿæˆ‘è§‰å¾—æœ‰å‡ ç‚¹åŸå› å§ï¼š\r\n\r\n  1. ä¸ç®¡ä½ å–œä¸å–œæ¬¢ï¼Œæœªæ¥å¾ˆå¤§å¯èƒ½æ˜¯ Kotlin ä»£æ›¿ Javaï¼Œ**Google å·²ç»å†³å®šè¦è¿™ä¹ˆå¹²äº†**ï¼ŒAndroid è¿˜æ˜¯ä»–çš„äº²å„¿å­ï¼Œé‚£ä»¥å Android å¯¹ Kotlin çš„æ”¯æŒä¼šè¶Šæ¥è¶Šå¥½ï¼Œä½ ä¸é‚£ä¹ˆå¹²ï¼Œåªä¼šè‡ªè®¨è‹¦åƒï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„å®åŠ›ï¼Œä¸è¦ä¸ä»–ä½œå¯¹ï¼\r\n  2. Kotlin ç¡®å®æœ‰å¾ˆå¤šä¼˜ç§€çš„ç‰¹æ€§ï¼Œæ²¡æœ‰ Java è¯­è¨€çš„å†å²åŒ…è¢±ï¼ŒåŒ…å«äº†å¾ˆå¤šä¼˜ç§€çš„ç¼–ç¨‹æ€æƒ³ï¼Œå°¤å…¶æ˜¯ Kotlin çš„ **å‡½æ•°å¼ç¼–ç¨‹** çš„æ€æƒ³ï¼Œç¡®å®è®©å¼€å‘æ›´å¼€å¿ƒäº†å¾ˆå¤šã€‚\r\n  3. å‡å°‘äº†ä¸€äº›æœ¬æ¥å°±æ²¡æœ‰é‚£ä¹ˆå¤šå¿…è¦çš„æ¨¡æ¿ä»£ç ï¼Œç©ºæŒ‡é’ˆåˆ¤æ–­ï¼Œ**æé«˜å¼€å‘æ•ˆç‡**ï¼Œè¿™ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ã€‚\r\n  4. å¾ˆå¤šè¯­æ³•ç³–æ›´æ¥è¿‘è‡ªç„¶è¯­è¨€ã€‚è®°å¾—æˆ‘å­¦ä¹ ç¼–ç¨‹çš„æ—¶å€™ï¼Œæœ€å¼€å§‹å­¦ä¹ ä¼ªä»£ç ï¼Œç„¶åè„±ç¦»ä¼ªä»£ç å»å†™ Javaï¼ŒKotlin åœ¨å¾ˆå¤šæ–¹é¢æ¯” Java æ›´æ¥è¿‘ä¼ªä»£ç ï¼Œæ›´æ¥è¿‘äººç±»è‡ªç„¶è¯­è¨€ï¼Œè¿™æ˜¯å·¨å¤§çš„è¿›æ­¥ã€‚\r\n  5. å®‡å®™ç¬¬ä¸€ IDE å…¬å¸ IDEA å¼€å‘çš„ Kotlinï¼Œæœªæ¥å†™ Kotlin ä»£ç ä¼šæ¯” Java æ›´çˆ½ã€‚\r\n  6. **Jake Wharton åŠ å…¥ Google Kotlin å›¢é˜Ÿ**ã€‚è¿™ä¹Ÿè®¸ä¸åº”è¯¥ç®—æ˜¯ä¸€ä¸ªç†ç”±ï¼Œä½†ä¸å¾—ä¸æ‰¿è®¤é‚£äº› Android é¢†åŸŸæœ€èªæ˜çš„å¤§è„‘éƒ½åœ¨ä¸º Kotlin å‘å±•è´¡çŒ®ç€åŠ›é‡ï¼Œå°±ç®—æ˜¯ä¸ºäº†å­¦ä¹ ï¼Œä¸ºäº†æ¥è¿‘ä»–ä»¬ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰ç†ç”±ä¸å»å­¦ä¹  Kotlinã€‚\r\n\r\nè¯´äº†è¿™ä¹ˆå¤šï¼Œæ˜¯æ—¶å€™è¦å›å½’ä¸»é¢˜äº†ï¼Œç”¨ Kotlin å†™ Android æœ‰æ²¡æœ‰å¿…è¦ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¸€å®šï¼Œéœ€è¦å…·ä½“å»æ ¹æ®é¡¹ç›®æƒ…å†µå»å†³å®šã€‚ä½†å¯ä»¥ç¡®å®šçš„æ˜¯å­¦ä¹  Kotlin æ˜¯æœ‰å¿…è¦çš„ï¼Œæƒ³ç»§ç»­ä»äº‹ Android å¼€å‘ï¼ŒKotlin å¿…é¡»è¦å­¦ã€‚\r\n\r\nKotlin è¦å­¦ä¹ åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼ŸKotlin å®˜ç½‘ä¸Šè¯´ï¼Œå¦‚æœä½ ä»¥å‰ç”¨ Java å¼€å‘ Androidï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨ Kotlin å¼€å‘ï¼Œæˆ‘è§‰å¾—è¿™è¯´çš„æ²¡é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœè¯´æƒ³ç”¨å¥½ Kotlinï¼Œé‚£è¿™ä¸ªé—®é¢˜å°±æ²¡é‚£ä¹ˆç®€å•äº†ï¼Œä»–æ˜¯æ€ç»´æ–¹å¼çš„å˜åŒ–ï¼ŒKotlin å»ºè®®é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹ï¼Œè¿™ä¸ Java çš„é¢ç›¸å¯¹è±¡ç¼–ç¨‹æœ‰å¾ˆå¤§çš„ä¸åŒã€‚æˆ‘çœ‹è¿‡çš„æœ€ç»å…¸ä¾‹å­æ˜¯ï¼šç¬¬ä¸€æ¬¡å­¦ä¹  Java å°±æƒ³åˆšå¼€å§‹å­¦ä¹ å¼€è½¦ï¼Œæ„Ÿè§‰åˆ«äººå¾ˆå®¹æ˜“ï¼Œä½†çœŸæ­£è‡ªå·±å»å¼€è½¦çš„æ—¶å€™å°±å‘ç°æ²¡æœ‰é‚£ä¹ˆç®€å•äº†ï¼Œä½ éœ€è¦ä¸€ç‚¹ä¸€ç‚¹çš„è¡¥å……è‡ªå·±çš„çŸ¥è¯†ï¼Œä»åˆšå¼€å§‹åªå¯ä»¥åœ¨æ‘å­é‡Œå¼€ä¸€å¼€ï¼Œåˆ°æ‹¿åˆ°é©¾ç…§å¯ä»¥å»ä»»ä½•ä½ æƒ³å¼€è½¦å»çš„åœ°æ–¹ï¼Œè¿™ç»å†äº†åˆ»è‹¦çš„ç»ƒä¹ ã€‚Java ç‰ˆæœ¬çš„å‡çº§ï¼Œå°±ç›¸å½“äºæœ‰ä¸€å¤©ä½ çš„è½¦å¼€çš„å¤ªä¹…äº†ï¼Œä½ ä¹°äº†ä¸€è¾†æ–°è½¦ï¼Œä½ å¯èƒ½ä¸€å¼€å§‹ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œä½†æ˜¯å½“ä½ åä¸Šè½¦ï¼Œç®€å•æ£€æŸ¥äº†ä¸€ä¸‹è½¬å‘ç¯ï¼Œå–‡å­åœ¨ä»€ä¹ˆä½ç½®å¦‚ä½•å»ä½¿ç”¨åï¼Œä½ å°±å¯ä»¥ç›´æ¥å¼€èµ°äº†ï¼Œå› ä¸ºå¾ˆå¯èƒ½åœ¨å¼€å§‹çš„æ—¶å€™ä½ ä¸éœ€è¦é‚£äº›æ–°çŸ¥è¯†å°±å¯ä»¥æŠŠè½¦å¼€å›å®¶ï¼Œæ’­æ”¾éŸ³ä¹çš„åŠŸèƒ½ä»¥åä½ å¯ä»¥æ…¢æ…¢å»äº†è§£ã€‚ä½†æ˜¯å¦‚æœä½ ä½¿ç”¨ Kotlin å¯å°±ä¸æ˜¯æ¢è½¦é‚£ä¹ˆç®€å•äº†ï¼Œè€Œæ˜¯è¯´ä½ ç°åœ¨è¦å»å¼€é£æœºäº†ï¼å•Šï¼Œé£æœºï¼Œè¿™å°±éº»çƒ¦äº†ï¼Œä½ éƒ½ä¸çŸ¥é“é£æœºçš„å€’æŒ¡åœ¨å“ªé‡Œï¼Œæ€ä¹ˆåŠå‘€ï¼Ÿä½†æ˜¯å½“ä½ ç†è§£äº†é£æœºåœ¨å¤©ä¸Šä¸å¯èƒ½å€’ç€é£çš„æ—¶å€™ï¼Œä½ å°±çŸ¥é“å€’æŒ¡å…¶å®å¯¹é£æœºé£è¡Œæ˜¯æ²¡æœ‰å¸®åŠ©çš„ã€‚è¿™å°±æ˜¯ä¸¤ç§æ€ç»´æ–¹å¼çš„å˜åŒ–ã€‚è¿™ä¸ªä¾‹å­æ¥è‡ªäºï¼š[So You Want to be a Functional Programmer (Part 1)](https://goo.gl/57JgyE)ï¼Œé£æœºå¯ä»¥åœ¨é™†åœ°ä¸Šå…¶å®æ˜¯å¯ä»¥å€’ç€èµ°çš„é”…æˆ‘ä¸èƒŒã€‚\r\n\r\nè¯´äº†è¿™ä¹ˆå¤šï¼Œæœ€åç¿»è¯‘ä¸€ä¸‹ Kotlin å®˜ç½‘ä¸Šè¯´çš„ Kotlin ç›¸æ¯”è¾ƒ Java å¼€å‘çš„ä¼˜åŠ¿å§ï¼š\r\n\r\n  - å…¼å®¹æ€§å¥½ï¼šKotlin ç”± Java 6 ç¼–è¯‘ï¼Œè€æ‰‹æœºä¸Šä¹Ÿå¯ä»¥å¾ˆå¥½çš„è¿è¡Œã€‚\r\n  - æ€§èƒ½å¥½ï¼šKotlin å’Œ Java éƒ½æ˜¯è¿è¡Œåœ¨ JVM ä¸Šï¼Œéƒ½ä¼šè¢«ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œå› æ­¤æœ‰åŒæ ·å¥½çš„è¿è¡Œé€Ÿåº¦ã€‚åŒæ—¶ç”±äºæ”¯æŒå†…è”å‡½æ•°ã€lambdasï¼Œæœ‰äº›æ—¶å€™è¿è¡Œèµ·æ¥æ¯”ç”¨ Java å†™çš„ä»£ç æ›´å¿«ã€‚\r\n  - äº’æ“ä½œæ€§ï¼šä¸ Java 100% å…¼å®¹ï¼Œå¯ä»¥äº’ç›¸è°ƒç”¨ï¼Œä»¥å‰çš„åº“å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè¿™ç§è¯ä¸èƒ½ä¿¡ï¼Œæœ‰äº›æƒ…å†µæœ‰äº›å‘ï¼Œéœ€è¦ç¨‹åºçŒ¿ä¿è¯ï¼Œæœ¬ç³»åˆ—ä¹‹åçš„æ–‡ç« ä¼šä»‹ç»å¸¸è§çš„ä¸€äº›å‘ï¼‰\r\n  - ä½“ç§¯ï¼šå¾ˆå°çš„è¿è¡Œå…¼å®¹åº“ï¼Œå¯ä»¥ä½¿ç”¨æ··æ·† ProGuardï¼Œåœ¨åº”ç”¨ä¸­åªå¢åŠ äº†å‡ ç™¾ä¸ªå‡½æ•°ï¼Œå°‘äº 100k çš„å¤§å°ï¼ˆè¿™æ˜¯å®˜æ–¹æ•°æ®ï¼Œä»£è¡¨çœŸå®æƒ…å†µï¼Œæ¯•ç«Ÿä½ å¯èƒ½è¿˜ä¼šå¼•å…¥ä¸€äº› Kotlin ç›¸å…³çš„å…¶ä»–ä¼˜ç§€çš„åº“ï¼Œæ¯”å¦‚ Ankoï¼‰\r\n  - ç¼–è¯‘æ—¶é—´ï¼šç¼–è¯‘çš„æ—¶å€™ä¼šæœ‰é¢å¤–çš„æ¸…ç†æ—¶é—´ï¼Œä¸è¿‡å¢é‡ç¼–è¯‘å¾€å¾€å’Œ Java å·®ä¸å¤šç”šè‡³å¥½äº Java\r\n  - å­¦ä¹ æ›²çº¿ï¼šæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œæœ‰ç›¸å…³æ’ä»¶ï¼Œå‡ è¡Œä»£ç å¯ä»¥æå®šï¼ˆAndroid Studio é»˜è®¤åˆ›å»ºé¡¹ç›®æ—¶å¯ä»¥ç›´æ¥é€‰æ‹©æ”¯æŒ Kotlinï¼Œä½†æ˜¯å¦‚æœæƒ³ç”¨å¥½ Kotlinï¼Œè¿˜æ˜¯éœ€è¦ä»”ç»†å­¦ä¹ çš„ï¼Œæ‰€æœ‰è¯­è¨€éƒ½ä¸€æ ·ï¼Œæƒ³ç”¨å¥½ Java ä¹Ÿæ²¡é‚£ä¹ˆå®¹æ˜“ï¼‰\r\n\r\n## æ€»ç»“\r\n\r\nå‰é¢å•°å—¦çš„è¯è¯´å®Œäº†ï¼Œæ€»ç»“èµ·æ¥å°±æ˜¯ä¸ç®¡ä½ ç”¨ä¸ç”¨ï¼Œæ˜¯æ—¶å€™è¯¥å¼€å§‹å­¦ä¹  Kotlin äº†ï¼Œ**ã€ç”¨ Kotlin å†™ Androidã€‘**ç³»åˆ—ä¹Ÿæ­£å¼å¼€å¯ã€‚PSï¼šæˆ‘ä¹Ÿéœ€è¦æ›´å¤šçš„å‡†å¤‡æ‰èƒ½å†™å¥½è¿™ä¸ªç³»åˆ—ï¼Œä¸€èµ·åŠ æ²¹ï¼ï¼\r\n\r\n**Are You Ready? Go!**\r\n\r\nå‚è€ƒé“¾æ¥ï¼š\r\n- å‡½æ•°ç¼–ç¨‹å¼€å‘è€…ï¼šhttps://goo.gl/57JgyE\r\n---\r\nå¦‚æœæœ‰ä¸€å¤©ä½ è§‰å¾—è¿‡çš„èˆ’æœäº†ï¼Œä½ å°±è¦å°å¿ƒäº†ï¼æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šæˆ‘æ˜¯ä»»ç‰ç¢\r\n![qrcode_for_gh_45402a07f7d9_258](https://user-images.githubusercontent.com/7275046/37878351-56acaf0c-309a-11e8-8d8d-10255972a59f.jpg)\r\n"},{"number":22,"title":"åŠ ç­çš„æ€è€ƒ","created_at":"2017-12-07 02:44:36","body":"## å‰è¨€\r\n\r\nè¿™å‘¨è¦å‘ç‰ˆæœ¬ï¼Œæ²¡é—®é¢˜ï¼Œç”±äºå·¥ä½œé‡å¤ªå¤§ï¼ŒåŠ ä¸Šè‡ªå·±æ•ˆç‡ä¸è¶³ä»¥è½»æ¾å®Œæˆæ­¤å·¥ä½œï¼Œé‚£å°±åªèƒ½åŠ ç­äº†ï¼Œå½“ç„¶ï¼Œä¸æ˜¯æˆ‘è‡ªå·±ï¼Œæ˜¯æˆ‘ä»¬çš„å° Bossã€Team æˆå‘˜å’Œä¸¤ä¸ªæµ‹è¯•ã€‚ä¸€ç›´å¼„åˆ°äº†å‡Œæ™¨ä¸‰ç‚¹åŠï¼Œæœ‰ç‚¹ç´¯ã€‚æ˜å¤©æ˜¯å‘¨å…­ï¼Œæˆ–è€…è¯´ä»Šå¤©æ˜¯å‘¨å…­ï¼Œä¸€ä¼šå°±éœ€è¦å»æ‰¾æˆ‘çš„å¥³ç¥å»äº†ï¼Œè¿™ä¸€å¤©è§åˆ°å¥¹è‚¯å®šå¯å¼€å¿ƒï¼Œé‚£å°±å›å®¶ç¡ä¸¤ä¸ªå°æ—¶ç„¶åå»å§ã€‚å¯æ˜¯é—®é¢˜æ˜¯åˆ°å®¶é‡Œå¼€ä¸å¼€é—¨äº†ï¼Œè¢«å®¤å‹åé”äº†ï¼Œè¿™é˜²ç›—æ„è¯†è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œä¸è¿‡æˆ‘æ€ä¹ˆè¿›å»å‘€ï¼é—¨é“ƒä¹Ÿæ²¡ä»€ä¹ˆååº”ã€‚å¸­åœ°è€Œåï¼Œç”¨ç”µè„‘è¿ WiFi å†™ç‚¹è¿™å‘¨å·¥ä½œçš„ä¸€ç‚¹å…³äºç¨‹åºå‘˜çš„ä¸€ç‚¹æ€è€ƒå§ã€‚\r\n\r\n## æ­£æ–‡\r\n\r\n### æ€ä¹ˆå»è€ƒè™‘å°†è¦åšçš„åŠŸèƒ½ï¼Ÿ\r\n\r\nä»€ä¹ˆæ„æ€ï¼Ÿæ ¹æ®ç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯ã€å¤§é‡ç”¨æˆ·æ•°æ®çš„ä½¿ç”¨ä¹ æƒ¯åˆ†æï¼ŒåŠ ä¸Šäº§å“ç»ç†å¯¹äº§å“çš„å®šä¹‰ï¼Œä¼šå‡ºæ¥ç”¨æˆ·éœ€æ±‚ã€‚è¿™ä¸ªéœ€æ±‚æŒ‡çš„æ˜¯ç”¨æˆ·ç—›ç‚¹ï¼Œè¯¥åº”ç”¨å°±åº”è¯¥å»æ€è€ƒæ€ä¹ˆå»æ»¡è¶³ç”¨æˆ·çš„è¿™äº›ç—›ç‚¹ï¼Œäº¤ç»™ UI è¿›è¡Œè®¾è®¡å’Œå¼€å‘è¿›è¡Œç¨‹åºå®ç°ã€‚å…¶å®è¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ã€‚\r\n\r\n> **è¿™ä¸ªéœ€æ±‚æ˜¯ä¸æ˜¯çœŸçš„æ»¡è¶³äº†ç”¨æˆ·çš„éœ€æ±‚ï¼Œè¿™ä¸ªéœ€æ±‚ä¼šä¸ä¼šå˜ï¼Œè¿™ä¸ªéœ€æ±‚ä»¥åä¼šæ€ä¹ˆè¿›è¡Œç‰ˆæœ¬è¿­ä»£ï¼Œä¼šæ€ä¹ˆæ”¹ï¼**\r\n\r\nå“‡ï¼Œè¿™ä¸ªé—®é¢˜å¥½éš¾ï¼æˆ‘å…¶å®ä¸æ˜¯å¾ˆå…³å¿ƒè¿™ä¸ªéœ€æ±‚å¯¹ç”¨æˆ·çš„å¸®åŠ©ï¼Œè€Œæ˜¯æ›´å…³å¿ƒä»¥åä¼šæ€ä¹ˆå˜ï¼Œç°åœ¨å†™çš„ä»£ç å¦‚ä½•å»é€‚åº”è¿™ç§å˜åŒ–ã€‚è€å®è¯´ï¼Œå…¶å®ç°åœ¨å†™ä»£ç ä¹‹å‰ï¼Œæ¯”è¾ƒå°‘çš„å»è€ƒè™‘è¿™äº›ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¤šçš„è®¾è®¡ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ—¥åæ”¹èµ·æ¥çœŸçš„ä¼šè®©äººæŠ“ç‹‚ï¼Œæ ¹æœ¬ä¸æ¸…æ¥šè‡ªå·±æ›¾ç»å†™è¿‡ä»€ä¹ˆï¼Œå½“æ—¶çš„ä¸€äº›åšæ³•ä¹Ÿå®Œå…¨å¼„ä¸æ‡‚æ˜¯ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå¹²ï¼Œç¨‹åºèƒ½å¤§è‡´æŒ‰ç…§é¢„æœŸå»æ‰§è¡Œå·²ç»å¾ˆä¸é”™äº†ï¼Œæ›´å¤šçš„æƒ…å†µæ˜¯ä¸èƒ½å¾ˆå¥½çš„æ‰§è¡Œã€‚\r\n\r\nè¿™æ˜¯é—®é¢˜å‘€ï¼æˆ‘å¤§å­¦å­¦çš„ä¸“ä¸šæ˜¯ï¼šè½¯ä»¶å·¥ç¨‹ã€‚è½¯ä»¶å·¥ç¨‹å’Œè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯æœ€å¤§çš„ä¸åŒä¹Ÿä½“ç°åœ¨è½¯ä»¶å·¥ç¨‹ä¸“ä¸šæŠŠå¾ˆå¤šçš„å…³æ³¨ç‚¹å’Œç²¾åŠ›æ”¾åœ¨äº†å¦‚ä½•è®©é¡¹ç›®æ­£å¸¸æ¨è¿›ï¼Œå¦‚ä½•å»ä¿è¯é¡¹ç›®ç¨³å®šå®‰å…¨çš„å‘å¸ƒå‡ºå»ï¼Œå¦‚ä½•ä¿è¯ä¸ä¼šå»¶æœŸï¼Œå¦‚ä½•ä¿è¯ä»£ç è´¨é‡ã€‚è¿™ä¸æ˜¯é ç¨‹åºçŒ¿çš„è‡ªæˆ‘ä¿®å…»ï¼Œè¿™æ˜¯è¦å»æ€è€ƒè¦å»æƒ³åŠæ³•è¾¾åˆ°çš„ç›®æ ‡çš„ã€‚è¿™é‡Œä¼šæœ‰å¥½å¤šçš„é—®é¢˜ã€‚ä¹‹æ‰€ä»¥è¯´åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºç°åœ¨çš„ä»£ç å·²ç»å®Œå…¨ä¹±æ‰äº†ï¼Œç»´æŠ¤èµ·æ¥å·²ç»æ¯”è¾ƒåƒåŠ›äº†ï¼Œå„ç§å¥‡å¥‡æ€ªæ€ªçš„é€»è¾‘å·²ç»è®©ç¨‹åºå˜å¾—å¤æ‚ï¼Œä¸åŒçš„ä»£ç è§„èŒƒå·²ç»è®©ç¨‹åºæ²¡æœ‰äººèƒ½å®Œå…¨é€‚åº”ï¼Œå¯¹äºç¨‹åºä¸­çš„å¾ˆå¤šè€¦åˆå…³ç³»å·²ç»æˆä¸ºäº’ç›¸å…³è”çš„å…³ç³»ç½‘ï¼ŒåŠ¨å…¶ä¸­ä»»ä½•ä¸€ä¸ªè§’éƒ½æœ‰å¯èƒ½æ‰“ç ´è¿™ä¸ªè„†å¼±çš„å¹³è¡¡ã€‚ç”¨ä¸€å¥è¯å½¢å®¹ï¼š\r\n\r\n> **Bug ä¸äº‹ä»¶èµ·é£ï¼ŒçŠ¶æ€å½±å“å…±é•¿å¤©ä¸€è‰²**\r\n\r\nè¿™æ ·çš„ä»£ç ä¼šå¯¼è‡´æœ‰å¾ˆå¤šé—®é¢˜è¢«éšè—å…¶ä¸­ï¼Œå½“æŸä¸€å¤©ä»ä¸€ä¸ªç‚¹çˆ†å‘å‡ºæ¥ï¼Œå°±å¯èƒ½å¦‚æ´ªæ°´æ³›æ»¥ä¸€å‘ä¸å¯æ”¶æ‹¾ï¼å½“ç„¶äº†ï¼Œæ¯”è¾ƒå¹¸è¿çš„ä¸€ç‚¹æ˜¯æˆ‘ä»¬ç°åœ¨éœ€è¦åšçš„ä»…ä»…æ˜¯ä¸€ä¸ªåº”ç”¨ï¼Œä¸æ˜¯ä¸€ä¸ªåºå¤§çš„ç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå¯é¢„è§çš„æœªæ¥ï¼Œè¿™ä¸ªé¡¹ç›®è§„æ¨¡å¹¶ä¸ä¼šçˆ†å‘å¼å¢é•¿ï¼Œå¹¶ä¸”å†™ä»£ç çš„äººéƒ½è¿˜åœ¨ï¼è¿˜å¯ä»¥ç»´æŒè¿™ä¸ªçŠ¶æ€ï¼Œè¿˜å¯ä»¥è®©è¿™ç§çŠ¶æ€ç»§ç»­ä¸‹å»ï¼Œç»´æŠ¤è¿™ä¸ªé¡¹ç›®çš„ç¨‹åºçŒ¿éœ€è¦æœ‰æ›´å¤šçš„è€å¿ƒå’Œç»†å¿ƒï¼Œå½“å¤„ç†ä¸€äº›é—®é¢˜æ—¶ï¼Œæ³¨æ„å°½é‡æ‰¾å‡ºå„æ–¹é¢çš„å…³è”å§ï¼\r\n\r\nå¦‚æœæœ‰ä¸€å¤©èƒ½é‡æ„ä»£ç ï¼ŒçœŸçš„æœ‰é‚£ä¹ˆç®€å•å—ï¼Ÿæœªå¿…ï¼Œä¿æŒç°åœ¨çš„è¿™æ ·ä¸€ä¸ªçŠ¶æ€ï¼Œç»´æŒåˆ°è¿™ä¸ªé¡¹ç›®ç»“æŸå¯èƒ½æ›´æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚\r\n\r\nè¯è¯´å›æ¥ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®ä¸­ç”¨åˆ°äº†é‚£ä¹ˆå¤šçš„äº‹ä»¶ï¼ˆEventBusï¼‰ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“è¿™ä¸ªä¸œè¥¿å¾ˆæ–¹ä¾¿ï¼Œç¡®å®å‘€ï¼Œçš„ç¡®å¥½ç”¨ã€‚æˆ‘ä»¬ä¹ŸçŸ¥é“è¿™ä¸ªä¸œè¥¿ä¼šéšç€æ—¶é—´çš„å‘å±•é€æ¸é€ æˆé¡¹ç›®çš„éš¾ä»¥ç»´æŠ¤ï¼Œæ²¡åŠæ³•ï¼Œæœ‰å¥½å¿…æœ‰å¼Šå˜›ï¼Œé—®é¢˜æ˜¯æˆ‘ä»¬æ²¡æœ‰å¾ˆå¥½çš„åœ¨è¿™äº›å¥½å¤„å’Œå¼Šç«¯ä¸­è¿›è¡Œä¸€ä¸ªå¾ˆå¥½çš„æŠ˜ä¸­ï¼Œå¯¼è‡´äº†å¾ˆå¤šçš„æ»¥ç”¨ã€‚ç”šè‡³æœ‰çš„æ—¶å€™è¿˜æœ‰ä¸€ç§æ—¢ç„¶è¿™ä¸ªåœ°æ–¹éƒ½å·²ç»è¿™ä¹ˆåšäº†ï¼Œé‚£å¹²è„†å°±è¿™ä¹ˆå¹²å§è¿™æ ·çš„ä¸€ç§å¿ƒæ€ã€‚è¿™ä¸ªé—®é¢˜éœ€è¦å†è€ƒè™‘è€ƒè™‘å§ã€‚\r\n\r\næœ€åæƒ³å†™ä¸€ç‚¹çš„å°±æ˜¯åœ¨å¼€å§‹å†™ä»£ç çš„æ—¶å€™ï¼Œä»”ç»†å»è€ƒè™‘è€ƒè™‘ï¼Œä¹Ÿè®¸ç”¨äº”åˆ†é’Ÿè€ƒè™‘å¥½äº†ä¹‹åï¼Œè¿™ä¸ªé—®é¢˜å°±ä¼šå˜å¾—è±ç„¶å¼€æœ—ï¼Œä¸ç¦å¤§å«ï¼šâ€œæˆ‘é ï¼Œä»£ç è¿˜å¯ä»¥è¿™ä¹ˆå†™ï¼Œå¤ªæ¼‚äº®äº†ï¼â€\r\n\r\n## æœ€å\r\n\r\nå¸Œæœ›è¿™ä¸ªé¡¹ç›®èƒ½å¥½èµ·æ¥ï¼Œæœ‰æ—¶é—´æˆ–åšåˆ°ä»€ä¹ˆåœ°æ–¹å°±é€æ¸æƒ³åŠæ³•è®©ä»£ç å˜å¾—æ›´å¥½å§ï¼\r\n\r\n20170826 æ—©"},{"number":9,"title":"WebRTC å­¦ä¹ ç¬”è®°","created_at":"2016-11-24 07:16:00","body":"## å‰è¨€\r\n\r\næœ¬æƒ³ç”¨è¿™ç¯‡æ–‡ç« åœ¨[Coding](https://coding.net/)ä¸ŠæŒ£ä¸¤ä¸ªç å¸ï¼Œå¯æ˜¯å¤±è´¥äº†ï¼Œå¥½äº†ï¼Œé‚£å°±å†™åœ¨è¿™é‡Œï¼Œé”™è¯¯ä¹‹å¤„æ¬¢è¿æŒ‡å‡ºï¼Œåœ¨ä¸‹ä¸èƒœæ„Ÿæ¿€ã€‚\r\n## æ­£æ–‡\r\n\r\n[WebRTC](https://webrtc.org/) çš„å…¨ç§°ä¸º Web Real-Time Communicationï¼Œæ˜¯ä¸€ä¸ªç”± Google ä¸»å¯¼çš„é€šä¿¡åè®®å’Œç¼–ç¨‹æ¥å£ã€‚Web æµè§ˆå™¨å¯ä»¥ä»è®¡ç®—æœºç¡¬ä»¶è·å–è§†é¢‘æˆ–éŸ³é¢‘ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»å…¶ä»–ç”¨æˆ·æµè§ˆå™¨è·å–å®æ—¶æ•°æ®ï¼Œå³å¯ä»¥å®ç°è§†é¢‘æˆ–éŸ³é¢‘çš„é€šä¿¡ã€‚è¿™é¡¹æŠ€æœ¯æ˜¯ 2010 å¹´ Google ä»¥ 6820 ä¸‡ç¾å…ƒæ”¶è´­äº† Global IP Solutions å…¬å¸ï¼Œ2011 å¹´å´å°†å…¶å¼€æºäº†ï¼ˆä¹Ÿåªæœ‰ Google èƒ½å¹²å‡ºè¿™äº‹ï¼‰ï¼Œ2013 å¹´åœ¨ Google IO å¤§ä¼šä¸Šæ¨å¹¿ã€‚ç”±äº Google çš„ç§¯ææ¨åŠ¨å’Œæ ‡å‡†çš„åˆ¶å®šï¼Œå·²ç»å¾—åˆ°äº†ä¸šç•Œçš„æ”¯æŒï¼Œç§°ä¸ºæ–°ä¸€ä»£è§†é¢‘é€šè¯çš„æ ‡å‡†ã€‚\r\n## å¹³å°é€šç”¨æ€§\r\n\r\nWebRTC åœ¨ä¸åŒæµè§ˆå™¨ä¸Šï¼ˆåŒ…æ‹¬ Chromeï¼ŒFirfoxï¼ŒOpera å’Œ Microsoft Edge ç­‰ï¼‰ï¼Œä¸åŒçš„å¹³å°ä¸Šï¼ˆPCï¼ŒAndroidï¼ŒiOS å’Œ TVï¼‰éƒ½æœ‰ç»Ÿä¸€çš„æ ‡å‡†ã€‚å€Ÿç”¨å¹¶æ”¹ç¼– [Sam Dutton](https://goo.gl/VczO0M) çš„ä¸€å¥è¯ï¼šæƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä½ çš„æ‰‹æœºã€ç”µè§†å’Œç”µè„‘éƒ½å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œæƒ³è±¡ä¸€ä¸‹å¾ˆå®¹æ˜“çš„ä½ å°±å¯ä»¥ä¸ä»–äººè¿›è¡Œ P2P çš„éŸ³è§†é¢‘çš„é€šä¿¡ï¼Œå¤šä¹ˆç¾å¥½ï¼Œè¿™éƒ½æ˜¯ WebRTC å¹²çš„å¥½äº‹ã€‚\r\n\r\nç¡®å®æ˜¯ä¸ªå¥½äº‹ï¼Œåœ¨æµè§ˆå™¨ä¸Šï¼Œç‚¹å‡»è¾“å…¥ä¸€ä¸ªç½‘å€ï¼Œç‚¹å‡»åŒæ„ç½‘ç«™ä½¿ç”¨è®¡ç®—æœºè¯ç­’å’Œæ‘„åƒå¤´ï¼Œç„¶åå°±å¯ä»¥ä¸åˆ«äººè¿›è¡Œè¯­éŸ³å’Œè§†é¢‘é€šä¿¡äº†ï¼Œä¸éœ€è¦å®‰è£…ä»»ä½•è½¯ä»¶ï¼Œä¹Ÿæ— éœ€ä»»ä½•æ’ä»¶ï¼Œå› ä¸ºåœ¨æµè§ˆå™¨ä¸­å·²ç»å†…ç½®äº† WebRTC äº†ã€‚\r\n\r\nåŒæ ·ï¼Œåœ¨ç§»åŠ¨ç«¯ Android å’Œ iOS ä¸Šï¼Œä¹Ÿæœ‰å¯¹åº”çš„ AppRTCMobile å¯ä»¥å®‰è£…å¹¶è¯•ç”¨ï¼ˆåœ¨2016å¹´9æœˆ28æ—¥å‰è¿˜å« AppRTCDemo ï¼‰ã€‚ä¸æµè§ˆå™¨ç±»ä¼¼çš„æ“ä½œï¼ŒåŒæ ·çš„æ–¹ä¾¿ã€‚\r\n## å‘å±•æƒ…å†µ\r\n\r\nä» Google IO å¤§ä¼šä¸Šç¬¬ä¸€æ¬¡æåˆ° WebRTC åˆ°ç°åœ¨ï¼ŒGoogle çš„ [Duo](http://www.fiercewireless.com/wireless/google-takes-facetime-webrtc-based-duo)ï¼Œ[Apple](http://www.fiercewireless.com/tech/report-apple-quietly-reveals-support-for-webrtc)ï¼Œå¾®è½¯çš„ [Edge](https://goo.gl/yM7RFG)ï¼ŒSkypeï¼ŒFacebook ç­‰éƒ½å¯¹ WebRTC è¿›è¡Œäº†æ”¯æŒï¼Œå¹¶ä¸”æœ‰æµè¡Œçš„è¶‹åŠ¿ã€‚WebRTC åˆ° 2016 å¹´å·²ç»è¿‡äº†äº”å¹´ï¼Œè™½ç„¶ä¸èƒ½è¯´å…¨éƒ¨å®Œå–„äº†ï¼Œè¿˜æœ‰ bugï¼Œä½†æ˜¯ï¼Œå·²ç»å¯ä»¥ä½¿ç”¨ï¼Œåº”è¯¥ç»™äºˆä¸€å®šå…³æ³¨äº†ã€‚\r\n\r\nåˆ°è¿™é‡Œï¼Œå¤§è‡´è§£å†³äº† WebRTC æ˜¯ä»€ä¹ˆå’Œæ˜¯å¦åº”è¯¥å…³æ³¨ä¸€ä¸‹ WebRTC çš„é—®é¢˜äº†ã€‚æ¥ä¸‹æ¥å°±çœ‹çœ‹æ€ä¹ˆä½¿ç”¨å§ï¼Œä¸»è¦é’ˆå¯¹ Android æ¥è¿›è¡Œè®¨è®ºã€‚\r\n## å°è¯•ä¸€ä¸‹\r\n\r\nå‚²è§†å¤©ä¸‹çš„ [Linus Torvalds](https://en.wikipedia.org/wiki/Linus_Torvalds) å·²ç»è¯´è¿‡äº†ï¼Œæœ€å¥½çš„å­¦ä¹ ç¨‹åºçš„æ–¹æ³•æ˜¯â€œReading The Fucking Source Codeâ€ï¼Œè¿™é‡Œä¹Ÿä¸€æ ·ï¼Œé€æºä»£ç ä¸‹è½½ [ä¼ é€é—¨](https://chromium.googlesource.com/external/webrtc/) ï¼Œå½“ç„¶ï¼Œè¿˜è¦å…ˆçœ‹çœ‹ [å®˜ç½‘](https://webrtc.org/) ã€‚è¿™é‡Œæ’æ’­ä¸€æ¡å¹¿å‘Šï¼Œ WebRTC ä»£ç æ›´æ–°çš„çœŸçš„å¤ªå¿«äº†ï¼ŒåŒ…æ‹¬èŠ‚å‡æ—¥æ¯å¤©éƒ½æœ‰å¤šæ¬¡æ–°çš„æäº¤ï¼Œå¹¶ä¸”å¶å°”æŸæ¬¡çš„æäº¤ä¼šå®Œå…¨æ›´æ”¹ä»¥å‰çš„è®¾è®¡ï¼Œè¿™ä¸€ç‚¹çœŸçš„è®©å…³æ³¨ WebRTC çš„äººåè¡€ï¼Œä¹Ÿå°±æ˜¯è¯´å¾ˆéš¾è¯´ä½ å·²ç»ä¸‹åˆ°äº†æœ€æ–°çš„ä»£ç ï¼Œå› ä¸ºåœ¨è¯´è¿™å¥è¯çš„åŒæ—¶ï¼Œå¯èƒ½åˆæœ‰æ–°çš„æäº¤äº†ï¼Œè¿™ä¹Ÿè®©ç½‘ä¸Šå¾ˆå¤šçš„èµ„æ–™è¿‡æ—¶çš„å¼‚å¸¸è¿…é€Ÿï¼Œä½†æ˜¯åªèƒ½å¿ï¼Œäººå®¶æ˜¯ Googleã€‚\r\n\r\nç”±äºè·Ÿ Chrome æœ‰å…³ï¼Œä¸‹è½½ä»£ç å¦‚æœä»…ä»…ä¸‹è½½äº†ä¸»åˆ†æ”¯çš„ä»£ç ï¼Œå…¶å®æ˜¯ä¸å¥½ç”¨çš„ã€‚éœ€è¦ä¸‹è½½ [depot_tools](http://dev.chromium.org/developers/how-tos/install-depot-tools) ï¼Œé…ç½®ç¯å¢ƒå˜é‡ï¼Œç„¶åç”¨ `fetch` å’Œ `gclient` å‘½ä»¤ä¸‹è½½ï¼Œè¿™ä¸€éƒ¨åˆ†å¯ä»¥å‚è€ƒå®˜ç½‘çš„ [Development](https://webrtc.org/native-code/development/)ã€‚å®˜ç½‘ä¹ŸåŒ…å«äº†ç¼–è¯‘å’Œè¿è¡Œæ–¹æ³•ã€‚å½“ç„¶ï¼Œå¦‚æœä½ åªæƒ³äº†è§£ä¸€ä¸‹ï¼Œæ²¡å¿…è¦ä¸‹ä»£ç ï¼Œä¸‹ä»£ç è‡³å°‘éœ€è¦å‡ ä¸ªå°æ—¶ï¼Œä½ å¯ä»¥ç›´æ¥è·³è¿‡è¿™æ­¥ï¼Œ Google çš„è¿™äº› [ä¾‹å­](https://github.com/webrtc/samples) ä½ å¯ä»¥è¯•è¯•ã€‚æœ€åä¸€ç‚¹éœ€è¦æ³¨æ„çš„å°±æ˜¯WebRTCä¸å¯ä»¥æœ¬åœ°è¿è¡Œï¼Œéœ€è¦æœåŠ¡å™¨ï¼Œæ¢ä¸€å¥è¯è¯´ï¼Œä¾‹å­ä¸‹è½½äº†ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œæ˜¯æ— æ³•è¿è¡Œçš„ï¼Œå¯ä»¥ä½¿ç”¨ [Chrome çš„æ’ä»¶](https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb?utm_source=chrome-app-launcher-info-dialog)ï¼Œç›¸å½“äºåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚\r\n\r\nä¸Šé¢è®¨è®ºçš„æ˜¯æµè§ˆå™¨éƒ¨åˆ†ï¼Œæˆ‘æ‰¿è®¤æˆ‘åªæ˜¯è¯•äº†è¯•å®˜ç½‘ [Start](https://codelabs.developers.google.com/codelabs/webrtc-web/#0)ï¼Œè¿˜ç®—å¥½ç©ï¼Œæ¥ä¸‹æ¥é‡ç‚¹è®¨è®º Android éƒ¨åˆ†ã€‚\r\n\r\nå…³äº Android éƒ¨åˆ†ï¼Œä»£ç ä¸‹è½½ç•¥æœ‰ä¸åŒï¼Œæˆ‘å†™è¿‡ç¬”è®°ï¼Œè¿™é‡Œåªé€ [ä¼ é€é—¨](http://blog.renyuzhuo.cn/#/issues/2) ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚å¯¹äºAndroidé¡¹ç›®ï¼ŒåŒæ ·é€ä¸ª [ä¼ é€é—¨](https://github.com/RWebRTC/WebRTC-Android-Learn) ï¼Œè¿™ä¸ªä»£ç ä¸‹è½½åï¼Œç”¨ [Android Studio](https://developer.android.com/studio/index.html) æ‰“å¼€ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¹Ÿæœ‰ç¼–è¯‘å¥½çš„ `apk` æ–‡ä»¶ï¼Œå¯èƒ½è¿™æ ·ä¼šæœ‰æ›´å¤šçš„äººä¼šçœŸçš„è¯•ä¸€è¯•å§ã€‚æœåŠ¡å™¨æ˜¯å®˜ç½‘ Demo æœåŠ¡å™¨ï¼Œéœ€è¦æ‰‹æœºç§‘å­¦ä¸Šç½‘ã€‚\r\n## æŠ€æœ¯åˆ†æâ€”â€”æµ…å°è¾„æ­¢\r\n\r\nä¸‹é¢è®¨è®ºä¸€ä¸‹ WebRTC çš„æŠ€æœ¯å®ç°å’Œå‡ ä¸ªå…³é”®çš„ API ï¼Œä½†æˆ‘è‡ªçŸ¥æŠ€æœ¯å®åœ¨æ˜¯å¤ªå¼±ï¼Œåªèƒ½æµ…å°è¾„æ­¢ï¼ŒæŠ›ç –å¼•ç‰ã€‚\r\n### å…ˆçœ‹å‡ å¼ å›¾â€”â€”å…¨éƒ¨å›¾ç‰‡æ¥è‡ªç½‘ç»œ\r\n\r\n![å›¾ç‰‡1](https://dn-coding-net-production-pp.qbox.me/16dd0919-6c85-4fa6-80d6-5755278b18a2.png)\r\n\r\næµè§ˆå™¨éƒ¨åˆ†ï¼Œå°è£…äº†ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒåŒ…æ‹¬éŸ³è§†é¢‘ç¼–è§£ç ï¼Œç½‘ç»œé€šä¿¡ã€éŸ³è§†é¢‘æ•°æ®æ•æ‰å’Œ P2P ç›¸å…³ç­‰ï¼Œç”¨ C++ å‘ä¸Šå±‚æä¾›æ¥å£ï¼ŒW3C åˆ¶å®šæ ‡å‡†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„ API äº†ï¼Œç½‘é¡µå°±å……å½“ APP çš„è§’è‰²ã€‚å¯èƒ½æœ‰äººå·²ç»å‘ç°ï¼Œè¿™é‡Œæœ‰ P2P ï¼Œæ˜¯çš„ï¼Œçœ‹ä¸‹é¢è¿™å¼ å›¾ã€‚\r\n\r\n![å›¾ç‰‡2](https://dn-coding-net-production-pp.qbox.me/c85bc9ec-bf11-46ef-ad16-f1dd790fa7e4.png)\r\n\r\nä¸¤ä¸ªæµè§ˆå™¨è¿›è¡Œé€šä¿¡ï¼Œå¯ä»¥ç›´æ¥ä¸å¯¹æ–¹å»ºç«‹ P2P è¿æ¥ï¼Œäº¤æ¢åª’ä½“æ•°æ®ï¼Œä¸­å¿ƒç½‘ç»œæœåŠ¡å™¨ç”¨æ¥å‘é€æ§åˆ¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–­å¼€è¿æ¥ï¼Œé‡è¿ç­‰ï¼Œä½†æ˜¯è¿™æ—¶ç½‘ç»œåª’ä½“æ•°æ®å¹¶æ²¡æœ‰é€šè¿‡æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‹åŠ›ä¹Ÿå‡è½»äº†ã€‚ä½†æ˜¯åˆæœ‰é—®é¢˜äº†ï¼Œå»ºç«‹P2Pè¿æ¥ä¸æˆåŠŸäº†æ€ä¹ˆåŠï¼Œé•¿åŸï¼Œå“¦ä¸ï¼Œé˜²ç«å¢™é‚£ä¹ˆå¼ºå¤§ï¼Œå“ªæœ‰é‚£ä¹ˆå®¹æ˜“å»ºç«‹ P2P è¿æ¥çš„ï¼Œçœ‹ä¸‹å›¾ã€‚\r\n\r\n![å›¾ç‰‡3](https://dn-coding-net-production-pp.qbox.me/2125c520-1f23-4d53-908d-d62907ed72a8.png)\r\n\r\næˆ‘ä»¬å‘ç°äº†ï¼Œä¸­é—´å¤šäº†ä¸€ä¸ª Relay Server ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œé€šä¿¡çš„ä¸¤ç«¯ï¼Œå¯ä»¥ç©¿é€é˜²ç«å¢™ï¼Œå»ºç«‹ P2P è¿æ¥ï¼Œå¦‚æœæ²¡æœ‰ç©¿é€é˜²ç«å¢™ï¼Œé‚£å°±åªèƒ½é€šè¿‡ä¸­é—´ Relay Server è¿›è¡Œæ•°æ®è½¬å‘äº†ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¿¡ä»¤çš„å‘é€å’Œå¤šåª’ä½“æ•°æ®çš„ä¼ è¾“ï¼Œéƒ½å¯ä»¥æ‰¾åˆ°åˆé€‚çš„æ–¹å¼è¿›è¡Œä¼ è¾“ã€‚\r\n\r\nåˆšåˆšè¯´äº†ï¼Œä¸å¯¹æ–¹å»ºç«‹ P2P è¿æ¥ï¼Œä½†æ˜¯å»ºç«‹ P2P è¿æ¥éƒ½éœ€è¦çŸ¥é“å¯¹æ–¹å’Œè‡ªå·±çš„å…¬ç½‘ IP å’Œç«¯å£ï¼Œè¿™ä¸ªäº¤ç»™äº† STUN Server ã€‚çœ‹ä¸‹é¢ä¸¤å¼ å›¾ç‰‡ã€‚\r\n\r\n![å›¾ç‰‡5](https://dn-coding-net-production-pp.qbox.me/1a5f9164-ef80-4c0c-a428-a7d14f67f924.png) \r\n\r\n[![å›¾ç‰‡4](https://dn-coding-net-production-pp.qbox.me/8ef509e1-0e50-417a-ae7e-0b22315ca7ba.png)](http://www.3cx.com/pbx/what-is-a-stun-server/)\r\n\r\nçœ‹äº†å‡ å¼ å›¾ï¼Œå¤§è‡´è¿‡ç¨‹äº†è§£äº†ï¼Œæ¥ä¸‹æ¥æ˜¯ä»£ç  API æ—¶é—´ã€‚æœ¬æ–‡ä¸»è¦åˆ—ä¸¾å‡ ä¸ªä¸»è¦çš„ç±»ï¼Œæ°´å¹³æœ‰é™ï¼ŒæŠ›ç –å¼•ç‰ã€‚æµè§ˆå™¨ç›¸å…³ä»£ç ä»‹ç»çœ‹[è¿™é‡Œ](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-first)ã€‚\r\n### [MediaStream](https://github.com/RWebRTC/WebRTC-Android-Learn/blob/master/RAppRTC-libs-src/libjingle_peerconnection_java-src/MediaStream.java)\r\n\r\næ•°æ®æµã€‚æµè§ˆå™¨å¯ä»¥ç›´æ¥é€šè¿‡ getUserMedia åˆ›å»ºï¼Œ Android åˆ™é€šè¿‡å·¥å‚ç±»åˆ›å»ºã€‚MediaStream ä¸»è¦åŒ…å«æœ¬åœ°çš„å’Œè¿œç¨‹çš„ä¸¤ç§ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€çš„æ•°æ®å’Œè¦æ¥æ”¶çš„æ•°æ®ä¸¤ç§ã€‚åŒæ—¶ï¼Œç”±äºè¿™æ˜¯éšç§æ•æ„Ÿæ•°æ®ï¼Œæµè§ˆå™¨å’Œ Android éƒ½ä¼šå¼¹å‡ºæç¤ºçª—å£ï¼Œè¯·æ±‚ç”¨æˆ·ç¡®è®¤æƒé™ã€‚\r\n\r\n``` java\r\npublic class MediaStream {\r\n    public MediaStream(long nativeStream) {\r\n        this.nativeStream = nativeStream;\r\n    }\r\n\r\n    public boolean addTrack(AudioTrack track) {\r\n        // è°ƒç”¨æœ¬åœ°C++æ–¹æ³•\r\n        if(nativeAddAudioTrack(this.nativeStream, track.nativeTrack)) {\r\n            this.audioTracks.add(track);\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public boolean addTrack(VideoTrack track) {\r\n        // è°ƒç”¨æœ¬åœ°C++æ–¹æ³•\r\n        if(nativeAddVideoTrack(this.nativeStream, track.nativeTrack)) {\r\n            this.videoTracks.add(track);\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n```\r\n### [PeerConnection](https://github.com/RWebRTC/WebRTC-Android-Learn/blob/master/RAppRTC-libs-src/libjingle_peerconnection_java-src/PeerConnection.java) å’Œ [PeerConnectionFactory](https://github.com/RWebRTC/WebRTC-Android-Learn/blob/master/RAppRTC-libs-src/libjingle_peerconnection_java-src/PeerConnectionFactory.java)\r\n\r\nåŠ è½½ JNIï¼Œåˆ›å»ºè¿æ¥ï¼ŒAndroid ä¸­åŒæ—¶æä¾›å‘è¿æ¥ä¸­æ·»åŠ  VideoTrack å’Œ AudioTrack æ–¹æ³•ï¼Œå³å‘è¿æ¥ä¸­æ·»åŠ æ•°æ®æµã€‚è¿™é‡Œåº”è¯¥æä¸€ä¸‹ï¼Œ WebRTC å¯¹äºæ•°æ®æ˜¯å…ˆå°†åŸæ•°æ® Capture å°è£…æˆ Sourceï¼Œåœ¨å°† Source å°è£…æˆ Track ï¼Œå†ä½¿ç”¨ MediaStream çš„ addTrack æ–¹æ³•æ·»åŠ  Trackï¼Œä½¿ç”¨ PeerConnection çš„ addStream æ–¹æ³•æ·»åŠ  mediaStreamï¼Œè€Œ PeerConnection åˆæ˜¯ç”± PeerConnectionFactory åˆ›å»ºçš„ï¼Œå› æ­¤ï¼Œå°±æ˜¯ï¼š\r\n\r\n``` java\r\n// å¿½ç•¥æ–¹æ³•å‚æ•°\r\nPeerConnectionFactory factory = new PeerConnectionFactory();\r\nPeerConnection peerConnection = factory.createPeerConnection();\r\nmediaStream = factory.createLocalMediaStream();\r\nmediaStream.addTrack(createVideoTrack(videoCapturer));\r\npeerConnection.addStream(mediaStream);\r\n```\r\n\r\nåŒæ ·çœ‹ä¸€ä¸‹æºä»£ç ï¼Œå…¶ä¸­å°±åŒ…å«äº†ä¸Šè¿°æåˆ°çš„æ–¹æ³•ã€‚\r\n\r\n``` java\r\npublic class PeerConnectionFactory {\r\n\r\n    public PeerConnectionFactory(PeerConnectionFactory.Options options) {\r\n        this.nativeFactory = nativeCreatePeerConnectionFactory(options);\r\n        if(this.nativeFactory == 0L) {\r\n            throw new RuntimeException(\"Failed to initialize PeerConnectionFactory!\");\r\n        }\r\n    }\r\n\r\n    public PeerConnection createPeerConnection(RTCConfiguration rtcConfig, MediaConstraints constraints, Observer observer) {\r\n        long nativeObserver = nativeCreateObserver(observer);\r\n        if(nativeObserver == 0L) {\r\n            return null;\r\n        } else {\r\n            long nativePeerConnection = nativeCreatePeerConnection(this.nativeFactory, rtcConfig, constraints, nativeObserver);\r\n            return nativePeerConnection == 0L?null:new PeerConnection(nativePeerConnection, nativeObserver);\r\n        }\r\n    }\r\n\r\n    public MediaStream createLocalMediaStream(String label) {\r\n        return new MediaStream(nativeCreateLocalMediaStream(this.nativeFactory, label));\r\n    }\r\n\r\n    public VideoSource createVideoSource(VideoCapturer capturer) {\r\n        Context eglContext = this.localEglbase == null?null:this.localEglbase.getEglBaseContext();\r\n        long nativeAndroidVideoTrackSource = nativeCreateVideoSource(this.nativeFactory, eglContext, capturer.isScreencast());\r\n        AndroidVideoTrackSourceObserver capturerObserver = new AndroidVideoTrackSourceObserver(nativeAndroidVideoTrackSource);\r\n        nativeInitializeVideoCapturer(this.nativeFactory, capturer, nativeAndroidVideoTrackSource, capturerObserver);\r\n        return new VideoSource(nativeAndroidVideoTrackSource);\r\n    }\r\n\r\n    public VideoTrack createVideoTrack(String id, VideoSource source) {\r\n        return new VideoTrack(nativeCreateVideoTrack(this.nativeFactory, id, source.nativeSource));\r\n    }\r\n}\r\n```\r\n### [VideoCapturer](https://github.com/RWebRTC/WebRTC-Android-Learn/blob/master/RAppRTC-libs-src/libjingle_peerconnection_java-src/VideoCapturer.java)\r\n\r\n å¦‚ä¸‹å›¾ï¼Œä¸ºç±»çš„ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨ CameraCapture ç®€åŒ–ç›¸æœºæ“ä½œã€‚\r\n\r\n ![å›¾ç‰‡](https://dn-coding-net-production-pp.qbox.me/757cb989-e01f-4280-982a-f3edd119e1b2.jpg) \r\n\r\nå½“ç„¶ï¼ŒAndroidéƒ¨åˆ†ï¼Œè¿˜æœ‰æ¯”è¾ƒé‡è¦çš„æœ‰ä¸€ä¸‹å‡ ä¸ªç±»ï¼Œä½†æ˜¯ç›¸æ¯”å¯¹äºäº†è§£ WebRTC å°±ä¸åº”è¯¥åœ¨è¿™é‡Œä»‹ç»äº†ï¼š\r\n\r\n```\r\nç½‘ç»œç›¸å…³ï¼šNetworkMonitor\r\nç¼–è§£ç ç›¸å…³ï¼šMediaCodecVideo\r\næ•°æ®æ ¼å¼ç›¸å…³ï¼šDataChannel\r\n```\r\n\r\nå¦‚æœè¯»è€…æ„Ÿå…´è¶£è‡ªè¡Œé˜…è¯»ã€‚\r\n## åè®°\r\n\r\nWebRTC è¿˜åœ¨å‘å±•ï¼Œæ–—èƒ†å†™äº†æ­¤æ–‡ï¼ŒæŠ›ç –å¼•ç‰ã€‚é”™è¯¯ä¹‹å¤„ï¼Œæ•¬è¯·æŒ‡æ­£ï¼Œåœ¨ä¸‹ä¸èƒœæ„Ÿæ¿€ã€‚\r\n\r\n## å‚è€ƒï¼ˆä»¥ä¸‹é“¾æ¥å¯èƒ½éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼‰\r\n\r\nå®˜ç½‘ï¼šhttps://webrtc.org/\r\n\r\nDemoï¼šhttps://github.com/webrtc/samples\r\n\r\nIO Docsï¼šhttps://goo.gl/p8fnYl\r\n\r\nSTUNï¼šhttps://goo.gl/kvxWge\r\n\r\nDuoï¼šhttps://goo.gl/mdy8Ca\r\n\r\nChromiumï¼šhttps://goo.gl/yU5W4g\r\n\r\nRWebRTCï¼šhttps://goo.gl/aKweJt\r\n\r\nBlogï¼šhttps://goo.gl/f9Vh2N\r\n\r\nNinjaï¼šhttps://goo.gl/RB4JVZ\r\n\r\nWebRTC on Androidï¼šhttps://goo.gl/ek5pi3\r\n"},{"number":5,"title":"[è¯‘] WebRTC å‰ä¸–ä»Šç”Ÿ","created_at":"2016-11-24 07:11:03","body":"## åŸæ–‡\r\n\r\n```\r\nhttp://www.html5rocks.com/en/tutorials/webrtc/basics/\r\n```\r\n## ç¿»è¯‘\r\n\r\n```\r\nWebRTCæŠ€æœ¯æ˜¯æ¿€çƒˆçš„å¼€æ”¾çš„Webæˆ˜äº‰ä¸­ä¸€å¤§çªç ´ã€‚-Brendan Eich, inventor of JavaScript\r\n```\r\n### æ— æ’ä»¶å®æ—¶é€šä¿¡\r\n\r\næƒ³è±¡ä¸€ä¸‹æ‰‹æœºã€TVå’Œç”µè„‘éƒ½é€šè¿‡ç»Ÿä¸€å¹³å°è¿›è¡Œæ²Ÿé€šã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¾ˆå®¹æ˜“çš„åœ¨ä½ çš„ç½‘ç«™ä¸­æ·»åŠ è§†é¢‘èŠå¤©å’ŒP2Pæ•°æ®åˆ†äº«ã€‚è¿™æ˜¯WebRTCæŠ€æœ¯çš„æ„¿æ™¯ã€‚\r\n\r\næƒ³è¯•ä¸€è¯•å—ï¼ŸWebRTCåœ¨Chromeã€Operaå’ŒFirefoxä¸­å°±å¯ä»¥ä½¿ç”¨ã€‚åœ¨apprtc.appspot.comä¸­å¯ä»¥è¯•ä¸€è¯•è¿™äº›ä¾‹å­ï¼š\r\n1. åœ¨Chromeã€Operaæˆ–Firefoxä¸­æ‰“å¼€apprtc.appspot.comã€‚\r\n2. ç‚¹å‡»å…è®¸æŒ‰é’®è®©è¿™ä¸ªåº”ç”¨ä½¿ç”¨ä½ çš„æ‘„åƒå¤´(Webåº”ç”¨ç¨‹åº)ã€‚\r\n3. åœ¨ä¸€ä¸ªæ–°çš„æ ‡ç­¾é¡µä¸­æ‰“å¼€åº•éƒ¨çš„URLï¼Œæœ€å¥½åœ¨å¦å¤–çš„ç”µè„‘ä¸Šæ‰“å¼€ã€‚\r\n\r\nåœ¨è¿™ç¯‡[æ–‡ç« ](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-simple)ä¸­æœ‰ä¸€ä¸ªè¿™ä¸ªåº”ç”¨çš„ä¾‹å­ã€‚\r\n### å¿«é€Ÿå¼€å§‹\r\n\r\næ²¡æœ‰æ—¶é—´é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œæˆ–è€…åªæƒ³å°½å¿«å†™ä»£ç ï¼Ÿ\r\n1. çœ‹ä¸€çœ‹å…³äºGoogle I/Oå¤§ä¼šä¸Šå…³äºWebRTCçš„æ¦‚è¿°ã€‚ï¼ˆå¹»ç¯ç‰‡åœ¨[è¿™é‡Œ](http://io13webrtc.appspot.com/)ï¼‰\r\n2. å¦‚æœä½ æ²¡æœ‰ç”¨è¿‡getUserMediaï¼Œçœ‹ä¸€çœ‹é¡¹ç›®ä¸­çš„è¿™ç¯‡[æ–‡ç« ](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)ï¼Œåœ¨[è¿™é‡Œ](http://www.simpl.info/getusermedia)å¯ä»¥çœ‹åˆ°ç¤ºä¾‹ä»£ç ã€‚\r\n3. äº†è§£ä¸€ä¸‹RTCPeerConnectionçš„APIï¼Œç‚¹å‡»[è¿™é‡Œ](http://www.html5rocks.com/en/tutorials/webrtc/basics/#simpleRTCPeerConnectionExample)å’Œ[è¿™é‡Œ](http://www.simpl.info/pc)ï¼Œè¿™ä¸ªä¾‹å­åœ¨ä¸€ä¸ªç®€å•çš„ç•Œé¢ä¸Šå®ç°äº†WebRTCã€‚\r\n4. äº†è§£æ›´å¤šå…³äºWebRTCä½¿ç”¨çš„æœåŠ¡å™¨ã€é˜²ç«å¢™å’ŒNATç©¿é€ç›¸å…³çš„å†…å®¹ã€‚è¯»[è¿™é‡Œ](https://apprtc.appspot.com/)çœ‹è°ƒè¯•æ—¥å¿—ã€‚\r\n5. ç­‰ä¸åŠäº†æƒ³è¯•è¯•WebRTCå—ï¼Ÿè¿™é‡Œæœ‰20å¤šä¸ª[Demos](https://webrtc.github.io/samples)ï¼Œè¯•è¯•è¿™äº›javaScriptçš„APIsã€‚\r\n6. ä½¿ç”¨ä½ çš„æœºå™¨æœ‰é—®é¢˜å—ï¼Ÿ[è¿™é‡Œ](https://test.webrtc.org/)å¯ä»¥æ‰¾åˆ°æµ‹è¯•ç”¨ä¾‹ã€‚\r\n\r\næˆ–è€…ï¼Œç›´æ¥è·³åˆ°æˆ‘ä»¬çš„[WebRTC codelab]()ï¼šä¸€æ­¥ä¸€æ­¥çš„è·Ÿç€æŒ‡å¯¼ï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„è§†é¢‘èŠå¤©åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬ä¸€ä¸ªç®€å•çš„ä¿¡ä»¤æœåŠ¡å™¨ã€‚\r\n### WebRTCæŠ€æœ¯ç®€å²\r\n\r\nè®©äººç±»é€šè¿‡ç½‘ç»œè¿›è¡ŒéŸ³è§†é¢‘é€šä¿¡æ˜¯ç½‘ç»œæœ€åçš„å·¨å¤§æŒ‘æˆ˜ï¼šå®æ—¶é€šä¿¡(RTC)ã€‚å®æ—¶é€šä¿¡å°±åƒç½‘ç»œä¸Šåœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥æ–‡æœ¬ä¸€æ ·è‡ªç„¶ï¼Œæ²¡æœ‰å®ƒï¼Œå°±é™åˆ¶äº†æˆ‘ä»¬å¼€å‘æ–°çš„æ–¹å¼ä½¿äººä»¬äº’åŠ¨äº¤æµèµ·æ¥ã€‚\r\n\r\nä»å†å²ä¸Šçœ‹ï¼ŒRTCå˜åŒ–å¾ˆå¤§å¾ˆå¤æ‚ï¼Œéœ€è¦æ˜‚è´µçš„éŸ³è§†é¢‘æŠ€æœ¯æˆæƒæˆ–è€…èŠ±è´¹å·¨å¤§ä»£ä»·å»å¼€å‘ï¼ŒRTCæŠ€æœ¯ä¸ç°æœ‰çš„å†…å®¹ã€æ•°æ®å’ŒæœåŠ¡æ•´åˆä¸€ç›´éƒ½å¾ˆå›°éš¾å’Œè€—æ—¶ï¼Œåœ¨ç½‘ç»œä¸Šå°¤å…¶å¦‚æ­¤ã€‚\r\n\r\nGmailè§†é¢‘èŠå¤©åœ¨2008å¹´å¼€å§‹æµè¡Œï¼Œåœ¨2011å¹´Googleæ¨å‡ºè§†é¢‘ç¾¤èŠï¼Œå®ƒä½¿ç”¨GoogleTalkæœåŠ¡ï¼Œå°±åƒGmailä¸€æ ·ã€‚Googleæ”¶è´­äº†GIPSï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸ºRTCå¼€å‘å‡ºè®¸å¤šç»„ä»¶çš„ä¸€ä¸ªå…¬å¸ï¼Œä¾‹å¦‚ç¼–è§£ç å’Œå›å£°æ¶ˆé™¤æŠ€æœ¯ã€‚Googleå¼€æºäº†GIPSå¼€å‘çš„æŠ€æœ¯ï¼Œä¸ç›¸å…³æœºæ„IETFå’ŒW3Cåˆ¶å®šè¡Œä¸šæ ‡å‡†ã€‚åœ¨2011å¹´5æœˆï¼Œçˆ±ç«‹ä¿¡å®ç°ç¬¬ä¸€ä¸ª[WebRTCåº”ç”¨](https://labs.ericsson.com/developer-community/blog/beyond-html5-peer-peer-conversational-video)ã€‚\r\n\r\nWebRTCå·²ç»å®ç°äº†å¯¹äºå®æ—¶é€šä¿¡ï¼Œå…æ’ä»¶éŸ³é¢‘æ•°æ®ä¼ è¾“çš„æ ‡å‡†åˆ¶å®šã€‚éœ€æ±‚æ˜¯ï¼š\r\n- è®¸å¤šç½‘ç»œæœåŠ¡å·²ç»ä½¿ç”¨äº†RTCï¼Œä½†æ˜¯éœ€è¦ä¸‹è½½ï¼Œæœ¬åœ°åº”ç”¨æˆ–è€…æ˜¯æ’ä»¶ã€‚åŒ…æ‹¬Skypeã€Facebookã€Google Hangoutsã€‚\r\n- ä¸‹è½½å®‰è£…å‡çº§æ’ä»¶æ˜¯å¤æ‚çš„ï¼Œå¯èƒ½å‡ºé”™çš„ï¼Œä»¤äººåŒçƒ¦çš„ã€‚\r\n- æ’ä»¶å¯èƒ½å¾ˆéš¾éƒ¨ç½²ã€è°ƒè¯•ã€æ•…éšœæ’é™¤ç­‰â€”â€”å¯èƒ½éœ€è¦æŠ€æœ¯æˆæƒï¼Œå¤æ‚é›†æˆå’Œæ˜‚è´µçš„æŠ€æœ¯ã€‚è¯´æœäººä»¬å»å®‰è£…æ’ä»¶æ˜¯å¾ˆéš¾çš„ã€‚\r\n\r\nWebRTCé¡¹ç›®çš„æŒ‡å¯¼åŸåˆ™æ˜¯APIsåº”è¯¥æ˜¯å¼€æºçš„ï¼Œå…è´¹çš„ï¼Œæ ‡å‡†åŒ–çš„ï¼Œæµè§ˆå™¨å†…ç½®çš„ï¼Œæ¯”ç°æœ‰æŠ€æœ¯æ›´é«˜æ•ˆçš„ã€‚\r\n### æˆ‘ä»¬åœ¨å“ª\r\n\r\nWebRTCåº”ç”¨åœ¨äº†å„ç§Appä¸Šï¼ŒåŒ…æ‹¬WhatsAppã€Facebook Managerã€appear.inå’ŒTokBoxå¹³å°ä¸Šã€‚ç”šè‡³åœ¨iOSæµè§ˆå™¨ä¸Šçš„å®éªŒWebRTCã€‚WebRTCä¹Ÿè¢«WebKitGTK+å’ŒQTå†…ç½®ä½¿ç”¨ã€‚\r\n\r\nå¾®è½¯åœ¨Edgeä¸­å¢åŠ äº†MediaCaptureå’ŒStream APIã€‚\r\n\r\nWebRTCå®ç°äº†ä¸‰ä¸ªAPIsï¼š\r\n- [MeidaStream](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-mediastream)(aka getUserMedia)\r\n- [RTCPeerConnection](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-rtcpeerconnection)\r\n- [RTCDataChannel](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-rtcdatachannel)\r\n\r\n**getUserMedia**åœ¨Chromeã€Operaã€FireFoxå’ŒEdgeä¸­éƒ½å®ç°äº†ã€‚çœ‹ä¸€çœ‹è·¨æµè§ˆå™¨çš„[Demo](https://webrtc.github.io/samples/src/content/getusermedia/gum/)å’Œäºšé©¬é€Šçš„[ä¾‹å­](http://webaudiodemos.appspot.com/)ï¼Œä½¿ç”¨getUserMediaä½œä¸ºéŸ³é¢‘çš„è¾“å…¥ã€‚\r\n\r\n**RTCPeerConnection**åœ¨Chromeã€Operaå’ŒFireFoxä¸­å®ç°ã€‚å…³äºåå­—çš„è§£é‡Šï¼šç»è¿‡å‡ æ¬¡è¿­ä»£ï¼ŒRTCPeerConnectionè¢«Chromeå’ŒOperaå®ç°ä¸ºwebkitRTCPeerConnectionï¼Œè¢«FireFoxå®ç°ä¸ºmozRTCPeerConnectionã€‚å…¶ä»–çš„åå­—éƒ½æ˜¯è¿‡æ—¶çš„ï¼Œå½“æ ‡å‡†ç¨³å®šæ—¶ï¼Œå‰ç¼€ä¼šè¢«åˆ é™¤ã€‚åœ¨[Github](https://webrtc.github.io/samples/src/content/peerconnection/pc1/)ä¸Šæœ‰è¶…çº§ç®€å•çš„æ¼”ç¤ºé¡¹ç›®ï¼Œæ„å»ºåœ¨[apprtc.appspot.com](https://apprtc.appspot.com/)ä¸Šã€‚è¿™ä¸ªåº”ç”¨ä½¿ç”¨adapter.jaï¼Œä¸€ä¸ªJSåº“ï¼Œæ¥å¸®åŠ©WebRTCè·¨æµè§ˆå™¨ã€‚\r\n\r\n**RTCDataChannel**è¢«Chromeã€Operaå’ŒFireFoxæ”¯æŒã€‚æ£€å‡º[Github](https://webrtc.github.io/samples/)ä¸Šçš„Demoçœ‹çœ‹æ€ä¹ˆä½¿ç”¨ã€‚\r\n### è­¦å‘Š\r\n\r\næœ‰äº›å¹³å°å®£ç§°æ”¯æŒWebRTCå…¶å®å¯èƒ½ä»…ä»…æ”¯æŒgetUserMediaï¼Œè€Œä¸æ”¯æŒå…¶ä»–çš„RTCç»„ä»¶ã€‚\r\n### æˆ‘çš„ç¬¬ä¸€ä¸ªWebRTC\r\n\r\nWebRTCéœ€è¦åšå‡ ä»¶äº‹ï¼š\r\n- è·å–éŸ³è§†é¢‘æµæˆ–å…¶ä»–æ•°æ®æµã€‚\r\n- è·å–ç½‘ç»œä¿¡æ¯ä¾‹å¦‚IPåœ°å€å’Œç«¯å£å·ï¼Œä¸å…¶ä»–å®¢æˆ·ç«¯äº¤æ¢è¿™äº›ä¿¡æ¯æ¥è¿›è¡Œè¿æ¥ï¼ŒåŒ…æ‹¬ç©¿é€é˜²ç«å¢™ã€‚\r\n- å‘signalingæŠ¥å‘Šé”™è¯¯æˆ–å¯åŠ¨ä¼šè¯å…³é—­è¿æ¥ç­‰ã€‚\r\n- å¯¹äºåˆ†è¾¨ç‡è§£ç å™¨ç­‰ä¸å…¶ä»–å®¢æˆ·ç«¯äº¤æ¢ä¿¡æ¯ã€‚\r\n- ä¼ è¾“éŸ³è§†é¢‘æˆ–å…¶ä»–æ•°æ®ä¿¡æ¯ã€‚\r\n\r\nä¸ºäº†è·å¾—å’Œä¼ è¾“æ•°æ®ï¼ŒWebRTCå®ç°äº†ä»¥ä¸‹APIsï¼š\r\n- MediaStreamï¼šä»å®¢æˆ·æ‘„åƒå¤´æˆ–éº¦å…‹é£è·å–æ•°æ®æµã€‚\r\n- RTCPeerConnectionï¼šéŸ³è§†é¢‘é€šè¯ï¼ŒåŒ…æ‹¬åŠ å¯†å’Œå¸¦å®½ç­‰çš„ç®¡ç†ã€‚\r\n- RTCDataChannelï¼šP2Pæ•°æ®ä¼ è¾“ç®¡é“ã€‚\r\n\r\nï¼ˆæ¥ä¸‹æ¥è¯¦ç»†è®¨è®ºWebRTCçš„ç½‘ç»œå’Œä¿¡é“ï¼‰\r\n### MediaStream(aka getUserMedia)\r\n\r\nMediaStream APIä»£è¡¨åŒæ­¥æµåª’ä½“ã€‚ä¾‹å¦‚ä¸€ä¸ªæ¥è‡ªæ‘„åƒå¤´å’Œéº¦å…‹é£çš„æµåª’ä½“è¾“å…¥å·²ç»åŒæ­¥äº†éŸ³è§†é¢‘ã€‚ï¼ˆä¸è¦æ··æ·†MediaStreamå’Œtrackæ ‡ç­¾ï¼Œå®ƒä»¬å®Œå…¨ä¸åŒï¼‰ã€‚\r\n\r\nä¹Ÿè®¸ç†è§£MediaStreamçš„å®¹æ˜“çš„æ–¹å¼æ˜¯çœ‹å®ƒçš„è¡¨ç°ï¼š\r\n1. åœ¨Chromeã€Operaæ‰“å¼€demoï¼š\r\n\r\n```\r\nhttps://webrtc.github.io/samples/src/content/getusermedia/gumã€‚\r\n```\r\n1. æ‰“å¼€è°ƒè¯•å™¨ã€‚\r\n2. æ£€æŸ¥å…¨å±€èŒƒå›´å†…çš„æµå˜é‡ã€‚\r\n\r\næ¯ä¸ªMediaStreamæœ‰ä¸€ä¸ªè¾“å…¥ï¼Œnavigator.getUserMedia()ï¼Œä¹ŸåŒ…æ‹¬ä¸€ä¸ªè¾“å‡ºï¼Œè¾“å‡ºåˆ°videoæ ‡ç­¾æˆ–è€…æ˜¯RTCPeerConnectionã€‚\r\n\r\ngetUserMedia()æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š\r\n- ä¸€ä¸ªçº¦æŸå¯¹è±¡ã€‚\r\n- æˆåŠŸå›è°ƒï¼Œå¦‚æœè¢«è°ƒç”¨ï¼Œä¼ é€’ä¸€ä¸ªMediaStreamã€‚\r\n- å¤±è´¥å›è°ƒï¼Œå¦‚æœè¢«è°ƒç”¨ï¼Œä¼ é€’ä¸€ä¸ªé”™è¯¯å¯¹è±¡ã€‚\r\n\r\næ¯ä¸ªMediaStreamæœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œä¾‹å¦‚\r\n\r\n```\r\n\"as'Xk7EuLhsuHKbnjLWkW4yYGNJJ8ONsgwHBvLQ\"\r\n```\r\n\r\nä¸€ä¸ªMediaStreamTracksæ•°ç»„è¢«getAudioTracks()å’ŒgetVideoTracks()è¿”å›ã€‚\r\n\r\nå¯¹äº\r\n\r\n```\r\nhttps://webrtc.github.io/samples/src/content/getusermedia/gum/\r\n```\r\n\r\nä¾‹å¦‚stream.getAudioTracks()è¿”å›ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œå› ä¸ºæ²¡æœ‰éŸ³é¢‘ï¼Œå‡è®¾ä¸€ä¸ªæ‘„åƒå¤´è¢«è¿æ¥ä¸Šäº†ï¼Œstream.getVideoTracks()è¿”å›ä¸€ä¸ªMediaStreamTrackæ•°ç»„ï¼Œä»£è¡¨è¿™ä¸ªæ‘„åƒå¤´çš„æµã€‚æ¯ä¸ªMediaStreamTrackæœ‰ä¸€ä¸ªç±»å‹(éŸ³é¢‘æˆ–è§†é¢‘)ï¼Œä¸€ä¸ªæ ‡ç­¾(æœ‰æ—¶å°±åƒFaceTime HD ç…§ç›¸æœº)ï¼Œè¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªéŸ³è§†é¢‘é€šé“ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰è§†é¢‘æ²¡æœ‰éŸ³é¢‘ã€‚å¾ˆå®¹æ˜“æƒ³è±¡æ›´å¤šçš„ä¾‹å­ï¼šä¾‹å¦‚ï¼Œä¸€ä¸ªèŠå¤©åº”ç”¨ï¼Œå‰ç½®æƒ³è±¡å¤´åç½®æ‘„åƒå¤´å’Œéº¦å…‹é£ï¼Œå±å¹•å…±äº«åº”ç”¨ã€‚\r\n\r\nåœ¨Chromeæˆ–Operaä¸­ï¼ŒURL.createObjectURL()æ–¹æ³•å¯ä»¥è½¬æ¢ä¸€ä¸ªMediaStreamåˆ°ä¸€ä¸ªBlog URLï¼Œå¯ä»¥è¢«è®¾ç½®ä½œä¸ºè§†é¢‘çš„æºã€‚(åœ¨FireFoxå’ŒOperaä¸­ï¼Œè¿™ä¸ªè§†é¢‘æºå¯ä»¥é€šè¿‡streamæœ¬èº«åˆ›å»º)ï¼Œè‡ªä»M25ç‰ˆæœ¬ï¼ŒåŸºäºChromiumçš„æµè§ˆå™¨(Chromeå’ŒOpera)å…è®¸é€šè¿‡getUserMediaè·å–çš„éŸ³é¢‘æ•°æ®æ”¾ç½®åˆ°audioå’Œvideoæ ‡ç­¾ä¸Š(ä½†æ˜¯æ³¨æ„åˆ°é»˜è®¤æƒ…å†µä¸‹å°†æ—¶é™éŸ³çŠ¶æ€)ã€‚\r\n\r\ngetUserMediaå¯ä»¥è¢«ä½œä¸º[ç½‘é¡µéŸ³é¢‘è¾“å…¥API](http://updates.html5rocks.com/2012/09/Live-Web-Audio-Input-Enabled)ï¼š\r\n\r\n```\r\nfunction gotStream(stream) {\r\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n    var audioContext = new AudioContext();\r\n\r\n    // Create an AudioNode from the stream\r\n    var mediaStreamSource = audioContext.createMediaStreamSource(stream);\r\n\r\n    // Connect it to destination to hear yourself\r\n    // or any other node for processing!\r\n    mediaStreamSource.connect(audioContext.destination);\r\n}\r\n\r\nnavigator.getUserMedia({audio:true}, gotStream);\r\n```\r\n\r\nåŸºäºChromiumçš„åº”ç”¨æˆ–æ‰©å±•ä¹Ÿå¯ä»¥ä½¿ç”¨getUserMediaã€‚åœ¨å®‰è£…çš„æ—¶å€™ä»…ä¸€æ¬¡æ·»åŠ audioCaptureå’Œ/æˆ–videoCaptureæƒé™ã€‚æ­¤åç”¨æˆ·ä¸è¢«è¯¢é—®å…³äºæ‘„åƒå¤´å’Œéº¦å…‹é£çš„æƒé™ã€‚\r\n\r\nå¯¹äºä½¿ç”¨HTTPSçš„ç½‘é¡µä¹Ÿæ˜¯åŒæ ·ï¼šå¯¹äºgetUserMediaåªéœ€å‘€æˆäºˆä¸€æ¬¡æƒé™ã€‚ç¬¬ä¸€æ¬¡æ—¶ï¼Œåœ¨æ ‡ç­¾ä¸Šä¿¡æ¯æ ä¸Šæ˜¾ç¤ºå…è®¸æŒ‰é’®ã€‚\r\n\r\nTODO åŒæ—¶ï¼ŒChromeå°†ä¸é¼“åŠ±getUserMedia()è®¿é—®httpï¼Œåœ¨2015å¹´æœ«ï¼Œåœ¨M44ç‰ˆæœ¬ï¼Œä½ å¯èƒ½åœ¨è®¿é—®HTTPæ—¶çœ‹åˆ°ä¸€ä¸ªè­¦å‘Šã€‚\r\n\r\næœ€ç»ˆï¼Œä¸æ­¢ç…§ç›¸æœºå’Œéº¦å…‹é£ï¼Œå…¶ä»–çš„ä»»ä½•æ•°æ®æµéƒ½å¯ä»¥æ”¾åˆ°MediaStreamä¸­ã€‚å¯ä»¥ä»ç¡¬ç›˜ä¸­è·å–æ•°æ®æµï¼Œæˆ–è€…ä»ä»»ä½•å…¶ä»–ä¼ æ„Ÿå™¨æˆ–å…¶ä»–è¾“å…¥è·å–æ•°æ®ã€‚\r\n\r\næ³¨æ„åˆ°getUserMedia()å¿…é¡»åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ï¼Œä¸å¯ä»¥åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚å¦åˆ™ä¼šæŠ¥é”™ã€‚\r\n\r\ngetUserMedia()å¯ä»¥ä¸å…¶ä»–javaScriptç±»åº“ä¸€èµ·ä½¿ç”¨ï¼š\r\n- Webcam Toyæ˜¯ä¸€ä¸ªç…§ç‰‡ç±»APPï¼Œä½¿ç”¨WebGLæ¥ç»™ç…§ç‰‡æ·»åŠ å¥‡æ€ªçš„æ•ˆæœï¼Œå¯ä»¥è¢«åˆ†äº«å’Œä¿å­˜åˆ°æœ¬åœ°ã€‚\r\n- FaceKatæ˜¯ä¸€ä¸ªè„¸éƒ¨è·Ÿè¸ªçš„æ¸¸æˆï¼Œä½¿ç”¨äº†headtrackr.jsã€‚\r\n- ASCII Cameraä½¿ç”¨äº†Ganvas APIæ¥ç”ŸæˆASCIIç…§ç‰‡ã€‚\r\n\r\n![ascii](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/ascii.png)\r\n### çº¦æŸ\r\n\r\nå·²ç»è¢«Chromeã€FireFoxå’ŒOperaå®ç°ã€‚è¿™äº›å¯ä»¥è¢«ç”¨æ¥è®¾ç½®ç”±getUserMedia()å’ŒRTCPeerConnection addStream()è·å–åˆ°çš„è§†é¢‘åˆ†è¾¨ç‡ã€‚è¿™ä¸ªç›®çš„æ˜¯å®ç°å…¶ä»–çº¦æŸï¼Œä¾‹å¦‚é¢å¯¹æ¨¡å¼ï¼ˆå‰åæ‘„åƒå¤´ï¼‰ï¼Œå¸§é€Ÿç‡ï¼Œé«˜åº¦å’Œå®½åº¦ï¼Œä½¿ç”¨çš„æ˜¯applyconstraints()æ–¹æ³•ã€‚\r\n\r\nåœ¨\r\n\r\n```\r\nhttps://webrtc.github.io/samples/src/content/getusermedia/resolution/\r\n```\r\n\r\næœ‰ä¸€ä¸ªä¾‹å­ã€‚\r\n\r\nä¸€ä¸ªéš¾ä»¥è§£å†³çš„é—®é¢˜ï¼šæµè§ˆå™¨ä¸­ï¼Œä¸€ä¸ªæ ‡ç­¾ä¸­getUserMediaè®¾ç½®çš„çº¦æŸå½±å“éšåæ‰“å¼€çš„æ ‡ç­¾é¡µã€‚è®¾ç½®ä¸å…è®¸çš„å€¼æ—¶ç»™å‡ºäº†ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼š\r\n\r\n```\r\nnavigator.getUserMedia error:\r\nNavigatorUserMediaError {code: 1, PERMISSION_DENIED: 1}\r\n```\r\n### å±å¹•å’Œæ ‡ç­¾æ•è·\r\n\r\nChromeåº”ç”¨ä¹Ÿä½¿å¾—åˆ†äº«ä¸€ä¸ªvideoæ ‡ç­¾åœ¨ä¸€ä¸ªå•ä¸€çš„æµè§ˆå™¨æ ‡ç­¾ä¸­æˆä¸ºå¯èƒ½ï¼Œæˆ–è€…æ•´ä¸ªæ¡Œé¢é€šè¿‡chrome.tabCaptureå’Œchrome.desktopCaptureçš„APIsã€‚åœ¨[è¿™é‡Œ](https://github.com/webrtc/samples/tree/master/src/content/getusermedia/desktopcapture)å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªæ¡Œé¢captureçš„ä¾‹å­ã€‚å¯¹äºæˆªå±è§†é¢‘ï¼Œä»£ç å’Œæ›´å¤šçš„ä¿¡æ¯æŸ¥çœ‹[è¿™é‡Œ](http://updates.html5rocks.com/2012/12/Screensharing-with-WebRTC)ã€‚\r\n\r\nTODO ä½¿ç”¨csreen captureä½œä¸ºä¸€ä¸ªMediaStreamåœ¨chromeçš„æºä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œå…¶ä¸­ä½¿ç”¨äº†chromeMediaSourceçº¦æŸï¼Œçœ‹è¿™é‡Œ[Demo](https://html5-demos.appspot.com/static/getusermedia/screenshare.html)ï¼Œæ³¨æ„åˆ°å±å¹•æŠ“å–éœ€è¦HTTPSå¹¶ä¸”åº”è¯¥ç”¨å‘½ä»¤è¡Œæ ‡è®°ï¼Œè¢«WebRTCè®¨è®ºè§£é‡Šã€‚\r\n### Signalingï¼šä¼šè¯æ§åˆ¶ï¼Œç½‘ç»œå’Œåª’ä½“ä¿¡æ¯\r\n\r\nWebRTCä½¿ç”¨RTCPeerConnectionåœ¨æµè§ˆå™¨é—´ä¼ é€’æ•°æ®æµï¼Œä½†æ˜¯ä¹Ÿéœ€è¦ä¸€ä¸ªæœºå™¨åè°ƒæ²Ÿé€šå‘é€æ§åˆ¶iä¿¡æ¯ï¼Œè¿™è¢«ç§°ä¸ºsignalingè¿‡ç¨‹ã€‚Signalingæ–¹æ³•å’Œåè®®æ²¡æœ‰è¢«WebRTCè§„å®šï¼šsignalingä¸æ˜¯RTCPeerConnectionçš„APIçš„ä¸€éƒ¨åˆ†ã€‚\r\n\r\nç›¸åï¼ŒWebRTCåº”ç”¨çš„å¼€å‘è€…å¯ä»¥é€‰æ‹©ä»»ä½•ä¸€ç§ä»–ä»¬å–œæ¬¢çš„æ¶ˆæ¯åè®®ï¼Œä¾‹å¦‚SIPæˆ–è€…æ˜¯XMPPï¼Œæˆ–è€…ä»»ä½•å…¨åŒå·¥çš„é€šä¿¡é€šé“ã€‚è¿™ä¸ª[apprtc.appspot.com](https://apprtc.appspot.com/)ä¾‹å­ä½¿ç”¨äº†XHRå’ŒChannel APIä½œä¸ºè¿™ä¸ªSignalingã€‚è¿™ä¸ª[Codelab](http://www.bitbucket.org/webrtc/codelab)ä½¿ç”¨äº†[Socket.io](http://socket.io/)ï¼Œæ˜¯ä¸€ä¸ª[NodeæœåŠ¡å™¨](http://nodejs.org/)ã€‚\r\n\r\nSignalingè¢«ä½¿ç”¨æ¥äº¤æ¢ä¸‰ç§ä¿¡æ¯ï¼š\r\n- è¿æ¥æ§åˆ¶ä¿¡æ¯ï¼šåˆå§‹åŒ–æˆ–è€…å…³é—­è¿æ¥æŠ¥å‘Šé”™è¯¯ã€‚\r\n- ç½‘ç»œé…ç½®ï¼šå¯¹äºå¤–ç½‘ï¼Œæˆ‘ä»¬ç”µè„‘çš„IPåœ°å€å’Œç«¯å£ï¼Ÿ\r\n- å¤šåª’ä½“æ•°æ®ï¼šä½¿ç”¨ä»€ä¹ˆç¼–ç è§£ç å™¨ï¼Œæµè§ˆå™¨å¯ä»¥å¤„ç†ä»€ä¹ˆä¿¡æ¯ï¼Ÿ\r\n\r\nåœ¨è¿›è¡ŒP2Pæ•°æ®ä¼ è¾“å‰ï¼Œè¿™äº›ä¿¡æ¯å¿…é¡»å…¨éƒ¨é€šè¿‡Signalingè¿›è¡Œäº¤æ¢ã€‚\r\n\r\nä¾‹å¦‚ï¼Œå‡è®¾Aliceæƒ³è¦ä¸Bobé€šä¿¡ã€‚è¿™æ˜¯è¿™ä¸ª[ä¾‹å­](http://www.w3.org/TR/webrtc/#simple-example)ï¼Œæ˜¾ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹ä¸­Signalingçš„ä¿¡æ¯ã€‚è¿™ä¸ªä»£ç å‡è®¾æŸäº›ä¿¡å·çš„å­˜åœ¨ï¼Œåœ¨createSignaling()æ–¹æ³•ä¸­åˆ›å»ºã€‚ä¹Ÿæ³¨æ„åˆ°æœ‰åœ¨Chromeå’ŒOperaä¸Šæœ‰å‰ç¼€ã€‚\r\n\r\n```\r\nvar signalingChannel = createSignalingChannel();\r\nvar pc;\r\nvar configuration = ...;\r\n\r\n// run start(true) to initiate a call\r\nfunction start(isCaller) {\r\n    pc = new RTCPeerConnection(configuration);\r\n\r\n    // send any ice candidates to the other peer\r\n    pc.onicecandidate = function (evt) {\r\n        signalingChannel.send(JSON.stringify({ \"candidate\": evt.candidate }));\r\n    };\r\n\r\n    // once remote stream arrives, show it in the remote video element\r\n    pc.onaddstream = function (evt) {\r\n        remoteView.src = URL.createObjectURL(evt.stream);\r\n    };\r\n\r\n    // get the local stream, show it in the local video element and send it\r\n    navigator.getUserMedia({ \"audio\": true, \"video\": true }, function (stream) {\r\n        selfView.src = URL.createObjectURL(stream);\r\n        pc.addStream(stream);\r\n\r\n        if (isCaller)\r\n            pc.createOffer(gotDescription);\r\n        else\r\n            pc.createAnswer(pc.remoteDescription, gotDescription);\r\n\r\n        function gotDescription(desc) {\r\n            pc.setLocalDescription(desc);\r\n            signalingChannel.send(JSON.stringify({ \"sdp\": desc }));\r\n        }\r\n    });\r\n}\r\n\r\nsignalingChannel.onmessage = function (evt) {\r\n    if (!pc)\r\n        start(false);\r\n\r\n    var signal = JSON.parse(evt.data);\r\n    if (signal.sdp)\r\n        pc.setRemoteDescription(new RTCSessionDescription(signal.sdp));\r\n    else\r\n        pc.addIceCandidate(new RTCIceCandidate(signal.candidate));\r\n};\r\n```\r\n\r\né¦–å…ˆï¼ŒAliceå’ŒBobäº¤æ¢ç½‘ç»œä¿¡æ¯ã€‚(\"finding candidates\"æŒ‡çš„æ˜¯ä½¿ç”¨[ICE æ¡†æ¶]()å¯»æ‰¾ç½‘ç»œç«¯å£)\r\n1. Aliceä½¿ç”¨onicecandidateå¥æŸ„åˆ›å»ºä¸€ä¸ªRTCPeerConnectionã€‚\r\n2. å½“ç½‘ç»œå¤„ç†ç¨‹åºå¯ç”¨æ—¶ï¼Œå¥æŸ„è¿è¡Œã€‚\r\n3. Aliceå‘Bobå‘é€åºåˆ—åŒ–æ•°æ®ï¼Œé€šè¿‡æ— è®ºé‚£ç§æ–¹å¼ï¼šWebSocketæˆ–è€…å…¶ä»–æ–¹å¼ã€‚\r\n4. å½“Bobä»Aliceè·å–åˆ°æ•°æ®åï¼Œè°ƒç”¨addIceCandidateæ·»åŠ è¿œç¨‹èŠ‚ç‚¹æè¿°ä¸­ã€‚\r\n\r\nWebRTCå®¢æˆ·ç«¯(è¢«ç§°ä¸ºpeersï¼Œä¾‹å¦‚Aliceå’ŒBob)ï¼Œä¹Ÿéœ€è¦äº¤æ¢æœ¬åœ°å’Œè¿œç¨‹éŸ³è§†é¢‘åª’ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚ä½¿ç”¨çš„åè®®å’Œç¼–ç å™¨ã€‚TODO Signalingæ¥äº¤æ¢ä¿¡æ¯ã€‚\r\n1. Aliceæ‰§è¡ŒRTCPeerConnectionçš„createOffer()æ–¹æ³•ï¼Œè¿™é€šè¿‡RTCSessionDescriptionå›è°ƒï¼šAliceæœ¬åœ°ä¼šè¯æè¿°ã€‚\r\n2. åœ¨è¿™ä¸ªå›è°ƒä¸­ï¼ŒAliceé€šè¿‡setLocationDescription()è®¾ç½®æœ¬åœ°æè¿°ç„¶åç»™Bobå‘é€é˜¶æ®µæè¿°é€šè¿‡ä»–ä»¬çš„ä¿¡é“ã€‚æ³¨æ„åˆ°RTCPeerConnectionç›´åˆ°setRemoteDescriptionè¢«è°ƒç”¨æ‰ä¼šå¼€å§‹å‘é€æ•°æ®ï¼šåœ¨[è¿™é‡Œ](http://tools.ietf.org/html/draft-ietf-rtcweb-jsep-03#section-4.2.4)è¢«ç¡®å®šã€‚\r\n3. Bobå°†Aliceå‘é€è¿‡æ¥çš„æ¶ˆæ¯è¿›è¡Œè®¾ç½®ä½œä¸ºè¿œç¨‹ä¿¡æ¯çš„æè¿°ï¼Œé€šè¿‡setRemoteDescription()æ–¹æ³•ã€‚\r\n4. Bobè¿è¡ŒRTCPeerConnectionçš„createAnswer()çš„æ–¹æ³•ï¼Œé€šè¿‡ä»Aliceè·å–åˆ°çš„æè¿°ä¿¡æ¯ï¼Œæœ¬åœ°ä¼šè¯å¯ä»¥é€‚é…å¥¹çš„ã€‚è¿™ä¸ªcreateAnswer()å›è°ƒè¢«ä¸€ä¸ªRTCSessionDescriptionå›è°ƒï¼šBobè®¾ç½®æœ¬åœ°æè¿°ï¼Œå‘é€ç»™Aliceã€‚\r\n5. å½“Aliceè·å–åˆ°äº†Bobçš„æœ¬åœ°æè¿°ï¼Œé€šè¿‡setRemoteDescriptionè®¾ç½®è¿™ä¸ªæè¿°ä¿¡æ¯ã€‚\r\n6. å¼€å§‹é€šä¿¡ã€‚\r\n\r\nRTCSessionDescriptionå¯¹è±¡ç¬¦åˆSDPï¼Œä¸€ä¸ªSDPç±»ä¼¼äºå¦‚ä¸‹ï¼š\r\n\r\n```\r\nv=0\r\no=- 3883943731 1 IN IP4 127.0.0.1\r\ns=\r\nt=0 0\r\na=group:BUNDLE audio video\r\nm=audio 1 RTP/SAVPF 103 104 0 8 106 105 13 126\r\n\r\n// ...\r\n\r\na=ssrc:2223794119 label:H4fjnMzxy3dPIgQ7HxuCTLb4wLLLeRHnFxh810\r\n```\r\n\r\nç½‘ç»œå’Œåª’ä½“ä¿¡æ¯çš„é‡‡é›†å’Œäº¤æ¢å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œä½†è¿™ä¸¤ä¸ªè¿‡ç¨‹å¿…é¡»å®Œæˆä¹‹å‰ï¼ŒéŸ³é¢‘å’Œè§†é¢‘æµä¹‹é—´çš„åŒé¾„äººå¯ä»¥å¼€å§‹ã€‚\r\n\r\nç½‘ç»œä¿¡æ¯çš„é‡‡é›†å’Œäº¤æ¢å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œä½†æ˜¯åœ¨å‘é€éŸ³é¢‘å’Œè§†é¢‘å‰éƒ½éœ€è¦å®Œæˆã€‚ã€‚\r\n\r\nè¿™ä¸ªoffer/andwerè¢«å«åš[JSEP](http://tools.ietf.org/html/draft-ietf-rtcweb-jsep-00)(JavaScript Session Establishment Protocol)ï¼Œåœ¨[è¿™é‡Œ]æœ‰ä¸€ä¸ªå¾ˆå¥½çš„WebRTCå®ç°çš„è§£é‡Šã€‚\r\n\r\n![jsep](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/jsep.png)\r\n\r\nä¸€æ—¦è¿™ä¸ªsignalingå®Œæˆäº†ï¼Œæ•°æ®å¯ä»¥ç›´æ¥çš„åœ¨ç«¯åˆ°ç«¯ä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚å¦‚æœå¤±è´¥äº†ï¼Œé€šè¿‡ä¸­ä»‹æœåŠ¡å™¨relayæœåŠ¡è¿›è¡Œè½¬å‘ã€‚Streamingæ˜¯RTCPeerConnectionçš„å·¥ä½œã€‚\r\n### RTCPeerConnection\r\n\r\nRTCPeerConnectionæ˜¯WebRTCçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ç¨³å®šçš„æœ‰æ•ˆç‡çš„ç«¯åˆ°ç«¯ä¼ è¾“æ•°æ®çš„å¥æŸ„ã€‚\r\n\r\nä¸‹é¢æ˜¯ä¸€ä¸ªWebRTCçš„æ¶æ„ï¼Œæ˜¾ç¤ºäº†RTCPeerConnectionçš„ä½œç”¨ï¼Œæ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œç»¿è‰²éƒ¨åˆ†å’Œå¤æ‚ï¼\r\n\r\n![webrtcArchitecture](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/webrtcArchitecture.png)\r\n\r\nä»JavaScriptè§‚ç‚¹çœ‹ï¼Œä»å›¾è¡¨ä¸­ä¸»è¦éœ€è¦ç†è§£RTCPeerConnectionå‘å¼€å‘è€…å±è”½äº†åº•å±‚å¤æ‚çš„ä¸œè¥¿ã€‚WebRTCä½¿ç”¨çš„åè®®å’Œè§£ç å™¨åšäº†å¤§é‡çš„å·¥ä½œæ‰ä½¿å¾—å®æ—¶é€šä¿¡æˆä¸ºäº†å¯èƒ½ï¼Œç”šè‡³åœ¨ä¸å¯é çš„ç½‘ç»œçš„æƒ…å†µä¸‹ï¼š\r\n- æ•°æ®åŒ…ä¸¢åŒ…éšè—\r\n- å›å£°æ¶ˆé™¤\r\n- å®½å¸¦è‡ªé€‚åº”\r\n- åŠ¨æ€æŠ–åŠ¨ç¼“å†²\r\n- TODO è‡ªåŠ¨å¢ç›Šæ§åˆ¶\r\n- é™å™ª\r\n- å›¾ç‰‡æ¸…é™¤\r\n\r\nåœ¨[W3Cä»£ç ](http://www.html5rocks.com/en/tutorials/webrtc/basics/#simpleRTCPeerConnectionExample)ä»signalingè§‚ç‚¹æ˜¾ç¤ºäº†ä¸€ä¸ªç®€åŒ–çš„ä¾‹å­ã€‚ä¸‹é¢æ˜¯ä¸¤ä¸ªä½¿ç”¨WebRTCå·¥ä½œçš„ä¸¤ä¸ªåº”ç”¨ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªç®€å•çš„RTCPeerConnectionçš„ä¾‹å­ï¼›ç¬¬äºŒä¸ªæ—¶ä¸€ä¸ªå®Œå…¨çš„å¯æ“ä½œçš„è§†é¢‘å®¢æˆ·ç«¯ã€‚\r\n### æ²¡æœ‰æœåŠ¡å™¨çš„RTCPeerConnection\r\n\r\nä¸‹é¢çš„ä»£ç æ˜¯ä»[è¿™é‡Œ](https://webrtc.github.io/samples/src/content/peerconnection/pc1/)çš„Demoã€‚åŒ…æ‹¬ç½‘é¡µä¸Šæœ¬åœ°å’Œè¿œç¨‹çš„RTCPeerConnectionã€‚è¿™ä¸ªæ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå‘¼å«å’Œè¢«å‘¼å«éƒ½åœ¨åŒä¸€ä¸ªç½‘é¡µä¸Šï¼Œä½†æ˜¯ç¡®å®ä½¿å¾—ç†è§£RTCPeerConnectionçš„APIæ›´æ¸…æ¥šäº†ï¼Œç”±äºè¿™ä¸ªç•Œé¢çš„RTCPeerConnectionåœ¨æ²¡æœ‰Signalingæ—¶ä¹Ÿå¯ä»¥ç›´æ¥äº¤æ¢ä¿¡æ¯ã€‚\r\n\r\nå…¶ä»–é—®é¢˜ï¼šTODO çœ‹http://www.w3.org/TR/webrtc/#constraintsè·å–æ›´å¤šä¿¡æ¯ã€‚\r\n\r\nåœ¨è¿™é‡Œä¾‹å­ä¸­ï¼Œpc1ä»£è¡¨æœ¬åœ°ï¼Œpc2ä»£è¡¨è¿œç¨‹ã€‚\r\n#### æœ¬åœ°\r\n1. åˆ›å»ºä¸€ä¸ªæ–°çš„RTCPeerConnectionæ·»åŠ getUserMediaè·å–åˆ°çš„æ•°æ®æµã€‚\r\n\r\n```\r\n// servers is an optional config file (see TURN and STUN discussion below)\r\npc1 = new webkitRTCPeerConnection(servers);\r\n// ...\r\npc1.addStream(localStream); \r\n```\r\n1. åˆ›å»ºä¸€ä¸ªofferå¹¶ä¸”è®¾ç½®æœ¬åœ°çš„å…³äºpc1çš„æè¿°ä½œä¸ºå’Œè¿œç¨‹pc2çš„æè¿°ã€‚è¿™åœ¨æ²¡æœ‰ä½¿ç”¨signalingçš„æƒ…å†µä¸‹å¯ä»¥ç›´æ¥å®Œæˆï¼Œå› ä¸ºæœ¬åœ°å’Œè¿œç¨‹éƒ½åœ¨ä¸€ä¸ªç•Œé¢ä¸Šã€‚\r\n\r\n```\r\npc1.createOffer(gotDescription1);\r\n//...\r\nfunction gotDescription1(desc){\r\n  pc1.setLocalDescription(desc);\r\n  trace(\"Offer from pc1 \\n\" + desc.sdp);\r\n  pc2.setRemoteDescription(desc);\r\n  pc2.createAnswer(gotDescription2);\r\n}\r\n```\r\n#### è¿œç¨‹\r\n\r\nåˆ›å»ºpc2ï¼Œæ·»åŠ pc1çš„æµï¼Œåœ¨è§†é¢‘èŠ‚ç‚¹ä¸­æ˜¾ç¤ºï¼š\r\n\r\n```\r\npc2 = new webkitRTCPeerConnection(servers);\r\npc2.onaddstream = gotRemoteStream;\r\n//...\r\nfunction gotRemoteStream(e){\r\n  vid2.src = URL.createObjectURL(e.stream);\r\n}\r\n```\r\n### RTCPeerConnectionå’ŒæœåŠ¡å™¨\r\n\r\nåœ¨çœŸå®çš„ä¸–ç•Œä¸­ï¼ŒWebRTCéœ€è¦æœåŠ¡å™¨ï¼Œä½†æ˜¯æ—¶å¾ˆç®€å•çš„ï¼Œä¸‹é¢çš„å¯èƒ½æ˜¯ç°å®çš„ï¼š\r\n- é€šè¿‡ç”¨æˆ·åå¯ä»¥æ‰¾åˆ°å¯¹æ–¹ã€‚\r\n- WebRTCå®¢æˆ·ç«¯äº¤æ¢ç½‘ç»œä¿¡æ¯ã€‚\r\n- ç«¯åˆ°ç«¯é—´äº¤æ¢åª’ä½“æ•°æ®ä¿¡æ¯ï¼Œä¾‹å¦‚åˆ†è¾¨ç‡å’Œè§†é¢‘æ ¼å¼ã€‚\r\n- WebRTCå®¢æˆ·ç«¯è¿›è¡ŒNATå’Œé˜²ç«å¢™ç©¿é€ã€‚\r\n\r\næ¢ä¸€å¥è¯è¯´ï¼ŒWebRTCéœ€è¦å››ä¸­æœåŠ¡ç±»å‹çš„ä¿¡æ¯ã€‚\r\n- ç”¨æˆ·å‘ç°å’Œé€šä¿¡ã€‚\r\n- Signalingã€‚\r\n- NAT/é˜²ç«å¢™ç©¿é€ã€‚\r\n- å½“ç«¯åˆ°ç«¯é€šä¿¡å¤±è´¥æ—¶ï¼Œé‡‡ç”¨RelayæœåŠ¡é€šä¿¡ã€‚\r\n\r\nNATç©¿é€ã€ç«¯åˆ°ç«¯è¿æ¥ã€ç”¨æˆ·å‘ç°å’Œå»ºç«‹ä¿¡ä»¤æœåŠ¡å™¨è¶…è¿‡äº†æœ¬æ–‡èŒƒç•´ã€‚æˆ‘æƒ³è¯´çš„æ˜¯ï¼ŒSTUNåè®®å’Œå®ƒçš„å»¶ä¼¸ICEå†°æ¡†æ¶å¯ä»¥ä½¿ç”¨RTCPeerConnectionå¤„ç†NATå’Œå…¶ä»–ç½‘ç»œå˜åŒ–ã€‚\r\n\r\nICEæ˜¯ä¸€ä¸ªè¿æ¥ç«¯åˆ°ç«¯çš„æ¡†æ¶ï¼Œä¾‹å¦‚è§†é¢‘å®¢æˆ·ç«¯ã€‚æœ€åˆï¼ŒICEå°è¯•ç›´æ¥è¿æ¥ï¼Œé€šè¿‡é‡‡ç”¨UDPå®ç°æ›´å°‘å»¶è¿Ÿï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒSTUNæœåŠ¡æœ‰ä¸€ä¸ªç®€å•çš„ä»»åŠ¡ï¼šä½¿ä¸€ä¸ªåœ¨é˜²ç«å¢™åé¢çš„è®¾å¤‡æ‰¾å‡ºå…¬ç½‘IPå’Œç«¯å£ã€‚Googleæœ‰ä¸¤ä¸ªSTUNæœåŠ¡å™¨ï¼Œå…¶ä¸­ä¸€ä¸ªåœ¨apprtc.appspot.comä¸ªä¾‹å­ä¸­å°±ä½¿ç”¨äº†ã€‚\r\n\r\n![stun](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/stun.png)\r\n\r\nå¦‚æœUDPå¤±è´¥äº†ï¼ŒICEå°è¯•TCPï¼šé¦–å…ˆæ˜¯HTTPï¼Œç„¶åæ˜¯HTTPSã€‚å¦‚æœç›´æ¥è¿æ¥å¤±è´¥äº†â€”â€”ç‰¹åˆ«çš„æ˜¯å› ä¸ºä¼ä¸šçš„NATå’Œé˜²ç«å¢™â€”â€”ICEä½¿ç”¨ä¸€ä¸ªä¸­ç»§relayçš„TURNæœåŠ¡å™¨ã€‚æ¢å¥è¯è¯´ï¼ŒICEé¦–å…ˆä½¿ç”¨UDPçš„STUNæœåŠ¡å™¨ç›´æ¥ä¸å¯¹ç«¯è¿æ¥ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œåé€€åˆ°TURNæœåŠ¡å™¨ã€‚è¿™è¡¨è¾¾äº†å¯»æ‰¾ç½‘ç»œå’Œç«¯å£çš„è¿‡ç¨‹ã€‚\r\n\r\n![dataPathways](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/dataPathways.png)\r\n\r\nWebRTCå·¥ç¨‹å¸ˆJastinæä¾›äº†å…³äºICEã€STUNå’ŒTURNçš„æ›´å¤šçš„ä¿¡æ¯åœ¨2013å¹´Googleçš„IOå¤§ä¼šä¸Šã€‚([å¹»ç¯ç‰‡](http://io13webrtc.appspot.com/#52)ä¸­æœ‰å…³äºTURNå’ŒSTUNçš„ä¾‹å­)\r\n### ä¸€ä¸ªç®€å•çš„Chatå®¢æˆ·ç«¯\r\n\r\nä¸‹é¢ä½¿ç”¨çš„ä¿¡ä»¤æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ï¼šhttps://apprtc.appspot.comã€‚\r\n\r\n_å¦‚æœä½ è§‰å¾—è¿™æ˜¯æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œä½ å¯èƒ½æ›´å–œæ¬¢æˆ‘ä»¬çš„[WebRTC codelab](https://www.bitbucket.org/webrtc/codelab)ã€‚è¿™ç¯‡æŒ‡å—ä»‹ç»äº†å¦‚ä½•ä¸€æ­¥æ­¥æ„å»ºä¸€ä¸ªå®Œæ•´çš„è§†é¢‘èŠå¤©åº”ç”¨ï¼ŒåŒ…æ‹¬ä½¿ç”¨Socket.ioæ­å»ºä¸€ä¸ªç®€å•çš„ä¿¡ä»¤æœåŠ¡å™¨ã€‚_\r\n\r\n[apprtc.appspot.com](https://apprtc.appspot.com/)æ˜¯ä¸€ä¸ªå°è¯•WebRTCçš„å¥½åœ°æ–¹ï¼Œè¿™é‡Œä½¿ç”¨äº†Signalingå’ŒNAT/firewallä½œä¸ºSTUNæœåŠ¡å™¨ã€‚è¿™ä¸ªåº”ç”¨ä½¿ç”¨[adapter.js](https://github.com/webrtc/adapter)å¤„ç†ä¸åŒçš„RTCPeerConnectionå’ŒgetUserMedia()çš„å®ç°ã€‚\r\n\r\nè¿™ä¸ªä»£ç æ˜¯æ•…æ„å†™çš„æ›´é•¿ä¸€ç‚¹è¾“å‡ºæ—¥å¿—ï¼šæŸ¥çœ‹æ§åˆ¶å°ç†è§£äº‹ä»¶æ‰§è¡Œé¡ºåºã€‚ä¸‹é¢ç»™å‡ºäº†ä¸€ä¸ªè¯¦ç»†çš„ä»£ç ã€‚\r\n### æ¥ä¸‹æ¥\r\n\r\nè¿™ä¸ªDemoä»¥initialize()å‡½æ•°å¼€å§‹ï¼š\r\n\r\n```\r\nfunction initialize() {\r\n    console.log(\"Initializing; room=99688636.\");\r\n    card = document.getElementById(\"card\");\r\n    localVideo = document.getElementById(\"localVideo\");\r\n    miniVideo = document.getElementById(\"miniVideo\");\r\n    remoteVideo = document.getElementById(\"remoteVideo\");\r\n    resetStatus();\r\n    openChannel('AHRlWrqvgCpvbd9B-Gl5vZ2F1BlpwFv0xBUwRgLF/* ...*/');\r\n    doGetUserMedia();\r\n}\r\n```\r\n\r\næ³¨æ„è¢«openChannel()ä½¿ç”¨çš„roomå’Œtokenå˜é‡ï¼Œæ˜¯è¢«Google APPè‡ªå·±æä¾›çš„ï¼šçœ‹ä¸€ä¸‹[è¿™é‡Œ](https://github.com/webrtc/apprtc/blob/master/src/web_app/html/index_template.html)ï¼Œåœ¨è¿™ä¸ªåº“é‡Œçœ‹æ·»åŠ äº†ä»€ä¹ˆå€¼ã€‚\r\n\r\nè¿™ä¸ªä»£ç åˆå§‹åŒ–videoå˜é‡å°†æ˜¾ç¤ºæœ¬åœ°æ‘„åƒå¤´è§†é¢‘æµå’Œè¿œç¨‹å®¢æˆ·ç«¯è§†é¢‘æµã€‚resetStatus()ç®€å•çš„è®¾ç½®çŠ¶æ€ä¿¡æ¯ã€‚\r\n\r\nopenChannel()å‡½æ•°è®¾ç½®WebRTCå®¢æˆ·ç«¯ä¹‹é—´çš„ä¿¡æ¯ã€‚\r\n\r\n```\r\nfunction openChannel(channelToken) {\r\n  console.log(\"Opening channel.\");\r\n  var channel = new goog.appengine.Channel(channelToken);\r\n  var handler = {\r\n    'onopen': onChannelOpened,\r\n    'onmessage': onChannelMessage,\r\n    'onerror': onChannelError,\r\n    'onclose': onChannelClosed\r\n  };\r\n  socket = channel.open(handler);\r\n}\r\n```\r\n\r\nå¯¹äºSignalingï¼Œè¿™ä¸ªDemoæ˜¯ç”¨çš„æ˜¯[Channel API](http://code.google.com/appengine/docs/python/channel/overview.html)ï¼Œè¿™ä½¿å¾—å®¢æˆ·ç«¯é—´JavaScriptæ²¡æœ‰è½®è¯¢ä¹Ÿå¯ä»¥é€šä¿¡ã€‚(WebRTC Signalingä¸Šé¢æœ‰è¯¦ç»†ä»‹ç»)ã€‚\r\n\r\n![apprtcArchitecture](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/apprtcArchitecture.png)\r\n\r\nä½¿ç”¨Channel APIåˆ›å»ºä¸€ä¸ªé€šé“å°±åƒè¿™æ ·ï¼š\r\n1. Clientç”Ÿæˆä¸€ä¸ªç‹¬ç‰¹çš„IDã€‚\r\n2. Client Aå‘APP Engineè¯·æ±‚ä¸€ä¸ªæ•°æ®ç®¡é“ï¼Œå‘é€è¿™ä¸ªIDã€‚\r\n3. APP Engineé€šè¿‡Channel APIï¼Œä¸ºè¿™ä¸ªIDå’ŒTokenè¯·æ±‚ä¸€ä¸ªæ•°æ®ç®¡é“ã€‚\r\n4. APPå°†è¿™ä¸ªtokenè¿”è¿˜ç»™Aã€‚\r\n5. Clientæ‰“å¼€Socketè¿æ¥ç›‘å¬è¿™ä¸ªæœåŠ¡å™¨çš„ç®¡é“ã€‚\r\n\r\n![channelEstablishing](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/channelEstablishing.png)\r\n\r\nå‘é€æ¶ˆæ¯åƒè¿™æ ·ï¼š\r\n1. Client Bå‘é€ä¸€ä¸ªPOSTè¯·æ±‚ç»™App Engineã€‚\r\n2. App Engineé€šè¿‡ä¸€ä¸ªè¯·æ±‚ç»™Channelã€‚\r\n3. Channelæºå¸¦ç€ä¿¡æ¯ç»™Client Aã€‚\r\n4. Client Açš„æ¥å—æ¶ˆæ¯å›è°ƒè¢«è°ƒç”¨ã€‚\r\n\r\n![channelSending](https://raw.githubusercontent.com/RWebRTC/Blog/pictures/pictures/channelSending.png)\r\n"},{"number":4,"title":"[è¯‘] Android ä¸Š WebRTC ä»‹ç»","created_at":"2016-11-24 07:09:55","body":"## åŸæ–‡\r\n\r\n```\r\nhttps://tech.appear.in/2015/05/25/Introduction-to-WebRTC-on-Android/\r\n```\r\n## ç¿»è¯‘\r\n\r\nWebRTCè¢«ç§°ä¸ºå¼€æºç½‘ç»œå‘å±•çš„åˆä¸€å¤§é‡Œç¨‹ç¢‘ï¼Œè¢«çœ‹ä½œä¸ºè¿‘äº›å¹´å¯¹Webæ ‡å‡†çš„æœ€é‡è¦çš„åˆ›æ–°ã€‚WebRTCå…è®¸å¼€å‘è€…åœ¨ç½‘é¡µåº”ç”¨ä¸­æ·»åŠ éŸ³è§†é¢‘ï¼Œå¹¶ä¸”æŠ˜ä¸éœ€è¦å¤æ‚çš„ä»£ç å’Œæ˜‚è´µçš„å…¶ä»–çš„åŸºç¡€è®¾å¤‡ã€‚ç°åœ¨æœ‰Chromeã€Firfoxå’ŒOperaéƒ½å·²ç»æ”¯æŒäº†WebRTCï¼Œå¹¶å°†æœ‰æ›´å¤šçš„æµè§ˆå™¨ä¹Ÿå°†ä¼šæ”¯æŒï¼Œæ•°åäº¿çš„è®¾å¤‡å·²ç»æ”¯æŒäº†ã€‚\r\n\r\nç„¶è€Œï¼ŒWebRTCä¹Ÿè¢«ç§°ä¸ºåŸå¸‚ç¥è¯(å¾ˆå¤šäººéƒ½ç›¸ä¿¡ä½†å®é™…ä¸Šå¹¶ä¸çœŸå®çš„æ•…äº‹)ï¼šWebRTCä»…ä»…å¯ä»¥åº”ç”¨åœ¨æµè§ˆå™¨ä¸Šã€‚äº‹å®ä¸Šï¼ŒWebRTCæœ€é‡è¦çš„ä¸€ä¸ªç‰¹å¾æ˜¯å®ƒå…è®¸nativå’Œweb appä¹‹é—´çš„äº’æ“ä½œ(è·¨å¹³å°)çš„ã€‚å¾ˆå°‘æœ‰äººåˆ©ç”¨è¿™ä¸€ä¸ªç‰¹å¾ä¼˜åŠ¿ã€‚\r\n\r\nè¿™ç¯‡Blogå°†ä»‹ç»ç»™ä½ å¦‚ä½•åœ¨ä½ çš„Androidåº”ç”¨ä¸­é›†æˆWebRTCï¼Œä½¿ç”¨äº†WebRTCæä¾›çš„æœ¬åœ°åº“ï¼Œæä¾›è€…:[WebRTC Initiative](http://www.webrtc.org/)ã€‚æˆ‘ä»¬ä¸ä¼šå¼ºè°ƒé€šè¿‡signallingå»ºç«‹è¿æ¥ï¼Œè€Œæ˜¯å¼ºè°ƒAndroidå’Œæµè§ˆå™¨é—´çš„ç›¸ä¼¼å’Œå·®å¼‚ã€‚æ­£å¦‚ä½ å°†çœ‹åˆ°çš„ï¼Œå°†åŒ…å«ä¸€äº›è¿æ¥åˆ°Webçš„APIsï¼Œå¦‚æœä½ æƒ³çœ‹åˆ°æ›´å¤šçš„åŸºæœ¬çš„å…³äºWebRTCçš„ä»‹ç»ï¼Œè¯·çœ‹ï¼š[Sam Duttonâ€™s Getting started with WebRTC](http://www.html5rocks.com/en/tutorials/webrtc/basics/)ã€‚\r\n## åœ¨ä½ çš„é¡¹ç›®ä¸­æ·»åŠ WebRTCçš„åº“\r\n\r\n```\r\nä»¥ä¸‹å†…å®¹ä½¿ç”¨WebRTCåº“ä¸­çš„9127ç‰ˆæœ¬ã€‚\r\n```\r\n\r\nç¬¬ä¸€ä»¶äº‹æ˜¯æ·»åŠ WebRTCåº“åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚ä½ å¯ä»¥è‡ªå·±[ç¼–è¯‘](http://www.webrtc.org/native-code/android)è¿™ä¸ªåº“ï¼Œä½†æ˜¯ç›¸ä¿¡æˆ‘ï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œé¿å…è‡ªå·±ç¼–è¯‘ã€‚ç›¸åï¼Œä½¿ç”¨[ä¸­å¤®å‚åº“](https://oss.sonatype.org/content/groups/public/io/pristine/)ä¸­å·²ç»ç¼–è¯‘å¥½çš„æ–‡ä»¶ã€‚\r\n\r\nä¸ºäº†åœ¨ä½ çš„é¡¹ç›®ä¸­æ·»åŠ è¿™ä¸ªæ–‡ä»¶ï¼Œéœ€è¦è¿™æ ·å†™ä¾èµ–ï¼š\r\n\r\n```\r\ncompile 'io.pristine:libjingle:9127@aar'\r\n```\r\n\r\nåŒæ­¥ä½ çš„é¡¹ç›®ï¼Œä½ å·²ç»æ‹¥æœ‰äº†å¯ä»¥ä½¿ç”¨çš„åº“æ–‡ä»¶äº†ï¼\r\n### æƒé™\r\n\r\nå°±åƒæ‰€æœ‰çš„Androidä¸€æ ·ï¼Œä½¿ç”¨è¿™ä¸ªAPIä½ éœ€è¦å£°æ˜ä¸€äº›æƒé™ã€‚WebRTCä¹Ÿä¸ä¾‹å¤–ã€‚æ ¹æ®ä½ ç°åœ¨ä½¿ç”¨çš„æˆ–è€…æ˜¯å°†æ¥ä¼šä½¿ç”¨çš„æƒé™ï¼Œä¾‹å¦‚éŸ³é¢‘å’Œè§†é¢‘ï¼Œä½ éœ€è¦è®¾ç½®ä¸åŒçš„æƒé™ã€‚ç¡®ä¿ä½ åªè¯·æ±‚ä¸€æ¬¡ã€‚ä¸€ä¸ªå¯ç”¨çš„è§†é¢‘èŠå¤©åº”ç”¨çš„æƒé™è®¾ç½®ï¼š\r\n\r\n```\r\n<uses-feature android:name=\"android.hardware.camera\" />\r\n<uses-feature android:name=\"android.hardware.camera.autofocus\" />\r\n<uses-feature android:glEsVersion=\"0x00020000\" android:required=\"true\" />\r\n\r\n<uses-permission android:name=\"android.permission.CAMERA\" />\r\n<uses-permission android:name=\"android.permission.RECORD_AUDIO\" />\r\n<uses-permission android:name=\"android.permission.INTERNET\" />\r\n<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n<uses-permission android:name=\"android.permission.MODIFY_AUDIO_SETTINGS\" />\r\n```\r\n## ç¯å…‰ï¼Œç›¸æœºâ€¦â€¦\r\n\r\nå½“åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨WebRTCæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€äº›å¾ˆå¥½ç”¨çš„APIå’Œæ–‡æ¡£å¯ä»¥å‚è€ƒï¼š[navigator.getUserMedia](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/getUserMedia)å’Œ[RTCPeerConnection](https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection)åŒ…å«äº†å¤§éƒ¨åˆ†ä½ éœ€è¦çš„ä¸œè¥¿ã€‚ç»“åˆvideoæ ‡ç­¾ï¼Œæœ¬åœ°å’Œè¿œç¨‹æ•°æ®æµä¸€èµ·ä½¿ç”¨ã€‚\r\n\r\nå¹¸è¿çš„è™½ç„¶ä»–ä»¬æœ‰ä¸åŒçš„åå­—ï¼Œä½†æ˜¯åœ¨Androidè¿™äº›APIä¹Ÿä¸æ˜¯å¾ˆéš¾ã€‚åœ¨Androidä¸­ï¼Œæˆ‘ä»¬è®¨è®º[VideoCapturerAndroid](https://tech.appear.in/2015/05/25/Introduction-to-WebRTC-on-Android/#VideoCapturerAndroid\r\n\r\n[VideoRenderer](https://tech.appear.in/2015/05/25/Introduction-to-WebRTC-on-Android/#VideoRenderer\r\n\r\n[MediaStream](https://tech.appear.in/2015/05/25/Introduction-to-WebRTC-on-Android/#MediaStream\r\n\r\n[PeerConnection](https://tech.appear.in/2015/05/25/Introduction-to-WebRTC-on-Android/#PeerConnection)\r\n\r\n[PeerConnectionFactory](https://tech.appear.in/2015/05/25/Introduction-to-WebRTC-on-Android/#PeerConnectionFactory)ã€‚æˆ‘ä»¬æ·±å…¥æ¯ä¸€ä¸ªæ¢è®¨ä¸€ä¸‹ã€‚\r\n\r\nç„¶è€Œï¼Œåœ¨ä½ å¼€å§‹åšä»»ä½•è¿™äº›äº‹æƒ…å‰ï¼Œéœ€è¦åˆ›å»ºPeerConnectionFactoryï¼ŒAndroidçš„WebRTCçš„æ ¸å¿ƒã€‚\r\n### PeerConnectionFactory\r\n\r\nWebRTCåœ¨Androidä¸Šæ‰€æœ‰äº‹æƒ…çš„æ ¸å¿ƒã€‚ç†è§£è¿™ä¸ªç±»å¹¶ä¸”çŸ¥é“å®ƒå¦‚ä½•å·¥ä½œå¯¹å½»åº•äº†è§£Androidä¸Šçš„WebRTCè‡³å…³é‡è¦ã€‚å®ƒä¹Ÿå’Œä½ æœŸæœ›çš„æœ‰ç‚¹ä¸åŒï¼Œå› æ­¤è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹å®ƒå§ï¼Œ\r\n\r\né¦–å…ˆï¼Œåˆå§‹åŒ–PeerConnectionFactory\r\n\r\n```\r\n// First, we initiate the PeerConnectionFactory with\r\n// our application context and some options.\r\nPeerConnectionFactory.initializeAndroidGlobals(\r\n    context,\r\n    initializeAudio,\r\n    initializeVideo,\r\n    videoCodecHwAcceleration,\r\n    renderEGLContext);\r\n```\r\n\r\nä¸ºäº†ç†è§£å®ƒå¦‚ä½•å·¥ä½œï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ¯ä¸ªå‚æ•°ï¼š\r\n##### context\r\n\r\nç®€å•çš„ApplicationContextï¼Œæˆ–è€…ä»»ä½•å…¶ä»–Contextç›¸å…³çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè·Ÿä½ ä»¥å‰ä½¿ç”¨çš„ä¸€è‡´ã€‚ing around.\r\n##### initializeAudio\r\n\r\nbooleanå€¼ï¼Œåˆå§‹åŒ–éŸ³é¢‘éƒ¨åˆ†ã€‚\r\n##### initializeVideo\r\n\r\nbooleanå€¼ï¼Œåˆå§‹åŒ–è§†é¢‘éƒ¨åˆ†ã€‚è·³è¿‡è¿™ä¸¤ä¸ªä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå…è®¸ä½ è·³è¿‡è¯¢é—®APIæƒé™ã€‚ä¾‹å¦‚DataChannelåº”ç”¨ã€‚\r\n##### videoCodecHwAcceleration\r\n\r\nbooleanå€¼ï¼Œæ˜¯å¦å¯ç”¨ç¡¬ä»¶åŠ é€Ÿã€‚\r\n##### renderEGLContext\r\n\r\nå¯ä»¥æä¾›è¿™ä¸ªå€¼åˆ›å»ºè¿›ç¨‹æ”¯æŒHWè§†é¢‘ç¼–ç ã€‚å¯ä»¥è¢«è®¾ç½®ä¸ºnullï¼Œè¿™æ ·çš„è¯å°±ç¼–ç è§†é¢‘ä½¿ç”¨yuv420è€Œä¸æ˜¯textureå¸§ã€‚\r\n\r\ninitializeAndroidGlobalsä¹Ÿå°†è¿”å›ä¸€ä¸ªbooleanå€¼ï¼Œæ­£å¸¸åˆå§‹åŒ–è¿”å›OKï¼Œæœ‰æœªåˆå§‹åŒ–æˆåŠŸæƒ…å†µè¿”å›falseã€‚å¦‚æœè¿”å›falseæ—¶ï¼Œæ˜¯æœ€å¥½çš„ç»ƒä¹ çš„æœºä¼šã€‚æŸ¥çœ‹æºä»£ç è·å–æ›´å¤šä¿¡æ¯ã€‚\r\n\r\nå‡è®¾ä¸€åˆ‡æ­£å¸¸ï¼Œä½ å¯ä»¥ä½¿ç”¨PeerConnectionFactoryçš„æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œä¸å…¶ä»–ç±»ä¸€æ ·ã€‚\r\n\r\n```\r\nPeerConnectionFactory peerConnectionFactory = new PeerConnectionFactory();\r\n```\r\n## æ¥ä¸‹æ¥è·å–åª’ä½“å¯¹è±¡è¿›è¡Œæ¸²æŸ“\r\n\r\nä¸€æ—¦æœ‰äº†peerConnectionFactoryå®ä¾‹ï¼Œå°±åº”è¯¥ä»ä½ çš„è®¾å¤‡ä¸Šè·å–éŸ³é¢‘å’Œè§†é¢‘äº†ï¼Œæœ€ç»ˆæ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚åœ¨ç½‘é¡µä¸Šï¼Œä½ æœ‰getUserMediaå’Œvideoå¯ä»¥ç”¨ã€‚åœ¨Androidä¸Šä¹Ÿå¾ˆç±»ä¼¼ï¼Œä½†æ˜¯éœ€è¦ä¸€ç‚¹å±ç›¸åœ¨Androidä¸Šæˆ‘ä»¬è®¨è®ºï¼š\r\nVideoCapturerAndroidï¼ŒVideoSourceï¼ŒVideoTrackå’ŒVideoRendererï¼Œéƒ½æ˜¯ä»¥VideoCapturerAndroidå¼€å§‹ã€‚\r\n### VideoCapturerAndroid\r\n\r\nVideoCapturerAndroidç±»æ˜¯ä¸€ä¸ªç›¸æœºçš„åŒ…è£…ç±»ï¼Œæä¾›è®¿é—®è®¾å¤‡ç›¸æœºæ•°æ®æµçš„æ±Ÿè¾¹æ–¹æ³•ã€‚å…è®¸ä½ è·å–è®¾å¤‡æ•°é‡ï¼Œè·å–å‰ç½®åç½®æ‘„åƒå¤´\r\n\r\n```\r\n// Returns the number of camera devices\r\nVideoCapturerAndroid.getDeviceCount();\r\n\r\n// Returns the front face device name\r\nVideoCapturerAndroid.getNameOfFrontFacingDevice();\r\n// Returns the back facing device name\r\nVideoCapturerAndroid.getNameOfBackFacingDevice();\r\n\r\n// Creates a VideoCapturerAndroid instance for the device name\r\nVideoCapturerAndroid.create(name);\r\n```\r\n\r\nä½¿ç”¨VideoCapturerAndroidç±»çš„å®ä¾‹ï¼Œå¯ä»¥åˆ›å»ºåŒ…å«ç›¸æœºè§†é¢‘æµçš„MediaStreamï¼Œä½ å¯ä»¥ç»™å¯¹æ–¹å‘é€æ•°æ®ã€‚åœ¨è¿™ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æ€æ ·åœ¨åº”ç”¨ä¸­æ˜¾ç¤ºæˆ‘ä»¬è‡ªå·±çš„è§†é¢‘ã€‚\r\n### VideoSource/VideoTrack\r\n\r\nä¸ºäº†ä»VideoCaptureå®ä¾‹ä¸­è·å–æœ‰ç”¨çš„ä¸œè¥¿ï¼Œè·å–PeerConnectionéœ€è¦çš„MediaStreamï¼Œç”šè‡³ä»…ä»…ä½¿ç”¨ï¼Œä½ éƒ½éœ€è¦æµè§ˆä¸€éVideoSourceå’ŒVideoTrackç±»çš„ä»£ç ã€‚\r\n\r\nVideoSourceå¯ä»¥å¼€å§‹æˆ–åœæ­¢ä½ çš„è®¾å¤‡ã€‚åœ¨æ— ç”¨åœæ­¢æŠ“å–ä¿¡æ¯æœ‰åŠ©äºç”µæ± ä½¿ç”¨å¯¿å‘½çš„å»¶é•¿ã€‚\r\n\r\nVideoTrackæ˜¯ä¸€ä¸ªæ·»åŠ VideoSourceåˆ°MediaStreamå¯¹è±¡çš„ä¸€ä¸ªåŒ…è£…ã€‚\r\n\r\nè®©æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬ä¸€èµ·ä½¿ç”¨æ—¶çš„ä»£ç ã€‚captureræ˜¯VideoCapturerçš„å®ä¾‹ï¼ŒvideoConstraintsæ˜¯MediaConstraintsçš„å®ä¾‹ã€‚\r\n\r\n```\r\n// First we create a VideoSource\r\nVideoSource videoSource =\r\n    peerConnectionFactory.createVideoSource(capturer, videoConstraints);\r\n\r\n// Once we have that, we can create our VideoTrack\r\n// Note that VIDEO_TRACK_ID can be any string that uniquely\r\n// identifies that video track in your application\r\nVideoTrack localVideoTrack =\r\n    peerConnectionFactory.createVideoTrack(VIDEO_TRACK_ID, videoSource);\r\n```\r\n### AudioSource/AudioTrack\r\n\r\né™¤äº†ä¸éœ€è¦AudioCapturerè·å–éº¦å…‹é£æ•°æ®ï¼ŒAudioSource/AudioTrackå’ŒVideoSource/VideoTrackå¾ˆç±»ä¼¼ã€‚audioConstraintsæ˜¯MediaContraintsçš„å®ä¾‹ã€‚\r\n\r\n```\r\n// First we create an AudioSource\r\nAudioSource audioSource =\r\n    peerConnectionFactory.createAudioSource(audioConstraints);\r\n\r\n// Once we have that, we can create our AudioTrack\r\n// Note that AUDIO_TRACK_ID can be any string that uniquely\r\n// identifies that audio track in your application\r\nAudioTrack localAudioTrack =\r\n    peerConnectionFactory.createAudioTrack(AUDIO_TRACK_ID, audioSource);\r\n```\r\n### VideoRenderer\r\n\r\nå¯¹äºæµè§ˆå™¨ä¸Šçš„WebRTCï¼Œä½ å¯èƒ½å¾ˆç†Ÿæ‚‰ä½¿ç”¨videoæ˜¾ç¤ºé€šè¿‡getUserMeidaè·å–åˆ°çš„MediaStreamåˆ°çš„æ•°æ®ã€‚ç„¶è€Œåœ¨Androidä¸Šï¼Œæ²¡æœ‰videoæ ‡ç­¾ã€‚è·Ÿè¸ªVideoRendererï¼ŒWebRTCåº“å…è®¸ä½ å®ç°ä½ è‡ªå·±çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œä¹Ÿæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„é»˜è®¤çš„æ–¹æ³•[VideoRendererGui](https://chromium.googlesource.com/external/webrtc/+/master/talk/app/webrtc/java/android/org/webrtc/VideoRendererGui.java)ï¼Œç®€å•æ¥è¯´ï¼ŒVideoRendererGuiæ˜¯ä¸€ä¸ªGLSurfaceViewï¼Œåœ¨è¿™ä¹‹ä¸Šï¼Œå¯ä»¥æ˜¾ç¤ºè§†é¢‘æµã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è®¾ç½®ï¼ŒåŒ…æ‹¬å¢åŠ æˆ‘ä»¬çš„rendereråˆ°VideoTrackä¸Šã€‚\r\n\r\n```\r\n// To create our VideoRenderer, we can use the\r\n// included VideoRendererGui for simplicity\r\n// First we need to set the GLSurfaceView that it should render to\r\nGLSurfaceView videoView = (GLSurfaceView) findViewById(R.id.glview_call);\r\n\r\n// Then we set that view, and pass a Runnable\r\n// to run once the surface is ready\r\nVideoRendererGui.setView(videoView, runnable);\r\n\r\n// Now that VideoRendererGui is ready, we can get our VideoRenderer\r\nVideoRenderer renderer = VideoRendererGui.createGui(x, y, width, height);\r\n\r\n// And finally, with our VideoRenderer ready, we\r\n// can add our renderer to the VideoTrack.\r\nlocalVideoTrack.addRenderer(renderer);\r\n```\r\n\r\nä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯createGuiéœ€è¦å››ä¸ªå‚æ•°ã€‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªGLSurfaceViewæ¸²æŸ“æ‰€æœ‰çš„è§†é¢‘ã€‚æ­£å¦‚çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤šä¸ªGLSurfaceViewsï¼Œè¿™æ„å‘³ç€x/yå°†ä»0åˆ°åˆé€‚çš„èŒƒå›´å†…å˜åŒ–ã€‚è¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚\r\n### MediaConstraints\r\n\r\nè¿™ä¸ªMediaConstraintsæ˜¯WebRTCæ”¯æŒå°†è§†é¢‘å’ŒéŸ³é¢‘æ”¾å…¥MediaStreamçš„æ–¹å¼ã€‚çœ‹è¿™ä¸ªæ”¯æŒçš„[è§„èŒƒ](https://w3c.github.io/mediacapture-main/#idl-def-MediaTrackSupportedConstraints)ï¼Œå¤§å¤šæ•°æ–¹æ³•éƒ½éœ€è¦MediaContraintsçš„å®ä¾‹ã€‚\r\n\r\n```\r\nMediaConstraints audioConstraints = new MediaConstraints();\r\n```\r\n\r\nä¸ºäº†å®šåˆ¶æ›´å¤šçš„é™åˆ¶ï¼Œå¯ä»¥å®šä¹‰é”®å€¼å¯¹ï¼Œå¹¶å°†ä»–ä»¬æ”¾åˆ°çº¦æŸåˆ—è¡¨ä¸­ã€‚\r\n### MediaStream\r\n\r\nç°åœ¨æ˜¯æ—¶å€™è®¨è®ºå…¶ä»–éƒ¨åˆ†çš„åŠŸèƒ½äº†ã€‚åœ¨ç½‘é¡µä¸Šï¼Œæˆ‘ä»¬å¯èƒ½å¾ˆç†Ÿæ‚‰MediaStreamçš„æ¦‚å¿µäº†ï¼ŒgetUserMediaç›´æ¥è¿”å›ä¸€ä¸ªMediaStreamï¼Œä½ å¯ä»¥ç›´æ¥å°†å…¶æ·»åŠ åˆ°RTCPeerConnectionä¸­å‘é€ç»™å¯¹ç«¯ã€‚å¯¹äºAndroidä¹Ÿæ˜¯ä¸€æ ·ï¼Œé™¤äº†æˆ‘ä»¬å¿…é¡»åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„MediaStreamã€‚è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æ€æ ·å¯ä»¥æ·»åŠ VideoTrackå’ŒAudioTrackåˆ°ä¸€ä¸ªæ°å½“çš„MediaStreamã€‚\r\n\r\n```\r\n// We start out with an empty MediaStream object,\r\n// created with help from our PeerConnectionFactory\r\n// Note that LOCAL_MEDIA_STREAM_ID can be any string\r\nMediaStream mediaStream = peerConnectionFactory.createLocalMediaStream(LOCAL_MEDIA_STREAM_ID);\r\n\r\n// Now we can add our tracks.\r\nmediaStream.addTrack(localVideoTrack);\r\nmediaStream.addTrack(localAudioTrack);\r\n```\r\n## ä½ å¥½ï¼Œæœ‰äººå—ï¼Ÿ\r\n\r\næˆ‘ä»¬åœ¨ä¸€ä¸ªMediaStreamå®ä½“ä¸­æœ‰äº†éŸ³è§†é¢‘æµï¼Œé™¤äº†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œä¹Ÿåº”è¯¥ä¼ é€’ç»™å¯¹æ–¹äº†ã€‚å°½ç®¡æœ¬æ–‡ä¸åŒ…æ‹¬å¦‚ä½•åˆ›å»ºæ•°æ®æµç®¡é“çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†æµè§ˆä¸€éæ¯ä¸ªAPIçš„æ–¹æ³•å¹¶è§£é‡Šä¸Webå¦‚ä½•ç›¸å…³ã€‚AppRTCä½¿ç”¨[autobahn](http://autobahn.ws/android/)ä½¿WebRTCè¿æ¥åˆ°ä¿¡ä»¤æœåŠ¡å™¨ã€‚æˆ‘å»ºè®®ä½ æ£€å‡ºé¡¹ç›®ï¼Œè¯¦ç»†äº†è§£ä¸€ä¸‹Androidå¦‚ä½•è®¾ç½®ä¿¡ä»¤æœåŠ¡å™¨ã€‚\r\n### PeerConnection\r\n\r\nç°åœ¨æˆ‘ä»¬æœ‰äº†MediaStreamï¼Œæˆ‘ä»¬å¯ä»¥è¿æ¥åˆ°å¯¹æ–¹äº†ï¼Œå¹¸è¿çš„æ˜¯è¿™ä¸€éƒ¨åˆ†ä¸Webå¾ˆç±»ä¼¼ï¼Œå› æ­¤å¦‚æœä½ ç†Ÿæ‚‰æµè§ˆå™¨ä¸Šçš„WebRTCï¼Œè¿™éƒ¨åˆ†å’Œç›´æ¥ã€‚åœ¨PeerConnectionFactoryçš„å¸®åŠ©ä¸‹åˆ›å»ºä¸€ä¸ªPeerConnectionæ˜¯å®¹æ˜“çš„ã€‚\r\n\r\n```\r\nPeerConnection peerConnection = peerConnectionFactory.createPeerConnection(\r\n    iceServers,\r\n    constraints,\r\n    observer);\r\n```\r\n\r\nå‚æ•°å¦‚ä¸‹ï¼š\r\n##### iceServers\r\n\r\n```\r\nå‘è¿æ¥åˆ°å¤–ç½‘è¿™ä¸ªæ˜¯å¿…è¦çš„ï¼Œæ·»åŠ STUNå’ŒTURNæœåŠ¡å™¨å¯ä»¥å¸®åŠ©ä½ è¿æ¥ã€‚\r\n```\r\n##### constraints\r\n\r\n```\r\nä¸€ä¸ªMediaConstrainsçš„å®ä¾‹ã€‚åº”è¯¥åŒ…å«offerToRecieveAudioå’ŒofferToRecieveVideoã€‚\r\n```\r\n##### observer\r\n\r\n```\r\nä¸€ä¸ªPeerConnectionObserverçš„å®ä¾‹ã€‚\r\n```\r\n\r\nè¿™ä¸ªPeerConnection APIä¸webå¾ˆç›¸ä¼¼ï¼ŒåŒ…æ‹¬åƒaddStreamã€addIceCandidateã€createOfferã€createAnswerã€getLocalDescriptionã€setRemoteDescriptionä¸€ç±»çš„å‡½æ•°ã€‚é€šè¿‡[Getting started with WebRTC](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-rtcpeerconnection)æŸ¥çœ‹ä¸¤ç«¯æ€æ ·ä¸€èµ·å·¥ä½œï¼Œæˆ–è€…çœ‹[AppRTC](https://chromium.googlesource.com/external/webrtc/+/master/talk)çœ‹WebRTCåº”ç”¨æ€æ ·å·¥ä½œçš„ã€‚è®©æˆ‘ä»¬å¿«é€Ÿçš„çœ‹ä¸€ä¸‹æ¯ä¸ªå‡½æ•°æ€ä¹ˆå·¥ä½œçš„ã€‚\r\n### addStream\r\n\r\nç”¨æ¥å°†MediaStreamæ·»åŠ åˆ°PeerConnectionä¸­ã€‚å¦‚æœä½ æƒ³è®©åˆ«äººçœ‹åˆ°ä½ å¬åˆ°ä½ ï¼Œå°±éœ€è¦è¿™ä¸ªå‡½æ•°ã€‚\r\n### addCandidate\r\n\r\nTODO [IceCandidates](http://stackoverflow.com/a/21071464)ä»…åˆ›å»ºä¸€æ¬¡ï¼Œå…è®¸å…¶ä»–äººä¸ä½ è¿æ¥ã€‚\r\n### createOffer/createAnswer\r\n\r\nTODO è¿™ä¸¤ä¸ªç”¨æ¥åˆå§‹åŒ–é€šè¯è®¾ç½®ã€‚\r\n### setLocalDescriptionå’ŒsetRemoteDescription\r\n\r\nTODO è®¾ç½®SDPã€‚\r\n### PeerConnectionObserver\r\n\r\nTODO æä¾›è¿™ä¸ªPeerConnectionäº‹ä»¶çš„è§‚å¯Ÿè€…ã€‚\r\n## æœ€å\r\n\r\næ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œå½“ä½ å¯¹Webå¾ˆç†Ÿæ‚‰æ—¶ï¼Œè¿™ä¸ªAndroidçš„APIæ˜¯å¾ˆç®€å•ç›´æ¥çš„ã€‚ä½¿ç”¨ä¸Šé¢çš„å·¥å…·ï¼Œä½ å¯ä»¥å¼€å‘ä¸€ä¸ªWebRTCçš„APPï¼Œæ•°ç™¾ä¸‡çš„è®¾å¤‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚\r\n\r\nWebRTCå¼€æ”¾ç»™æˆ‘æˆ‘ä»¬æ‰€æœ‰äººï¼Œå¯¹äºå¼€å‘è€…å…è´¹ï¼Œå¯¹ç”¨æˆ·å…è´¹ã€‚å®ƒçš„ä½¿ç”¨ä¸ä»…ä»…åœ¨è§†é¢‘èŠå¤©ï¼Œæˆ‘ä»¬ä¹Ÿçœ‹åˆ°åœ¨åŒ»ç–—ï¼Œæ–‡ä»¶ä¼ è¾“ç”šè‡³åœ¨æ¸¸æˆä¸­éƒ½æœ‰ä½¿ç”¨ã€‚\r\n\r\nä¸ºäº†æŸ¥çœ‹WebRTCçš„ä¾‹å­ï¼Œæ£€å‡ºappear.inåœ¨[Android](https://play.google.com/store/apps/details?id=appear.in.app&referrer=utm_source%3Dtech.appear.in%26utm_medium%3Dblog%26utm_campaign%3Dandroid-launch-may15)å’Œ[iOS](https://itunes.apple.com/app/apple-store/id878583078?pt=1259761&ct=tech.appear.in&mt=8)ä¸Šã€‚å®ƒåœ¨æµè§ˆå™¨ä¸Šå’Œåº”ç”¨ä¸Šéƒ½å®Œç¾çš„å·¥ä½œç€ï¼Œä¸€èµ·å…«ä¸ªäººåœ¨ä¸€ä¸ªæˆ¿é—´ä¸­éƒ½æ˜¯å…è´¹çš„ï¼Œä¸éœ€è¦å®‰è£…å’Œç™»é™†ã€‚\r\n\r\nå»å§ï¼Œåˆ›å»ºä¸€äº›æ–°çš„ä¸ä¸€æ ·çš„ä¸œè¥¿å§ï¼\r\n"},{"number":3,"title":"Android ç³»ç»Ÿå¯åŠ¨æµç¨‹","created_at":"2016-11-24 07:09:15","body":"### è½¬è½½è‡ª\r\n\r\n[æ«å¯’ - ç®€ä¹¦](http://www.jianshu.com/users/ac4e3d0f6a81/latest_articles)ï¼Œç•¥ä½œä¿®æ”¹ã€‚æœ¬æ–‡åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š**ç»¼è¿° Android ç³»ç»Ÿå¯åŠ¨**ï¼Œ**Android çš„ init è¿›ç¨‹å¯åŠ¨è¿‡ç¨‹**ï¼Œ**Zygote çš„å¯åŠ¨è¿‡ç¨‹**ã€‚\r\n\r\n### æ­£æ–‡\r\n\r\n# Android ç³»ç»Ÿå¯åŠ¨\r\n\r\nå¯¹äºAndroidç³»ç»Ÿæ•´ä¸ªå¯åŠ¨è¿‡ç¨‹æ¥è¯´ï¼ŒåŸºæœ¬å¯ä»¥åˆ’åˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼šBootloader å¼•å¯¼ã€Linux kernel å¯åŠ¨ã€Android å¯åŠ¨ã€‚å¦‚ä¸‹çš„æµç¨‹å›¾å¯ä»¥çœ‹å‡ºä¸‰ä¸ªé˜¶æ®µçš„æ‰§è¡Œé¡ºåºå’Œè”ç³»ï¼ˆä¸€å¼ å›¾çœ‹ä¸æ‡‚å°±çœ‹ä¸‰å¼ å›¾ï¼‰ã€‚\r\n\r\n![112356615](https://cloud.githubusercontent.com/assets/21374839/20380308/35924eaa-acdc-11e6-9006-30d561fcf22f.jpg)\r\n\r\n![112356709](https://cloud.githubusercontent.com/assets/21374839/20380307/3591c4d0-acdc-11e6-9177-34a563337b36.png)\r\n\r\n![2848265-3](https://cloud.githubusercontent.com/assets/21374839/20346255/0c78c6b2-ac36-11e6-9472-2c350b89f817.png)\r\n\r\n[åŸå›¾](https://cloud.githubusercontent.com/assets/21374839/20430762/3797d706-add1-11e6-97e9-1d61add0dbc2.png)\r\n![naotu baidu com_file_215b19ae3f2187344a484be8a67a4e82 token e5be85bce42717c0](https://cloud.githubusercontent.com/assets/21374839/20430762/3797d706-add1-11e6-97e9-1d61add0dbc2.png)\r\n\r\n### Bootloader å¼•å¯¼\r\n\r\nBootLoaderæ˜¯åœ¨æ“ä½œç³»ç»Ÿè¿è¡Œä¹‹å‰è¿è¡Œçš„ä¸€æ®µç¨‹åºï¼Œå®ƒå¯ä»¥å°†ç³»ç»Ÿçš„è½¯ç¡¬ä»¶ç¯å¢ƒå¸¦åˆ°ä¸€ä¸ªåˆé€‚çŠ¶æ€ï¼Œä¸ºè¿è¡Œæ“ä½œç³»ç»Ÿåšå¥½å‡†å¤‡ã€‚å®ƒçš„ä»»åŠ¡å°±æ˜¯æŠŠ OS æ‹‰èµ·æ¥è¿è¡Œï¼Œå¯åŠ¨ Linux å†…æ ¸ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸€å—çš„å†…å®¹å¹¶ä¸å¤ªæ³¨æ„ã€‚\r\n\r\n### Linux kernelå¯åŠ¨\r\n\r\nLinex kernelå¯åŠ¨åä¼šåˆå§‹åŒ–ç¯å¢ƒ/é©±åŠ¨ç­‰ï¼Œæ¥ç€ä¼šå¯åŠ¨ initçš„è¿›ç¨‹ã€‚\r\n\r\n#### 1.Initè¿›ç¨‹çš„å¯åŠ¨\r\n\r\ninitè¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”±å†…æ ¸å¯åŠ¨çš„ç”¨æˆ·çº§è¿›ç¨‹ã€‚å†…æ ¸è‡ªè¡Œå¯åŠ¨ï¼ˆå·²ç»è¢«è½½å…¥å†…å­˜ï¼Œå¼€å§‹è¿è¡Œï¼Œå¹¶å·²åˆå§‹åŒ–æ‰€æœ‰çš„è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œæ•°æ®ç»“æ„ç­‰ï¼‰ä¹‹åï¼Œå°±é€šè¿‡å¯åŠ¨ä¸€ä¸ªç”¨æˆ·çº§ç¨‹åº init çš„æ–¹å¼ï¼Œå¯åŠ¨ init è¿›ç¨‹ã€‚\r\n\r\nå¯åŠ¨è¿‡ç¨‹æ˜¯ä»£ç `system\\core\\init\\init.cpp`çš„ main å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ã€‚åœ¨å‡½æ•°ä¸­æ‰§è¡Œäº†ï¼šæ–‡ä»¶å¤¹å»ºç«‹ï¼ŒæŒ‚è½½ï¼Œrcæ–‡ä»¶è§£æï¼Œå±æ€§è®¾ç½®ï¼Œå¯åŠ¨æœåŠ¡ï¼Œæ‰§è¡ŒåŠ¨ä½œï¼Œsocket ç›‘å¬ç­‰ã€‚åœ¨rcæ–‡ä»¶è§£æä¸­ä¼šå¯åŠ¨ ServiceManager æœåŠ¡å’Œ Zygote è¿›ç¨‹ã€‚\r\n\r\n#### 2. ServiceManager æœåŠ¡\r\n\r\nServiceManager ç”¨æ¥ç®¡ç†ç³»ç»Ÿä¸­æ‰€æœ‰çš„ binder serviceï¼Œä¸ç®¡æ˜¯æœ¬åœ°çš„c++å®ç°çš„è¿˜æ˜¯javaè¯­è¨€å®ç°çš„éƒ½éœ€è¦è¿™ä¸ªè¿›ç¨‹æ¥ç»Ÿä¸€ç®¡ç†ï¼Œæœ€ä¸»è¦çš„ç®¡ç†å°±æ˜¯ï¼Œæ³¨å†Œæ·»åŠ æœåŠ¡ï¼Œè·å–æœåŠ¡ã€‚æ‰€æœ‰çš„ Service ä½¿ç”¨å‰éƒ½å¿…é¡»å…ˆåœ¨ ServiceManager ä¸­è¿›è¡Œæ³¨å†Œã€‚\r\n\r\n#### 3. Zygote è¿›ç¨‹çš„å¯åŠ¨\r\n\r\nZygote è¿›ç¨‹å¯åŠ¨æ‰ç®—å»ºç«‹èµ·çœŸæ­£çš„ Android çš„è¿è¡Œç©ºé—´ã€‚ä¸è¿‡ Init è¿›ç¨‹ä¸ä¼šç›´æ¥å¯åŠ¨ Zygote è¿›ç¨‹ï¼Œè€Œæ˜¯ä½¿ç”¨ app_process å‘½ä»¤æ¥é€šè¿‡ Android Runtime æ¥å¯åŠ¨ï¼ŒAndroid Runtime ä¼šå¯åŠ¨ç¬¬ä¸€ä¸ª Davlik è™šæ‹Ÿæœºï¼Œå¹¶è°ƒç”¨ Zygote çš„ main æ–¹æ³•ï¼Œå¯åŠ¨æœåŠ¡ã€‚dir/system/core/rootdir/init.zygote32.rcï¼š\r\n\r\n```\r\nservice zygote /system/bin/app_process -Xzygote /system/bin --zygote --start-system-server\r\n```\r\n\r\n### Androidå¯åŠ¨\r\n\r\n#### 1. Zygote å¯åŠ¨\r\n\r\n\r\nZygote ä» frameworks/base/cmds/app_process/app_main.cpp ä¸­çš„ main å¼€å§‹ï¼Œå¹¶å»ºç«‹ Android Run Timeã€‚\r\n\r\n```\r\n//å»ºç«‹ Android runtime\r\nruntime.start(\"com.android.internal.os.ZygoteInit\", args, zygote);\r\n// ç„¶åè°ƒç”¨ Java çš„ ZygoteInit\r\n// dir/frameworks/base/core/java/com/android/internal/os/ZygoteInit.java\r\n// éšå\r\n//ç™»è®°Listenç«¯å£\r\nregisterZygoteSocket();\r\n//å¯åŠ¨SystemServeræœåŠ¡\r\nstartSystemServer();\r\n```\r\n\r\n#### 2. SystemServerå¯åŠ¨\r\n\r\nåœ¨ä¸Šä¸€æ­¥ä¸­è°ƒç”¨äº† startSystemServerï¼Œ Zygote ä¸Š fork äº†ä¸€ä¸ªè¿›ç¨‹ï¼šcom.android.server.SystemServerã€‚äºæ˜¯ Java ä¸­çš„ SystemServer å°±å»ºç«‹èµ·æ¥äº†ï¼ŒSystemServer çš„ main å‡½æ•°ä¸­ä¼šå¯åŠ¨ä¸€äº›æœåŠ¡ï¼š\r\n\r\n```\r\nstartBootstrapServices();\r\nstartCoreServices();\r\nstartOtherServices();\r\n```\r\n\r\nåœ¨startBootstrapServices()ä¸­çœ‹åˆ°\r\n\r\n```\r\nmActivityManagerService = mSystemServiceManager.startService(ActivityManagerService.Lifecycle.class).getService();\r\n```\r\n\r\nActivityManagerService.Lifecycle æ˜¯ ActivityManagerService çš„é™æ€å†…éƒ¨ç±»ï¼Œ æŒæœ‰ ActivityManagerService å®ä¾‹ã€‚æ‰€ä»¥ ActivityManagerService æ˜¯åœ¨è¿™é‡Œè¢«å¯åŠ¨èµ·æ¥çš„ã€‚\r\n\r\nå½“ç„¶è¿˜æœ‰å¾ˆå¤šçš„å…¶ä»–æœåŠ¡ï¼ˆPackageManagerServiceã€PowerManagerServiceã€DisplayManagerServiceã€BatteryServiceç­‰ï¼‰ä¹Ÿéƒ½ä¼šè¢«å¯åŠ¨èµ·æ¥ã€‚\r\n\r\nåœ¨æ‰€æœ‰çš„æœåŠ¡å¯åŠ¨å®Œæˆåï¼Œä¼šè°ƒç”¨Service.systemReady()æ¥é€šçŸ¥å„å¯¹åº”çš„æœåŠ¡ï¼Œç³»ç»Ÿå·²ç»å°±ç»ªã€‚\r\n\r\n#### 3.ActivityManagerServiceå¯åŠ¨\r\n\r\nåœ¨ ActivityManagerService çš„ systemReady() æ–¹æ³•ä¸­æœ‰ï¼š\r\n\r\n```\r\nstartHomeActivityLocked();\r\nmStackSupervisor.startHomeActivity()\r\n```\r\n\r\nè¿™æ ·Homeç¨‹åºè¢«å¯åŠ¨èµ·æ¥ï¼Œæ•´ä¸ªandroidçš„å¯åŠ¨è¿‡ç¨‹å°±å®Œæˆäº†ï¼Œè¿›å…¥ç”¨æˆ·ç•Œé¢ã€‚\r\n\r\n---------------\r\n\r\n<center style=\"color:red;\">éœ¸ æ°” çš„ åˆ† å‰² çº¿</center>\r\n\r\n---------------\r\n\r\n# Android çš„ init è¿›ç¨‹å¯åŠ¨è¿‡ç¨‹\r\n\r\n### 0. å‰è¨€\r\n\r\nAndroid ä¸­çš„å†…æ ¸å¯åŠ¨åï¼Œkernel ä¼šå¯åŠ¨ç¬¬ä¸€ä¸ªç”¨æˆ·çº§åˆ«çš„è¿›ç¨‹ï¼šinitï¼Œå®ƒæ˜¯ä¸€ä¸ªç”±å†…æ ¸å¯åŠ¨çš„ç¬¬ä¸€ä¸ªç”¨æˆ·çº§è¿›ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`adb shell ps | grep init`æ¥æŸ¥çœ‹åˆ°ä»–çš„ pid ä¸º 1ã€‚æ¥ä¸‹æ¥ä»æºç çš„è§’åº¦çœ‹çœ‹initè¿›ç¨‹å¯åŠ¨çš„æ—¶å€™åšäº†ä»€ä¹ˆï¼Ÿ\r\n\r\ninit è¿›ç¨‹çš„æºç åœ¨ android æºç çš„: dir/system/core/init ç›®å½•ä¸­ã€‚æˆ‘ä»¬çœ‹åˆ°è¯¥ç›®å½•ä¸‹æœ‰ä¸€ä¸ª Android.mk æ–‡ä»¶ï¼Œè‡³å°‘çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œå‘Šè¯‰æˆ‘ä»¬ä¼šç”Ÿæˆä¸€ä¸ª init çš„çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚\r\n\r\n```\r\nLOCAL_MODULE:= init\r\ninclude $(BUILD_EXECUTABLE)\r\n```\r\n\r\nè€Œ init çš„å…¥å£ main å‡½æ•°æ˜¯åœ¨ init.cpp æ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚\r\n\r\n### 1. å…¥å£\r\n\r\n#### 1. å‘½ä»¤è¡Œè§£æ\r\n\r\n```\r\nif (!strcmp(basename(argv[0]), \"ueventd\")) {    \r\n      return ueventd_main(argc, argv);\r\n}\r\nif (!strcmp(basename(argv[0]), \"watchdogd\")) {    \r\n      return watchdogd_main(argc, argv);\r\n}\r\n```\r\n\r\nwatchdog å’Œ uevent å‘½ä»¤å·²ç»é›†æˆåˆ°äº† initï¼Œ å®ƒä»¬åœ¨ /sbin ç›®å½•ï¼Œæ˜¯ä¸€ä¸ªé“¾æ¥æ–‡ä»¶ï¼Œç›´æ¥é“¾æ¥åˆ° /initï¼Œæ‰€ä»¥å½“æ‰§è¡Œ /sbin/eventd æˆ– /sbin/watchdogd æ—¶ï¼Œå°†ä¼šè¿›å…¥å¯¹åº”çš„ ueventd_main æˆ– watchdogd_main å…¥å£ç‚¹ã€‚ueventd å®ˆæŠ¤è¿›ç¨‹è´Ÿè´£è§£æ /ueventd.rc æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºç›¸åº”çš„è®¾å¤‡ç»“ç‚¹ç­‰ã€‚watchdogd å®ˆæŠ¤è¿›ç¨‹è´Ÿè´£å®šæ—¶å‘ \"/dev/watchdog\" æ‰§è¡Œå†™æ“ä½œï¼Œä»¥åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦æ­£å¸¸è¿è¡Œã€‚è¿™ä¸¤ä¸ªè¿›ç¨‹ä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„é‡ç‚¹ï¼Œæ‰€ä»¥å…ˆå¿½ç•¥ã€‚\r\n\r\n#### 2. æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•\r\n\r\n```\r\nmount(\"tmpfs\", \"/dev\", \"tmpfs\", MS_NOSUID, \"mode=0755\");\r\nmkdir(\"/dev/pts\", 0755);\r\nmkdir(\"/dev/socket\", 0755);\r\nmount(\"devpts\", \"/dev/pts\", \"devpts\", 0, NULL);\r\nmount(\"proc\", \"/proc\", \"proc\", 0, \"hidepid=2,gid=\" MAKE_STR(AID_READPROC));\r\nmount(\"sysfs\", \"/sys\", \"sysfs\", 0, NULL);\r\nmount(\"selinuxfs\", \"/sys/fs/selinux\", \"selinuxfs\", 0, NULL);\r\nmknod(\"/dev/kmsg\", S_IFCHR | 0600, makedev(1, 11));\r\n```\r\n\r\nåˆ†åˆ«æŒ‚è½½ proc å’Œå’Œ sysfs æ–‡ä»¶ç³»ç»Ÿåˆ° /proc å’Œ /sys ç›®å½•\r\nclose(open(\"/dev/.booting\", O_WRONLY | O_CREAT | O_CLOEXEC, 0000)); åœ¨/devç›®å½•åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ .booting æ¥è¡¨ç¤ºæ­£åœ¨æ‰§è¡Œåˆå§‹åŒ–\r\nInitKernelLogging(argv); é‡å®šå‘æ ‡å‡†è¾“å…¥ï¼Œæ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯è¾“å‡ºåˆ° /dev/null\r\nselinux_initialize(is_first_stage) åŠ è½½SELinuxç­–ç•¥ï¼Œ åé¢æœ‰ä¸€äº›åˆå§‹åŒ–æ–‡ä»¶ä¸Šä¸‹æ–‡çš„æ“ä½œç­‰\r\n\r\n#### 3. è§£æ init.rc æ–‡ä»¶\r\n\r\n```\r\nParser& parser Parser::GetInstance();\r\nparser.AddSectionParser(\"service\",std::make_unique<ServiceParser>());\r\nparser.AddSectionParser(\"on\", std::make_unique<ActionParser>());\r\nparser.AddSectionParser(\"import\", std::make_unique<ImportParser>());\r\nparser.ParseConfig(\"/init.rc\");\r\n```\r\n\r\n- 3.1 init.rc æ–‡ä»¶æ˜¯ä»¥å—ï¼ˆsectionï¼‰ä¸ºå•ä½ç»„ç»‡çš„ï¼Œä¸€ä¸ª section åŒ…å«å¤šè¡Œã€‚section åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåˆ†åˆ«ä¸ºâ€œæœåŠ¡ï¼ˆserviceï¼‰â€å’Œâ€œè¡Œä¸ºï¼ˆactionï¼‰â€ã€‚\r\n\r\n- 3.2 â€œæœåŠ¡â€å—ä»¥å…³é”®å­—â€œserviceâ€å¼€å§‹ï¼Œè¡¨ç¤ºå¯åŠ¨æŸä¸ªè¿›ç¨‹çš„æ–¹å¼å’Œå‚æ•°ï¼Œâ€œè¡Œä¸ºâ€å—ä»¥å…³é”®å­—â€œonâ€å¼€å§‹ï¼Œè¡¨ç¤ºä¸€å †å‘½ä»¤çš„é›†åˆã€‚æ¯ä¸ªå—ä»¥å…³é”®å­—â€œserviceâ€æˆ–â€œonâ€å¼€å§‹ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªâ€œonâ€æˆ–â€œserviceâ€ç»“æŸï¼Œä¸­é—´æ‰€æœ‰è¡Œéƒ½å±äºè¿™ä¸ªâ€œå—â€ã€‚\r\n\r\n- 3.3 ä¸Šé¢åœ¨è§£æ init.rc æ–‡ä»¶æ—¶ä½¿ç”¨äº† Parser ç±»ï¼ˆåœ¨initç›®å½•ä¸‹çš„init_parser.hä¸­å®šä¹‰ï¼‰ï¼Œ åˆå§‹åŒ– ServiceParser ç”¨æ¥è§£æ â€œserviceâ€å—ï¼ŒActionParser ç”¨æ¥è§£æ\"on\"å—ï¼ŒImportParser ç”¨æ¥è§£æâ€œimportâ€å—ï¼Œâ€œimportâ€æ˜¯ç”¨æ¥å¼•å…¥ä¸€ä¸ª init é…ç½®æ–‡ä»¶ï¼Œæ¥æ‰©å±•å½“å‰é…ç½®çš„ã€‚\r\n\r\n- 3.4 parser è§£æ init.rc æ–‡ä»¶ï¼Œ/init.rc æ–‡ä»¶æ˜¯ dir/system/core/rootdir/init.rcã€‚\r\n\r\n- 3.5 dir/system/core/init/readme.txt ä¸­å¯¹ init æ–‡ä»¶ä¸­çš„æ‰€æœ‰å…³é”®å­—åšäº†ä»‹ç»ï¼Œä¸»è¦åŒ…å«äº† Actions, Commands, Services, Options, and Imports ç­‰\r\n\r\n- 3.6 åœ¨ ParseConfig è§£æå®Œ init è„šæœ¬åï¼Œinitä¼šä¾æ¬¡æ‰§è¡Œå‡ ä¸ªé‡è¦çš„é˜¶æ®µï¼š\r\n\r\n    3.6.1 on early-inité˜¶æ®µ\r\n    \r\n        am.QueueEventTrigger(\"early-init\"); æ‰§è¡Œ on early-init å†…å®¹ï¼Œä¸»è¦åŒ…æ‹¬ start ueventd ç­‰\r\n\r\n    3.6.2. on init é˜¶æ®µ\r\n\r\n        am.QueueEventTrigger(\"init\"); æ‰§è¡Œ on init å†…å®¹ï¼Œä¸»è¦åŒ…æ‹¬ åˆ›å»º/æŒ‚è½½ä¸€äº›ç›®å½•ï¼Œä»¥åŠ symlink ç­‰\r\n\r\n    3.6.3. on charger/late-inité˜¶æ®µ\r\n\r\n        ```\r\n         // Don't mount filesystems or start core system services in charger mode.\r\n         std::string bootmode = property_get(\"ro.bootmode\");\r\n         if (bootmode == \"charger\") {\r\n             am.QueueEventTrigger(\"charger\");\r\n         } else {\r\n             am.QueueEventTrigger(\"late-init\");\r\n         }\r\n        ```\r\n\r\n    å¦‚æœæ˜¯å……ç”µæ¨¡å¼ä¸‹å¯åŠ¨ å°±ä¼šæ‰§è¡Œ on charger å†…å®¹ï¼Œ å¦åˆ™æ‰§è¡Œ on late-init å†…å®¹ï¼Œåœ¨ init.rc çš„ on late-init ä¸­çœ‹åˆ°å¾ˆå¤š triggerï¼ˆè§¦å‘å™¨ï¼‰ï¼Œç”¨äºæ‰§è¡Œå¯¹åº”çš„ Actionã€‚\r\n\r\n        ```\r\n        trigger late-fs\r\n        \r\n        # Now we can mount /data. File encryption requires keymaster to decrypt\r\n        # /data, which in turn can only be loaded when system properties are present.\r\n        trigger post-fs-data\r\n        \r\n        # Load persist properties and override properties (if enabled) from /data.\r\n        trigger load_persist_props_action\r\n        \r\n        # Remove a file to wake up anything waiting for firmware.\r\n        trigger firmware_mounts_complete\r\n        \r\n        trigger early-boot\r\n        trigger boot\r\n        ```\r\n        \r\n    ä»æœ€åä¸¤è¡Œå¯ä»¥çœ‹å‡ºï¼Œlate-init è§¦å‘äº†on early-boot å’Œ on boot ä¸¤ä¸ª Actionã€‚\r\n        \r\n    3.6.4. on boot é˜¶æ®µåœ¨ on boot çš„æœ€å class_start core ä¼šå¯åŠ¨ class ä¸ºæ ¸å¿ƒçš„æœåŠ¡ï¼Œè¿™äº›æœåŠ¡åŒ…æ‹¬ ueventdã€logdã€healthdã€adbdï¼ˆdisabledï¼‰ã€lmkdï¼ˆLowMemoryKillerï¼‰ã€servicemanagerã€voldã€debuggerdã€surfaceflingerã€bootanimï¼ˆdisabledï¼‰ç­‰\r\n\r\n    3.6.5. main æœåŠ¡çš„å¯åŠ¨\r\n\r\n    åœ¨ main å‡½æ•°åé¢çš„ while å¾ªç¯ä¸­ï¼Œè°ƒç”¨ execute_one_command ä¾æ¬¡æ‰§è¡Œæ“ä½œé˜Ÿåˆ—ä¸­çš„å‘½ä»¤\r\n\r\n        ```\r\n        while (true) {\r\n            if (!waiting_for_exec) {\r\n                am.ExecuteOneCommand();\r\n                restart_processes();\r\n            }\r\n        }\r\n        ```\r\n\r\n    åœ¨ /init.rc çš„å¼€å¤´éƒ¨åˆ†\r\n        \r\n        ```\r\n        import /init.environ.rc\r\n        import /init.usb.rc\r\n        import /init.${ro.hardware}.rc\r\n        import /init.usb.configfs.rc\r\n        import /init.${ro.zygote}.rc\r\n        ```\r\n        \r\n    é€šè¿‡ ro.zygote çš„å±æ€§ import å¯¹åº”çš„ zygote çš„ rc æ–‡ä»¶ï¼Œé€šè¿‡ adb shell getprop ro.zygote æŸ¥çœ‹å¾—åˆ° zygote64_32ï¼Œ æ‰€ä»¥ import çš„æ˜¯ /init.zygote64_32.rc æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­å®šä¹‰çš„ zygote å¦‚ä¸‹ï¼š\r\n    \r\n        ```\r\n        service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-system-server --socket-name=zygote\r\n        class main\r\n        priority -20\r\n        socket zygote stream 660 root system\r\n        onrestart write /sys/android_power/request_state wake\r\n        onrestart write /sys/power/state on\r\n        onrestart restart audioserver\r\n        onrestart restart cameraserver\r\n        onrestart restart media\r\n        onrestart restart netd\r\n        writepid /dev/cpuset/foreground/tasks /dev/stune/foreground/tasks\r\n        ```\r\n\r\n    å¯ä»¥çœ‹åˆ° zygote çš„ class æ˜¯ main, å®ƒæ˜¯åœ¨ on nonencrypted æ—¶è¢«å¯åŠ¨çš„\r\n\r\n        ```\r\n        on nonencrypted\r\n            # A/B update verifier that marks a successful boot.\r\n            exec - root -- /system/bin/update_verifier nonencrypted\r\n            class_start main\r\n            class_start late_start\r\n        ```\r\n\r\n    æ³¨ï¼šä½†åœ¨ Android 7.0 ä¸­ï¼Œå¯¹è¯¥æœºåˆ¶åšäº†ä¸€äº›æ”¹å˜ ã€‚\r\n    å•ä¸€çš„initï¼Š.rcï¼Œè¢«æ‹†åˆ†ï¼ŒæœåŠ¡æ ¹æ®å…¶äºŒè¿›åˆ¶æ–‡ä»¶çš„ä½ç½®ï¼ˆï¼systemï¼Œï¼vendorï¼Œï¼odmï¼‰å®šä¹‰åˆ°å¯¹åº”åˆ†åŒºçš„etcï¼initç›®å½•ä¸­ï¼Œæ¯ä¸ªæœåŠ¡ä¸€ä¸ª rc æ–‡ä»¶ã€‚ä¸è¯¥æœåŠ¡ç›¸å…³çš„è§¦å‘å™¨ã€æ“ä½œç­‰ä¹Ÿå®šä¹‰åœ¨åŒä¸€ rc æ–‡ä»¶ä¸­ã€‚\r\n\r\n        /system/etc/initï¼ŒåŒ…å«ç³»ç»Ÿæ ¸å¿ƒæœåŠ¡çš„å®šä¹‰ï¼Œå¦‚ SurfaceFlingerã€MediaServerã€Logcatd ç­‰ã€‚\r\n        /vendor/etc/initï¼Œ SOC å‚å•†é’ˆå¯¹ SOC æ ¸å¿ƒåŠŸèƒ½å®šä¹‰çš„ä¸€äº›æœåŠ¡ã€‚æ¯”å¦‚é«˜é€šã€MTK æŸä¸€æ¬¾ SOC çš„ç›¸å…³çš„æœåŠ¡ã€‚\r\n        /odm/etc/initï¼ŒOEM/ODM å‚å•†å¦‚å°ç±³ã€åä¸ºã€OPP å…¶äº§å“æ‰€ä½¿ç”¨çš„å¤–è®¾ä»¥åŠå·®å¼‚åŒ–åŠŸèƒ½ç›¸å…³çš„æœåŠ¡ã€‚\r\n    \r\n    æŸ¥çœ‹ Android 7.0 è™šæ‹Ÿæœºçš„ /system/etc/init å¦‚ä¸‹\r\n\r\n    ![2848265-c235da5cec4a1208](https://cloud.githubusercontent.com/assets/21374839/20346629/19a1dbb0-ac38-11e6-85bf-9c9d61f8d1ce.png)\r\n\r\n    ä¸Šé¢çš„ ServiceManager è¿™ä¸ªæœåŠ¡ä¹Ÿä» init.rc ä¸­æ‹†åˆ†å‡ºæ¥äº†ã€‚\r\n\r\n#### 4. å¯åŠ¨å®Œæˆ\r\n\r\nè‡³æ­¤ï¼Œinit è¿›ç¨‹å·²ç»å¯åŠ¨å®Œæˆï¼Œä¸€äº›é‡è¦çš„æœåŠ¡å¦‚ core æœåŠ¡å’Œ main æœåŠ¡ä¹Ÿéƒ½å¯åŠ¨èµ·æ¥ï¼Œå¹¶å¯åŠ¨äº†zygoteï¼ˆ/system/bin/app_process64ï¼‰è¿›ç¨‹ï¼Œzygote åˆå§‹åŒ–æ—¶ä¼šåˆ›å»ºè™šæ‹Ÿæœºï¼Œå¯åŠ¨ SystemServer ç­‰ï¼Œå®ƒçš„å¯åŠ¨è¿‡ç¨‹ä¹Ÿæ˜¯éå¸¸å¤æ‚ã€‚\r\n\r\n---------------\r\n\r\n<center style=\"color:red;\">éœ¸ æ°” çš„ åˆ† å‰² çº¿</center>\r\n\r\n---------------\r\n\r\n# Zygote çš„å¯åŠ¨è¿‡ç¨‹\r\n\r\n### 0. å‰è¨€\r\n\r\nä¸ŠèŠ‚æ–‡ç« çš„æœ€åè¯´åˆ°äº† init ä»¥ service çš„æ–¹å¼å¯åŠ¨äº† Zygote è¿›ç¨‹ã€‚è¿™èŠ‚æ–‡ç« ä¸»è¦è®² Zygote è¿›ç¨‹çš„å¯åŠ¨æµç¨‹ã€‚\r\n\r\nå¯¹äº Zygote è¿›ç¨‹çš„æè¿°å¦‚ä¸‹ï¼š\r\n\r\nåœ¨ Android ä¸­ï¼Œzygote æ˜¯æ•´ä¸ªç³»ç»Ÿåˆ›å»ºæ–°è¿›ç¨‹çš„æ ¸å¿ƒã€‚Zygote è¿›ç¨‹åœ¨å†…éƒ¨ä¼šå…ˆå¯åŠ¨ Dalvik è™šæ‹Ÿæœºï¼Œç»§è€ŒåŠ è½½ä¸€äº›å¿…è¦çš„ç³»ç»Ÿèµ„æºå’Œç³»ç»Ÿç±»ï¼Œæœ€åè¿›å…¥ä¸€ç§ç›‘å¬çŠ¶æ€ã€‚åœ¨åç»­çš„è¿ä½œä¸­ï¼Œå½“å…¶ä»–ç³»ç»Ÿæ¨¡å—ï¼ˆæ¯”å¦‚AMSï¼‰å¸Œæœ›åˆ›å»ºæ–°è¿›ç¨‹æ—¶ï¼Œåªéœ€å‘ Zygote è¿›ç¨‹å‘å‡ºè¯·æ±‚ï¼ŒZygote è¿›ç¨‹ç›‘å¬åˆ°è¯¥è¯·æ±‚åï¼Œä¼šç›¸åº”åœ°â€œåˆ†è£‚â€å‡ºæ–°çš„è¿›ç¨‹ï¼Œäºæ˜¯è¿™ä¸ªæ–°è¿›ç¨‹åœ¨åˆç”Ÿä¹‹æ—¶ï¼Œå°±å…ˆå¤©å…·æœ‰äº†è‡ªå·±çš„ Dalvik è™šæ‹Ÿæœºä»¥åŠç³»ç»Ÿèµ„æºã€‚\r\n\r\n### 1. å¯åŠ¨æµç¨‹\r\n\r\n/init.zygote64_32.rc æ–‡ä»¶ä¸­å¯åŠ¨ Zygote çš„å†…å®¹å¦‚ä¸‹ï¼š\r\n\r\n```\r\n    service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-system-server --socket-name=zygote\r\n    class main\r\n    priority -20\r\n    socket zygote stream 660 root system\r\n    onrestart write /sys/android_power/request_state wake\r\n    onrestart write /sys/power/state on\r\n    onrestart restart audioserver\r\n    onrestart restart cameraserver\r\n    onrestart restart media\r\n    onrestart restart netd\r\n    writepid /dev/cpuset/foreground/tasks /dev/stune/foreground/tasks\r\n```\r\n\r\nåœ¨ dir/system/core/rootdir/ ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ° init.zygote32.rcã€init.zygote32_64.rcã€init.zygote64.rcã€init.zygote64_32.rc ç­‰æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸º Android5.0 å¼€å§‹æ”¯æŒ 64 ä½çš„ç¼–è¯‘ï¼Œæ‰€ä»¥ Zygote è¿›ç¨‹æœ¬èº«ä¹Ÿæœ‰ 32 ä½å’Œ 64 ä½ç‰ˆæœ¬ã€‚\r\n\r\nä»ä¸Šé¢å®šä¹‰çœ‹åˆ°Zygoteè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ frameworks/base/cmds/app_process/app_main.cppã€‚\r\n\r\næ¥ä¸‹æ¥åˆ†æ main å‡½æ•°çš„æµç¨‹ã€‚\r\n\r\n1.1. åˆ›å»º AppRuntime å¯¹è±¡\r\nAppRuntime æ˜¯åœ¨ app_process ä¸­å®šä¹‰çš„ç±»ï¼Œç»§æ‰¿äº†ç³»ç»Ÿçš„ AndroidRuntime ç±»ï¼ŒAndroidRuntime ç±»çš„ä¸»è¦ä½œç”¨æ˜¯åˆ›å»ºå’Œåˆå§‹åŒ–è™šæ‹Ÿæœºã€‚\r\n\r\n1.2. è§£æå¯åŠ¨å‚æ•°\r\n\r\n```\r\n  while (i < argc) {\r\n    const char* arg = argv[i++];\r\n    if (strcmp(arg, \"--zygote\") == 0) {\r\n        zygote = true;\r\n        niceName = ZYGOTE_NICE_NAME;\r\n    } else if (strcmp(arg, \"--start-system-server\") == 0) {\r\n        startSystemServer = true;\r\n    } else if (strcmp(arg, \"--application\") == 0) {\r\n        application = true;\r\n    } else if (strncmp(arg, \"--nice-name=\", 12) == 0) {\r\n        niceName.setTo(arg + 12);\r\n    } else if (strncmp(arg, \"--\", 2) != 0) {\r\n        className.setTo(arg);\r\n        break;\r\n    } else {\r\n        --i;\r\n        break;\r\n    }\r\n}\r\n```\r\n\r\nä» init.rc æ–‡ä»¶ä¸­ä¼ å…¥çš„å‚æ•°æ˜¯ -Xzygote /system/bin --zygote --start-system-server --socket-name=zygoteï¼Œè§£æåï¼š\r\n\r\n```\r\nzygote = true;\r\nniceName = zygoe;\r\nstartSystemServer = true;\r\n```\r\n\r\n1.3. æ‰§è¡Œ ZygoteInit ç±»\r\n\r\n```\r\nif (zygote) {\r\n    runtime.start(\"com.android.internal.os.ZygoteInit\", args, zygote);\r\n} else if (className) {\r\n    runtime.start(\"com.android.internal.os.RuntimeInit\", args, zygote);\r\n} else {\r\n    fprintf(stderr, \"Error: no class name or --zygote supplied.\\n\");\r\n    app_usage();\r\n    LOG_ALWAYS_FATAL(\"app_process: no class name or --zygote supplied.\");\r\n    return 10;\r\n}\r\n```\r\n\r\nZygote ç»è¿‡è§£æå‚æ•°åä¸º trueï¼Œ æ‰€ä»¥ä¼šæ‰§è¡Œ runtime.start(\"com.android.internal.os.ZygoteInit\", args, zygote);\r\nAndroidRuntime çš„ start æ–¹æ³•å®ç°åœ¨ dir/frameworks/base/core/jni/AndroidRuntime.cpp ä¸­ï¼Œ\r\n\r\n```\r\n/*\r\n\r\n * Start the Android runtime.  This involves starting the virtual machine\r\n * and calling the \"static void main(String[] args)\" method in the class\r\n * named by \"className\".\r\n *\r\n * Passes the main function two arguments, the class name and the specified\r\n * options string.\r\n */\r\nvoid AndroidRuntime::start(const char* className, const Vector<String8>& options, bool zygote)\r\n{\r\n    // å¯åŠ¨è™šæ‹Ÿæœºï¼Œæ³¨å†Œjniç­‰\r\n    char* slashClassName = toSlashClassName(className);\r\n    jclass startClass = env->FindClass(slashClassName);\r\n    if (startClass == NULL) {\r\n    ALOGE(\"JavaVM unable to locate class '%s'\\n\", slashClassName);\r\n    /* keep going */\r\n    } else {\r\n        jmethodID startMeth = env->GetStaticMethodID(startClass, \"main\",\r\n            \"([Ljava/lang/String;)V\");\r\n        if (startMeth == NULL) {\r\n            ALOGE(\"JavaVM unable to find main() in '%s'\\n\", className);\r\n            /* keep going */\r\n        } else {\r\n            env->CallStaticVoidMethod(startClass, startMeth, strArray);\r\n\r\n#if 0\r\n        if (env->ExceptionCheck())\r\n            threadExitUncaughtException(env);\r\n#endif\r\n        }\r\n    }\r\n      ...\r\n}\r\n```\r\n\r\nè¿™ä¸ªæ–¹æ³•ä¼šå¯åŠ¨ Android è¿è¡Œç¯å¢ƒï¼Œæ„å‘³ç€å®ƒä¼šå¯åŠ¨ Android è™šæ‹Ÿæœºï¼Œå¹¶è°ƒç”¨å‚æ•°ä¸­ className ä¸­çš„ main æ–¹æ³•ã€‚\r\nä»ä¼ å…¥çš„ com.android.internal.os.ZygoteInit ç±»ä¸­æ‰¾åˆ° main å‡½æ•°ï¼Œå³è°ƒç”¨ ZygoteInit.java ç±»ä¸­çš„ main æ–¹æ³•ã€‚AndroidRuntime åŠä¹‹å‰çš„æ–¹æ³•éƒ½æ˜¯ native çš„æ–¹æ³•ï¼Œè€Œæ­¤åˆ»è°ƒç”¨çš„ ZygoteInit.main æ–¹æ³•æ˜¯ java çš„æ–¹æ³•ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å°±è¿›å…¥äº† java çš„ä¸–ç•Œã€‚\r\n\r\nè°ƒç”¨ç¤ºæ„å›¾å¦‚ä¸‹ï¼š\r\n\r\n![2848265-da92b5d71fba5c28](https://cloud.githubusercontent.com/assets/21374839/20346675/53237f6a-ac38-11e6-8c00-2943629a2955.png)\r\n\r\n1.4. ZygoteInit çš„ main æ–¹æ³•\r\n\r\nZygoteInit å®šä¹‰åœ¨ dir/frameworks/base/core/java/com/android/internal/os/ZygoteInit.java ä¸­ã€‚\r\n\r\n```\r\npublic static void main(String argv[]) {\r\n    try {\r\n        ...\r\n        registerZygoteSocket(socketName);\r\n        preload();\r\n        if (startSystemServer) {\r\n            startSystemServer(abiList, socketName);\r\n        }\r\n        runSelectLoop(abiList);\r\n        ...\r\n    } catch (MethodAndArgsCaller caller) {\r\n        caller.run();\r\n    } catch (RuntimeException ex) {\r\n        Log.e(TAG, \"Zygote died with exception\", ex);\r\n        closeServerSocket();\r\n        throw ex;\r\n    }\r\n}\r\n```\r\n\r\nä¸»è¦å·¥ä½œ:\r\n\r\n- æ³¨å†ŒZygoteçš„socketç›‘å¬ç«¯å£ï¼Œåº”ç”¨æ¥æ”¶å¯åŠ¨åº”ç”¨ç¨‹åºçš„æ¶ˆæ¯\r\n-  è°ƒç”¨preload()æ–¹æ³•åŠ è½½ç³»ç»Ÿèµ„æºï¼ŒåŒ…æ‹¬é¢„åŠ è½½ç±»ï¼ŒFrameworkèµ„æºç­‰\r\n- è°ƒç”¨startSystemServer()æ–¹æ³•å¯åŠ¨SystemServerè¿›ç¨‹\r\n- è°ƒç”¨runSelectLoop()æ–¹æ³•è¿›å…¥ç›‘å¬å’Œæ¥æ”¶æ¶ˆæ¯å¾ªç¯\r\n\r\nå¯è§SystemServeræ˜¯Zygoteå¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ã€‚\r\n\r\nä»¥ä¸Šå­¦ä¹ äº† Android ç³»ç»Ÿçš„å¯åŠ¨æµç¨‹ã€‚\r\n"}]